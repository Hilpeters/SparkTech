import{r as e,a as t,g as n}from"./vendor-JrvCYy-U.js";import{U as s,R as r,T as i,A as o,r as a,L as l,I as c,M as u,P as h,a as d,X as p,b as m,C as f,c as g,E as y,d as v,e as w,f as x,g as b,h as T,i as E}from"./utils-COl9prxU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var S,_,C={exports:{}},N={};var I,k=(_||(_=1,C.exports=function(){if(S)return N;S=1;var t=e(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,s){var a,l={},c=null,u=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:i.current}}return N.Fragment=s,N.jsx=a,N.jsxs=a,N}()),C.exports),A={};var j=function(){if(I)return A;I=1;var e=t();return A.createRoot=e.createRoot,A.hydrateRoot=e.hydrateRoot,A}();const P=[{id:1,title:"E-commerce Website",description:"An e-commerce website with Paypal and WhatsApp link for Checkout",skills:["React","Tailwind CSS","JavaScript"],link:"https://alphastores-1798.web.app/   ",image:"/assets/projectone-D6SulrS3.png"},{id:2,title:"Realtime chat web app",description:"A realtime chat web app with React and Firebase",skills:["HTML","CSS","JavaScript"],link:"https://realtime-chat-81abf.web.app",image:"/assets/project2-BZb78Wln.png"}],R=()=>{const e=[{icon:k.jsx(s,{className:"w-6 h-6","aria-hidden":"true"}),number:"5+",label:"Clients"},{icon:k.jsx(r,{className:"w-6 h-6","aria-hidden":"true"}),number:"15+",label:"Projects"},{icon:k.jsx(i,{className:"w-6 h-6","aria-hidden":"true"}),number:"1+",label:"Years"},{icon:k.jsx(o,{className:"w-6 h-6","aria-hidden":"true"}),number:"1+",label:"Awards"}],t=[{name:"PETER KINYANJUI",role:"",image:"/assets/myprofile-9IrQsV11.png",id:1}];return k.jsx("main",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8",children:[k.jsxs("section",{className:"grid lg:grid-cols-2 gap-12 items-start","aria-labelledby":"vision-heading",children:[k.jsxs("div",{className:"space-y-8",children:[k.jsxs("header",{className:"space-y-4",children:[k.jsx("h1",{id:"vision-heading",className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary to-tertiary bg-clip-text text-transparent",children:"About Our Vision"}),k.jsx("p",{className:"text-primary text-lg leading-relaxed",children:"We're on a mission to transform the digital landscape through innovative solutions and cutting-edge technology. Our passion drives us to create exceptional experiences that make a difference."})]}),k.jsx("section",{"aria-label":"Company Statistics",className:"grid grid-cols-2 gap-6",children:e.map(((e,t)=>k.jsxs("article",{className:"p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300",children:[k.jsx("div",{className:"text-primary mb-2","aria-hidden":"true",children:e.icon}),k.jsxs("dl",{children:[k.jsx("dt",{className:"sr-only",children:e.label}),k.jsxs("dd",{children:[k.jsx("span",{className:"text-2xl font-bold text-tertiary",children:e.number}),k.jsx("span",{className:"block text-secondary",children:e.label})]})]})]},t)))})]}),k.jsx("section",{className:"space-y-8","aria-labelledby":"projects-heading",children:k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:P.map((e=>k.jsxs("article",{className:"bg-secondary p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300",children:[k.jsx("figure",{className:"w-full h-48 rounded-xl mb-4 overflow-hidden",children:k.jsx("img",{src:e.image,alt:`${e.title} project screenshot`,className:"w-full h-full object-cover",loading:"lazy"})}),k.jsx("h2",{className:"text-xl font-semibold text-center text-primary",children:e.title}),k.jsx("p",{className:"text-quaternary text-center",children:e.description})]},e.id)))})})]}),k.jsxs("section",{className:"mt-24","aria-labelledby":"team-heading",children:[k.jsx("h2",{id:"team-heading",className:"text-3xl font-bold text-center mb-12 bg-gradient-to-r from-primary to-indigo-600 bg-clip-text text-transparent",children:"Meet Our Team"}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((e=>k.jsxs("article",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300",children:[k.jsx("figure",{className:"w-32 h-32 bg-gradient-to-br from-secondary to-tertiary rounded-full mx-auto mb-4 overflow-hidden",children:k.jsx("img",{src:e.image,alt:`${e.name} - ${e.role}`,className:"w-full h-full object-cover",loading:"lazy"})}),k.jsx("h3",{className:"text-xl font-semibold text-center text-gray-800",children:e.name}),k.jsx("p",{className:"text-tertiary text-center",children:e.role})]},e.id)))})]}),k.jsxs("section",{className:"mt-24 text-center max-w-3xl mx-auto","aria-labelledby":"values-heading",children:[k.jsx("h2",{id:"values-heading",className:"text-3xl font-bold mb-8 bg-gradient-to-r from-primary to-primary bg-clip-text text-transparent",children:"Our Values"}),k.jsx("div",{className:"prose prose-lg text-secondary",children:k.jsx("p",{className:"mb-6",children:"We believe in pushing boundaries, fostering innovation, and creating meaningful connections. Our commitment to excellence drives everything we do, from the smallest details to the biggest challenges."})})]})]})})};class D{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const L={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},O=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},M=async(e,t,n={})=>{const s=await fetch(L.origin+e,{method:"POST",headers:n,body:t}),r=await s.text(),i=new D(s.status,r);if(s.ok)return i;throw i},V=(e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},U=e=>e.webdriver||!e.languages||0===e.languages.length,F=()=>new D(451,"Unavailable For Headless Browser"),B=(e,t)=>{if((e=>{var t;return!(null==(t=e.list)?void 0:t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(s=t,r=e.watchVariable,s instanceof FormData?s.get(r):s[r]);var s,r;return"string"==typeof n&&e.list.includes(n)},$=()=>new D(403,"Forbidden"),q=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const s=t.id||e,r=await(async(e,t,n)=>{const s=Number(await n.get(e)||0);return t-Date.now()+s})(s,t.throttle,n);return r>0||(await n.set(s,Date.now().toString()),!1)},z=()=>new D(429,"Too Many Requests"),H=(e,t="https://api.emailjs.com")=>{if(!e)return;const n=O(e);L.publicKey=n.publicKey,L.blockHeadless=n.blockHeadless,L.storageProvider=n.storageProvider,L.blockList=n.blockList,L.limitRate=n.limitRate,L.origin=n.origin||t},W=async(e,t,n,s)=>{const r=O(s),i=r.publicKey||L.publicKey,o=r.blockHeadless||L.blockHeadless,a=r.storageProvider||L.storageProvider,l={...L.blockList,...r.blockList},c={...L.limitRate,...r.limitRate};if(o&&U(navigator))return Promise.reject(F());if(V(i,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&B(l,n))return Promise.reject($());if(await q(location.pathname,c,a))return Promise.reject(z());const u={lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:n};return M("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})};function K(){const[e,t]=a.useState({firstName:"",lastName:"",email:"",phone:"",message:""}),[n,s]=a.useState(!1),[r,i]=a.useState({message:"",type:""});a.useEffect((()=>{H("x3y7k1yvWMwdEQrHv")}),[]),a.useEffect((()=>{if(r.message){const e=setTimeout((()=>{i({message:"",type:""})}),5e3);return()=>clearTimeout(e)}}),[r.message]);const o=n=>{t({...e,[n.target.name]:n.target.value})};return k.jsx("main",{className:"w-full py-16 bg-white",children:k.jsx("div",{className:"max-w-6xl mx-auto px-4",children:k.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[k.jsxs("section",{"aria-labelledby":"contact-heading",children:[k.jsx("h1",{id:"contact-heading",className:"text-5xl text-primary font-bold mb-6",children:"Contact Us Today"}),k.jsxs("div",{className:"space-y-4",children:[k.jsx("h2",{className:"text-2xl font-semibold",children:"Get in Touch"}),k.jsx("p",{className:"text-gray-600 text-xl",children:"Reach Out for a Consultation"}),k.jsxs("address",{className:"space-y-2 not-italic",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"block text-primary text-xl",children:"Email:"}),k.jsx("a",{href:"mailto:alphatech1798@gmail.com",className:"text-primary hover:text-secondary hover:underline","aria-label":"Send us an email",children:"alphatech1798@gmail.com"})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"block text-primary text-xl",children:"Phone:"}),k.jsx("a",{href:"tel:+254796591251",className:"text-primary hover:text-secondary","aria-label":"Call us",children:"+254 796591251"})]})]})]})]}),k.jsx("section",{"aria-labelledby":"form-heading",children:k.jsxs("div",{className:"p-6",children:[k.jsx("h2",{id:"form-heading",className:"text-2xl text-secondary font-semibold mb-6",children:"Contact us"}),r.message&&k.jsx("div",{role:"alert",className:"mb-4 p-3 rounded "+("success"===r.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:r.message}),k.jsxs("form",{onSubmit:async n=>{n.preventDefault(),s(!0);try{const n={from_name:`${e.firstName} ${e.lastName}`,from_email:e.email,from_phone:e.phone,message:e.message,to_name:"Spark Tech",reply_to:e.email};200===(await W("service_9jyrl8u","template_ikiidkd",n)).status&&(i({message:"Message sent successfully!",type:"success"}),t({firstName:"",lastName:"",email:"",phone:"",message:""}))}catch(r){console.error("Error sending email:",r),i({message:"Failed to send message. Please try again.",type:"error"})}finally{s(!1)}},className:"space-y-4","aria-label":"Contact form",children:[k.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium mb-1",children:"First Name *"}),k.jsx("input",{id:"firstName",type:"text",name:"firstName",value:e.firstName,onChange:o,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,"aria-required":"true",placeholder:"Enter your first name"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium mb-1",children:"Last Name *"}),k.jsx("input",{id:"lastName",type:"text",name:"lastName",value:e.lastName,onChange:o,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,"aria-required":"true",placeholder:"Enter your last name"})]})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email Address *"}),k.jsx("input",{id:"email",type:"email",name:"email",value:e.email,onChange:o,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,"aria-required":"true",placeholder:"your.email@example.com"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium mb-1",children:"Phone Number *"}),k.jsx("input",{id:"phone",type:"tel",name:"phone",value:e.phone,onChange:o,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,"aria-required":"true",placeholder:"+254 XXX XXX XXX",pattern:"[0-9+\\s-]*"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"message",className:"block text-sm font-medium mb-1",children:"Message *"}),k.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,rows:"4",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,"aria-required":"true",placeholder:"Type your message here..."})]}),k.jsx("button",{type:"submit",disabled:n,className:"w-full py-2 px-4 rounded-full transition-colors flex items-center justify-center space-x-2\n                "+(n?"bg-gray-400 cursor-not-allowed":"bg-tertiary hover:bg-primary text-white"),"aria-label":n?"Sending message...":"Submit contact form",children:n?k.jsxs(k.Fragment,{children:[k.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),k.jsx("span",{children:"Sending..."})]}):k.jsx("span",{children:"Submit"})})]})]})})]})})})}const G=()=>k.jsx("main",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-16",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsx("header",{className:"mb-12",children:k.jsx("h1",{className:"text-3xl font-bold text-center bg-gradient-to-r from-primary to-indigo-600 bg-clip-text text-transparent",children:"Some of Our Projects"})}),k.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8","aria-label":"projects gallery",children:P.map((e=>k.jsxs("article",{className:"bg-primary p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300",children:[k.jsx("figure",{className:"w-full h-48 bg-gradient-to-br from-secondary to-tertiary rounded-xl mb-4 overflow-hidden",children:k.jsx("img",{src:e.image,alt:`Screenshot of ${e.title}`,className:"w-full h-full object-cover",loading:"lazy"})}),k.jsx("header",{children:k.jsx("h2",{className:"text-xl font-semibold text-center text-quaternary mb-2",children:e.title})}),k.jsx("p",{className:"text-quinary text-center mb-4",children:e.description}),k.jsx("ul",{className:"flex justify-center space-x-2 mb-4 flex-wrap gap-2","aria-label":"Technologies used",children:e.skills.map(((e,t)=>k.jsx("li",{className:"bg-quaternary text-primary px-2 py-1 rounded-full text-lg text-center",children:e},t)))}),k.jsx("footer",{className:"text-center",children:k.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-quaternary hover:underline inline-block","aria-label":`View ${e.title} project`,children:"View Project"})})]},e.id)))})]})});var Q,Y={};!function(){if(Q)return Y;Q=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.parse=function(e,t){const n=new i,s=e.length;if(s<2)return n;const r=(null==t?void 0:t.decode)||l;let c=0;do{const t=e.indexOf("=",c);if(-1===t)break;const i=e.indexOf(";",c),l=-1===i?s:i;if(t>l){c=e.lastIndexOf(";",t-1)+1;continue}const u=o(e,c,t),h=a(e,t,u),d=e.slice(u,h);if(void 0===n[d]){let s=o(e,t+1,l),i=a(e,l,s);const c=r(e.slice(s,i));n[d]=c}c=l+1}while(c<s);return n},Y.serialize=function(i,o,a){const l=(null==a?void 0:a.encode)||encodeURIComponent;if(!e.test(i))throw new TypeError(`argument name is invalid: ${i}`);const c=l(o);if(!t.test(c))throw new TypeError(`argument val is invalid: ${o}`);let u=i+"="+c;if(!a)return u;if(void 0!==a.maxAge){if(!Number.isInteger(a.maxAge))throw new TypeError(`option maxAge is invalid: ${a.maxAge}`);u+="; Max-Age="+a.maxAge}if(a.domain){if(!n.test(a.domain))throw new TypeError(`option domain is invalid: ${a.domain}`);u+="; Domain="+a.domain}if(a.path){if(!s.test(a.path))throw new TypeError(`option path is invalid: ${a.path}`);u+="; Path="+a.path}if(a.expires){if(!function(e){return"[object Date]"===r.call(e)}(a.expires)||!Number.isFinite(a.expires.valueOf()))throw new TypeError(`option expires is invalid: ${a.expires}`);u+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(u+="; HttpOnly");a.secure&&(u+="; Secure");a.partitioned&&(u+="; Partitioned");if(a.priority){switch("string"==typeof a.priority?a.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${a.priority}`)}}if(a.sameSite){switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${a.sameSite}`)}}return u};const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function o(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function a(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}}();
/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var X="popstate";function J(e={}){return function(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a="POP",l=null,c=u();null==c&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e,t){a="PUSH";let n=ne(f.location,e,t);c=u()+1;let s=te(n,c),h=f.createHref(n);try{o.pushState(s,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;r.location.assign(h)}i&&l&&l({action:a,location:f.location,delta:1})}function p(e,t){a="REPLACE";let n=ne(f.location,e,t);c=u();let s=te(n,c),r=f.createHref(n);o.replaceState(s,"",r),i&&l&&l({action:a,location:f.location,delta:0})}function m(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"==typeof e?e:se(e);return n=n.replace(/ $/,"%20"),Z(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}let f={get action(){return a},get location(){return e(r,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(X,h),l=e,()=>{r.removeEventListener(X,h),l=null}},createHref:e=>t(r,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:p,go:e=>o.go(e)};return f}((function(e,t){let{pathname:n,search:s,hash:r}=e.location;return ne("",{pathname:n,search:s,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:se(t)}),0,e)}function Z(e,t){if(!1===e||null==e)throw new Error(t)}function ee(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function te(e,t){return{usr:e.state,key:e.key,idx:t}}function ne(e,t,n=null,s){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?re(t):t,state:n,key:t&&t.key||s||Math.random().toString(36).substring(2,10)}}function se({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function re(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function ie(e,t,n="/"){return function(e,t,n,s){let r="string"==typeof t?re(t):t,i=we(r.pathname||"/",n);if(null==i)return null;let o=oe(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let l=0;null==a&&l<o.length;++l){let e=ve(i);a=ge(o[l],e,s)}return a}(e,t,n,!1)}function oe(e,t=[],n=[],s=""){let r=(e,r,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(Z(o.relativePath.startsWith(s),`Absolute route path "${o.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(s.length));let a=Ee([s,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(Z(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),oe(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:fe(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let s of ae(e.path))r(e,t,s);else r(e,t)})),t}function ae(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===s.length)return r?[i,""]:[i];let o=ae(s.join("/")),a=[];return a.push(...o.map((e=>""===e?i:[i,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var le=/^:[\w-]+$/,ce=3,ue=2,he=1,de=10,pe=-2,me=e=>"*"===e;function fe(e,t){let n=e.split("/"),s=n.length;return n.some(me)&&(s+=pe),t&&(s+=ue),n.filter((e=>!me(e))).reduce(((e,t)=>e+(le.test(t)?ce:""===t?he:de)),s)}function ge(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let a=0;a<s.length;++a){let e=s[a],l=a===s.length-1,c="/"===i?t:t.slice(i.length)||"/",u=ye({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!s[s.length-1].route.index&&(u=ye({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:Ee([i,u.pathname]),pathnameBase:Se(Ee([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=Ee([i,u.pathnameBase]))}return o}function ye(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t=!1,n=!0){ee("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(s.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let i=new RegExp(r,t?void 0:"i");return[i,s]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce(((e,{paramName:t,isOptional:n},s)=>{if("*"===t){let e=a[s]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const r=a[s];return e[t]=n&&!r?void 0:(r||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:o,pattern:e}}function ve(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return ee(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function we(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function xe(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function be(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Te(e,t,n,s=!1){let r;"string"==typeof e?r=re(e):(r={...e},Z(!r.pathname||!r.pathname.includes("?"),xe("?","pathname","search",r)),Z(!r.pathname||!r.pathname.includes("#"),xe("#","pathname","hash",r)),Z(!r.search||!r.search.includes("#"),xe("#","search","hash",r)));let i,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)i=n;else{let e=t.length-1;if(!s&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:s="",hash:r=""}="string"==typeof e?re(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:_e(s),hash:Ce(r)}}(r,i),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Ee=e=>e.join("/").replace(/\/\/+/g,"/"),Se=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_e=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ce=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Ne=["POST","PUT","PATCH","DELETE"];new Set(Ne);var Ie=["GET",...Ne];new Set(Ie);var ke=a.createContext(null);ke.displayName="DataRouter";var Ae=a.createContext(null);Ae.displayName="DataRouterState";var je=a.createContext({isTransitioning:!1});je.displayName="ViewTransition",a.createContext(new Map).displayName="Fetchers",a.createContext(null).displayName="Await";var Pe=a.createContext(null);Pe.displayName="Navigation";var Re=a.createContext(null);Re.displayName="Location";var De=a.createContext({outlet:null,matches:[],isDataRoute:!1});De.displayName="Route";var Le=a.createContext(null);function Oe(){return null!=a.useContext(Re)}function Me(){return Z(Oe(),"useLocation() may be used only in the context of a <Router> component."),a.useContext(Re).location}Le.displayName="RouteError";var Ve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ue(e){a.useContext(Pe).static||a.useLayoutEffect(e)}function Fe(){let{isDataRoute:e}=a.useContext(De);return e?function(){let{router:e}=function(e){let t=a.useContext(ke);return Z(t,Ge(e)),t}("useNavigate"),t=Qe("useNavigate"),n=a.useRef(!1);return Ue((()=>{n.current=!0})),a.useCallback((async(s,r={})=>{ee(n.current,Ve),n.current&&("number"==typeof s?e.navigate(s):await e.navigate(s,{fromRouteId:t,...r}))}),[e,t])}():function(){Z(Oe(),"useNavigate() may be used only in the context of a <Router> component.");let e=a.useContext(ke),{basename:t,navigator:n}=a.useContext(Pe),{matches:s}=a.useContext(De),{pathname:r}=Me(),i=JSON.stringify(be(s)),o=a.useRef(!1);return Ue((()=>{o.current=!0})),a.useCallback(((s,a={})=>{if(ee(o.current,Ve),!o.current)return;if("number"==typeof s)return void n.go(s);let l=Te(s,JSON.parse(i),r,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ee([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)}),[t,n,i,r,e])}()}function Be(){let{matches:e}=a.useContext(De),t=e[e.length-1];return t?t.params:{}}function $e(e,{relative:t}={}){let{matches:n}=a.useContext(De),{pathname:s}=Me(),r=JSON.stringify(be(n));return a.useMemo((()=>Te(e,JSON.parse(r),s,"path"===t)),[e,r,s,t])}function qe(e,t,n,s){var r;Z(Oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=a.useContext(Pe),{matches:l}=a.useContext(De),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";Xe(h,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let m,f=Me();if(t){let e="string"==typeof t?re(t):t;Z("/"===d||(null==(r=e.pathname)?void 0:r.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),m=e}else m=f;let g=m.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=!o&&n&&n.matches&&n.matches.length>0?n.matches:ie(e,{pathname:y});ee(p||null!=v,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ee(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=function(e,t=[],n=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,r=null==n?void 0:n.errors;if(null!=r){let e=s.findIndex((e=>e.route.id&&void 0!==(null==r?void 0:r[e.route.id])));Z(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,o=-1;if(n)for(let a=0;a<s.length;a++){let e=s[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=a),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){i=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight(((e,l,c)=>{let u,h=!1,d=null,p=null;n&&(u=r&&l.route.id?r[l.route.id]:void 0,d=l.route.errorElement||He,i&&(o<0&&0===c?(Xe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):o===c&&(h=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,c+1)),f=()=>{let t;return t=u?d:h?p:l.route.Component?a.createElement(l.route.Component,null):l.route.element?l.route.element:e,a.createElement(Ke,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?a.createElement(We,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()}),null)}(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Ee([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Ee([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,s);return t&&w?a.createElement(Re.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function ze(){let e=function(){var e;let t=a.useContext(Le),n=function(e){let t=a.useContext(Ae);return Z(t,Ge(e)),t}("useRouteError"),s=Qe("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=a.createElement(a.Fragment,null,a.createElement("p",null,"💿 Hey developer 👋"),a.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",a.createElement("code",{style:i},"ErrorBoundary")," or"," ",a.createElement("code",{style:i},"errorElement")," prop on your route.")),a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:r},n):null,o)}a.createContext(null);var He=a.createElement(ze,null),We=class extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(De.Provider,{value:this.props.routeContext},a.createElement(Le.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ke({routeContext:e,match:t,children:n}){let s=a.useContext(ke);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),a.createElement(De.Provider,{value:e},n)}function Ge(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qe(e){let t=function(e){let t=a.useContext(De);return Z(t,Ge(e)),t}(e),n=t.matches[t.matches.length-1];return Z(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Ye={};function Xe(e,t,n){t||Ye[e]||(Ye[e]=!0,ee(!1,n))}function Je({to:e,replace:t,state:n,relative:s}){Z(Oe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=a.useContext(Pe);ee(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=a.useContext(De),{pathname:o}=Me(),l=Fe(),c=Te(e,be(i),o,"path"===s),u=JSON.stringify(c);return a.useEffect((()=>{l(JSON.parse(u),{replace:t,state:n,relative:s})}),[l,u,s,t,n]),null}function Ze(e){Z(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function et({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){Z(!Oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=a.useMemo((()=>({basename:o,navigator:r,static:i,future:{}})),[o,r,i]);"string"==typeof n&&(n=re(n));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:p="default"}=n,m=a.useMemo((()=>{let e=we(c,o);return null==e?null:{location:{pathname:e,search:u,hash:h,state:d,key:p},navigationType:s}}),[o,c,u,h,d,p,s]);return ee(null!=m,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:a.createElement(Pe.Provider,{value:l},a.createElement(Re.Provider,{children:t,value:m}))}function tt({children:e,location:t}){return qe(nt(e),t)}function nt(e,t=[]){let n=[];return a.Children.forEach(e,((e,s)=>{if(!a.isValidElement(e))return;let r=[...t,s];if(e.type===a.Fragment)return void n.push.apply(n,nt(e.props.children,r));Z(e.type===Ze,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Z(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=nt(e.props.children,r)),n.push(i)})),n}a.memo((function({routes:e,future:t,state:n}){return qe(e,void 0,n,t)}));var st="get",rt="application/x-www-form-urlencoded";function it(e){return null!=e&&"string"==typeof e.tagName}var ot=null;var at=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lt(e){return null==e||at.has(e)?e:(ee(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rt}"`),null)}function ct(e,t){let n,s,r,i,o;if(it(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");s=o?we(o,t):null,n=e.getAttribute("method")||st,r=lt(e.getAttribute("enctype"))||rt,i=new FormData(e)}else if(function(e){return it(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return it(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(s=a?we(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||st,r=lt(e.getAttribute("formenctype"))||lt(o.getAttribute("enctype"))||rt,i=new FormData(o,e),!function(){if(null===ot)try{new FormData(document.createElement("form"),0),ot=!1}catch(e){ot=!0}return ot}()){let{name:t,type:n,value:s}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,s)}}else{if(it(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=st,s=null,r=rt,o=e}var a;return i&&"text/plain"===r&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}function ut(e,t){if(!1===e||null==e)throw new Error(t)}function ht(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function dt(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce(((e,t)=>{let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}(t));return n.has(s)||(n.add(s),e.push({key:s,link:t})),e}),[])}((await Promise.all(e.map((async e=>{let s=t.routes[e.route.id];if(s){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(s,n);return e.links?e.links():[]}return[]})))).flat(1).filter(ht).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}function pt(e,t,n,s,r,i){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var s;return n[t].pathname!==e.pathname||(null==(s=n[t].route.path)?void 0:s.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===i?t.filter(((t,i)=>{var l;let c=s.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,i)||a(t,i))return!0;if(t.route.shouldRevalidate){let s=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof s)return s}return!0})):[]}function mt(e,t){return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s})).flat(1),[...new Set(n)];var n}var ft=a.createContext(void 0);function gt(){let e=a.useContext(ft);return ut(e,"You must render this element inside a <HydratedRouter> element"),e}function yt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function vt({page:e,...t}){let{router:n}=function(){let e=a.useContext(ke);return ut(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}(),s=a.useMemo((()=>ie(n.routes,e,n.basename)),[n.routes,e,n.basename]);return s?a.createElement(wt,{page:e,matches:s,...t}):null}function wt({page:e,matches:t,...n}){let s=Me(),{manifest:r,routeModules:i}=gt(),{loaderData:o,matches:l}=function(){let e=a.useContext(Ae);return ut(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=a.useMemo((()=>pt(e,t,l,r,s,"data")),[e,t,l,r,s]),u=a.useMemo((()=>pt(e,t,l,r,s,"assets")),[e,t,l,r,s]),h=a.useMemo((()=>{if(e===s.pathname+s.search+s.hash)return[];let n=new Set,a=!1;if(t.forEach((e=>{var t;let s=r.routes[e.route.id];s&&s.hasLoader&&(!c.some((t=>t.route.id===e.route.id))&&e.route.id in o&&(null==(t=i[e.route.id])?void 0:t.shouldRevalidate)||s.hasClientLoader?a=!0:n.add(e.route.id))})),0===n.size)return[];let l=function(e){let t="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===t.pathname?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}(e);return a&&n.size>0&&l.searchParams.set("_routes",t.filter((e=>n.has(e.route.id))).map((e=>e.route.id)).join(",")),[l.pathname+l.search]}),[o,s,r,c,t,e,i]),d=a.useMemo((()=>mt(u,r)),[u,r]),p=function(e){let{manifest:t,routeModules:n}=gt(),[s,r]=a.useState([]);return a.useEffect((()=>{let s=!1;return dt(e,t,n).then((e=>{s||r(e)})),()=>{s=!0}}),[e,t,n]),s}(u);return a.createElement(a.Fragment,null,h.map((e=>a.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n}))),d.map((e=>a.createElement("link",{key:e,rel:"modulepreload",href:e,...n}))),p.map((({key:e,link:t})=>a.createElement("link",{key:e,...t}))))}function xt(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}ft.displayName="FrameworkContext";var bt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{bt&&(window.__reactRouterVersion="7.1.5")}catch(BE){}function Tt({basename:e,children:t,window:n}){let s=a.useRef();null==s.current&&(s.current=J({window:n,v5Compat:!0}));let r=s.current,[i,o]=a.useState({action:r.action,location:r.location}),l=a.useCallback((e=>{a.startTransition((()=>o(e)))}),[o]);return a.useLayoutEffect((()=>r.listen(l)),[r,l]),a.createElement(et,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:r})}var Et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=a.forwardRef((function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:r,replace:i,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},p){let m,{basename:f}=a.useContext(Pe),g="string"==typeof c&&Et.test(c),y=!1;if("string"==typeof c&&g&&(m=c,bt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=we(t.pathname,f);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:y=!0}catch(BE){ee(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e,{relative:t}={}){Z(Oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=a.useContext(Pe),{hash:r,pathname:i,search:o}=$e(e,{relative:t}),l=i;return"/"!==n&&(l="/"===i?n:Ee([n,i])),s.createHref({pathname:l,search:o,hash:r})}(c,{relative:s}),[w,x,b]=function(e,t){let n=a.useContext(ft),[s,r]=a.useState(!1),[i,o]=a.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,p=a.useRef(null);a.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),a.useEffect((()=>{if(s){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let m=()=>{r(!0)},f=()=>{r(!1),o(!1)};return n?"intent"!==e?[i,p,{}]:[i,p,{onFocus:yt(l,m),onBlur:yt(c,f),onMouseEnter:yt(u,m),onMouseLeave:yt(h,f),onTouchStart:yt(d,m)}]:[!1,p,{}]}(n,d),T=function(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=Fe(),c=Me(),u=$e(e,{relative:i});return a.useCallback((a=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(a,t)){a.preventDefault();let t=void 0!==n?n:se(c)===se(u);l(e,{replace:t,state:s,preventScrollReset:r,relative:i,viewTransition:o})}}),[c,l,u,n,s,t,e,r,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:h});let E=a.createElement("a",{...d,...b,href:m||v,onClick:y||r?e:function(t){e&&e(t),t.defaultPrevented||T(t)},ref:xt(p,x),target:l,"data-discover":g||"render"!==t?void 0:"true"});return w&&!g?a.createElement(a.Fragment,null,E,a.createElement(vt,{page:v})):E}));function _t(e){let t=a.useContext(ke);return Z(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}St.displayName="Link",a.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:r,to:i,viewTransition:o,children:l,...c},u){let h=$e(i,{relative:c.relative}),d=Me(),p=a.useContext(Ae),{navigator:m,basename:f}=a.useContext(Pe),g=null!=p&&function(e,t={}){let n=a.useContext(je);Z(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_t("useViewTransitionState"),r=$e(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=we(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=we(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=ye(r.pathname,o)||null!=ye(r.pathname,i)}(h)&&!0===o,y=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,v=d.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(v=v.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&f&&(w=we(w,f)||w);const x="/"!==y&&y.endsWith("/")?y.length-1:y.length;let b,T=v===y||!s&&v.startsWith(y)&&"/"===v.charAt(x),E=null!=w&&(w===y||!s&&w.startsWith(y)&&"/"===w.charAt(y.length)),S={isActive:T,isPending:E,isTransitioning:g},_=T?e:void 0;b="function"==typeof n?n(S):[n,T?"active":null,E?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof r?r(S):r;return a.createElement(St,{...c,"aria-current":_,className:b,ref:u,style:C,to:i,viewTransition:o},"function"==typeof l?l(S):l)})).displayName="NavLink",a.forwardRef((({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:o=st,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,...p},m)=>{let f=function(){let{router:e}=_t("useSubmit"),{basename:t}=a.useContext(Pe),n=Qe("useRouteId");return a.useCallback((async(s,r={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=ct(s,t);if(!1===r.navigate){let t=r.fetcherKey||Nt();await e.fetch(t,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})}),[e,t,n])}(),g=function(e,{relative:t}={}){let{basename:n}=a.useContext(Pe),s=a.useContext(De);Z(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...$e(e||".",{relative:t})},o=Me();if(null==e){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();i.search=n?`?${n}`:""}}e&&"."!==e||!r.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:Ee([n,i.pathname]));return se(i)}(l,{relative:u}),y="get"===o.toLowerCase()?"get":"post",v="string"==typeof l&&Et.test(l);return a.createElement("form",{ref:m,method:y,action:g,onSubmit:s?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let s=e.nativeEvent.submitter,a=(null==s?void 0:s.getAttribute("formmethod"))||o;f(s||e.currentTarget,{fetcherKey:t,method:a,navigate:n,replace:r,state:i,relative:u,preventScrollReset:h,viewTransition:d})},...p,"data-discover":v||"render"!==e?void 0:"true"})})).displayName="Form";var Ct=0,Nt=()=>`__${String(++Ct)}__`;new TextEncoder;const It="/assets/logo2-CnlbVmPt.png",kt=()=>{const e="https://www.instagram.com/spark_techsolutions",t="https://www.tiktok.com/@sparktechsolution",n="https://www.linkedin.com/in/peter-k-336100262",s="https://wa.me/254796591251";return k.jsx("footer",{className:"bg-primary text-tertiary",role:"contentinfo",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[k.jsxs("section",{"aria-labelledby":"company-info",children:[k.jsxs("div",{className:"flex flex-row gap-2","aria-hidden":"true",children:[k.jsx("img",{src:It,alt:"sparktech logo",className:"w-8 h-8"}),k.jsx("h2",{id:"company-info",className:"text-quinary font-bold text-lg mb-4",children:"SparkTech Solutions"})]}),k.jsx("p",{className:"text-sm mb-4",children:"Innovation Meets Excellence."}),k.jsx("nav",{"aria-label":"Social media links",children:k.jsxs("ul",{className:"flex space-x-4",children:[k.jsx("li",{children:k.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our LinkedIn profile",children:k.jsx(l,{className:"w-5 h-5 hover:text-white cursor-pointer","aria-hidden":"true"})})}),k.jsx("li",{children:k.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Instagram profile",children:k.jsx(c,{className:"w-5 h-5 hover:text-white cursor-pointer","aria-hidden":"true"})})}),k.jsx("li",{children:k.jsx("a",{href:t,className:"hover:text-white",target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Instagram profile",children:k.jsx("img",{src:"/assets/tiktok-CpNpErwL.png",alt:"Tiktok",className:"w-6 h-6   cursor-pointer","aria-hidden":"true"})})}),k.jsx("li",{children:k.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our WhatsApp profile",children:k.jsx("img",{src:"/assets/whatsapp-BtCgz4Tn.png",alt:"WhatsApp",className:"w-6 h-6   cursor-pointer","aria-hidden":"true"})})})]})})]}),k.jsxs("nav",{"aria-labelledby":"quick-links",children:[k.jsx("h2",{id:"quick-links",className:"text-quinary font-bold text-lg mb-4",children:"Quick Links"}),k.jsxs("ul",{className:"space-y-2",children:[k.jsx("li",{children:k.jsx(St,{to:"about",className:"hover:text-white transition-colors",children:"About Us"})}),k.jsx("li",{children:k.jsx(St,{to:"online-services",className:"hover:text-white transition-colors",children:"Services"})})]})]}),k.jsxs("nav",{"aria-labelledby":"support-links",children:[k.jsx("h2",{id:"support-links",className:"text-quinary font-bold text-lg mb-4",children:"Support"}),k.jsx("ul",{className:"space-y-2",children:k.jsx("li",{children:k.jsx(St,{to:"https://wa.me/254796591251",className:"hover:text-white transition-colors",children:"Help Center"})})})]}),k.jsxs("section",{"aria-labelledby":"contact-info",children:[k.jsx("h2",{id:"contact-info",className:"text-quinary font-bold text-lg mb-4",children:"Contact Us"}),k.jsxs("address",{className:"space-y-4 not-italic",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(u,{className:"w-5 h-5","aria-hidden":"true"}),k.jsx("a",{href:"mailto:alphatech1798@gmail.com",className:"hover:text-quinary hover:underline transition-colors",children:"alphatech1798@gmail.com"})]}),k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(h,{className:"w-5 h-5","aria-hidden":"true"}),k.jsx("a",{href:"tel:+254796591251",className:"hover:text-quinary transition-colors",children:"+254 79659-1251"})]}),k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(d,{className:"w-5 h-5","aria-hidden":"true"}),k.jsxs("p",{children:["Ngong Town",k.jsx("br",{}),"Kajiado, Kenya"]})]})]})]})]}),k.jsx("div",{className:"border-t border-gray-800 mt-1  pt-2 text-sm text-center",children:k.jsxs("small",{children:["© ",(new Date).getFullYear()," SparkTech Solutions. All rights reserved."]})})]})})};function At(){return k.jsx("main",{className:"min-h-screen w-full py-16 bg-white",children:k.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsx("header",{children:k.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Client Testimonials"})}),k.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6","aria-label":"testimonials",children:[{author:"John Doe",company:"Tech Solutions Ltd",category:"Satisfied Customers",text:"The team at SPARK TECH exceeded our expectations with their web development skills. They truly brought our vision to life."},{author:"Jane Smith",company:"E-Commerce Plus",category:"Client Feedback",text:"SPARK Tech's e-commerce solutions transformed the way we do business online. We saw a significant increase in sales and customer engagement."},{author:"Mike Johnson",company:"Mobile Innovations",category:"Customer Reviews",text:"Our mobile app developed by SPARK TECH has been well-received by users. It's intuitive, user-friendly, and has boosted our brand visibility."}].map(((e,t)=>k.jsx("article",{className:"bg-quaternary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("blockquote",{className:"p-6",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:e.category}),k.jsx("p",{className:"text-primary text-lg leading-relaxed",children:e.text}),k.jsx("footer",{className:"mt-4 text-sm text-gray-600",children:k.jsxs("cite",{children:[k.jsx("span",{className:"font-medium",children:e.author}),k.jsx("span",{className:"block",children:e.company})]})})]})},t)))})]})})}function jt(){return k.jsx("main",{className:"py-10 bg-gray-100",children:k.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("header",{className:"mb-12",children:[k.jsx("h1",{className:"text-4xl text-center font-bold mb-4",children:"Our Services"}),k.jsx("p",{className:"text-gray-600 text-center text-lg mb-6",children:"Choose the perfect solution for your business"})]}),k.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8","aria-label":"services-list",children:[k.jsx("article",{className:"bg-quinary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsx("header",{children:k.jsx("h2",{className:"text-2xl text-primary font-bold mb-6",children:"Custom Web Design & Development"})}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:"text-secondary mb-4 leading-relaxed",children:"Professional, responsive websites tailored to your business needs. Includes:"}),k.jsxs("ul",{className:"text-secondary mb-8 space-y-2",children:[k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Custom Design & Development"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Responsive Mobile Design"})]})]}),k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Starting from"}),k.jsx("span",{className:"text-lg font-semibold",children:"KSH"}),k.jsx("span",{className:"text-4xl font-bold",children:"9,000"})]})]}),k.jsxs("footer",{className:"flex flex-col gap-3",children:[k.jsx(St,{to:"/website-pricing",className:"w-full bg-primary text-white py-3 rounded-full hover:bg-green-500 transition duration-300 flex items-center justify-center space-x-2",children:"View Pricing Plans"}),k.jsxs("a",{href:`https://wa.me/254796591251?text=${encodeURIComponent("Hello, I'm interested in your Custom Web Design & Development services. Can we discuss more details about pricing and features?")}`,target:"_blank",rel:"noopener noreferrer",className:"w-full border-2 hover:bg-green-500 border-primary text-primary py-3 rounded-full hover:bg-primary/10 transition duration-300 flex items-center justify-center space-x-2","aria-label":"Chat on WhatsApp about Custom Web Design & Development",children:[k.jsx("span",{children:"Discuss Project"}),k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"})})]})]})]})}),k.jsx("article",{className:"bg-quinary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsx("header",{children:k.jsx("h2",{className:"text-2xl text-primary font-bold mb-6",children:"Advanced Digital Marketing Class"})}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:"text-secondary mb-4 leading-relaxed",children:"Master modern digital marketing strategies and tools to grow your business online. Comprehensive training suitable for beginners and marketing professionals."}),k.jsxs("ul",{className:"text-secondary mb-8 space-y-2",children:[k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Social Media Marketing"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Email Marketing Strategies"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Content Marketing "})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Analytics & Performance Tracking"})]})]}),k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Course Fee"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("span",{className:"text-lg font-semibold",children:"KSH "}),k.jsx("span",{className:"text-4xl font-bold",children:"2,000"})]}),k.jsx("p",{className:"text-sm text-primary font-medium",children:"Flexible learning schedule"})]})]}),k.jsx("footer",{className:"flex flex-col gap-3",children:k.jsx(St,{to:"/dashboard",className:"w-full bg-primary text-white py-3 rounded-full hover:bg-green-500 transition duration-300 flex items-center justify-center space-x-2",children:k.jsx("span",{children:"Get Started"})})})]})}),k.jsx("article",{className:"bg-quinary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsx("header",{children:k.jsx("h2",{className:"text-2xl text-primary font-bold mb-6",children:"Professional Poster & Flyer Design"})}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:"text-secondary mb-4 leading-relaxed",children:"Eye-catching, professional designs that help your business stand out. Perfect for events, promotions, and marketing campaigns."}),k.jsxs("ul",{className:"text-secondary mb-8 space-y-2",children:[k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Custom Design Creation"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"High-Resolution Files"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Print-Ready Formats"})]})]}),k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Starting from"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("span",{className:"text-lg font-semibold",children:"KSH"}),k.jsx("span",{className:"text-4xl font-bold",children:"500"})]})]})]}),k.jsx("footer",{children:k.jsxs("a",{href:`https://wa.me/254796591251?text=${encodeURIComponent("Hello, I need a professional poster/flyer design for my business. Can we discuss the details?")}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-primary text-white py-3 rounded-full hover:bg-green-500 transition duration-300 flex items-center justify-center space-x-2","aria-label":"Start designing on WhatsApp",children:[k.jsx("span",{children:"Start Designing"}),k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"})})]})})]})}),k.jsx("article",{className:"bg-quinary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsx("header",{children:k.jsx("h2",{className:"text-2xl text-primary font-bold mb-6",children:"SEO Implementation & Optimization"})}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:"text-secondary mb-4 leading-relaxed",children:"Boost your website's visibility and attract more organic traffic with our comprehensive SEO services. Get higher rankings on Google and other search engines."}),k.jsxs("ul",{className:"text-secondary mb-8 space-y-2",children:[k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Keyword Research & Analysis"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"On-Page SEO Optimization"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Technical SEO Implementation"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Performance Optimization"})]})]}),k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Starting from"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("span",{className:"text-lg font-semibold",children:"KSH"}),k.jsx("span",{className:"text-4xl font-bold",children:"2,500"})]}),k.jsx("p",{className:"text-sm text-primary font-medium",children:"One-time optimization with lasting results"})]})]}),k.jsx("footer",{className:"flex flex-col gap-3",children:k.jsxs("a",{href:`https://wa.me/254796591251?text=${encodeURIComponent("Hello, I'm interested in your SEO Implementation service. I'd like to improve my website's search engine rankings. Can we discuss how you can help?")}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-primary hover:bg-green-500 text-white py-3 rounded-full  transition duration-300 flex items-center justify-center space-x-2","aria-label":"Get SEO Consultation on WhatsApp",children:[k.jsx("span",{children:"Schedule Consultation"}),k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"})})]})})]})}),k.jsx("article",{className:"bg-quinary p-8 rounded-lg hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsx("header",{children:k.jsx("h2",{className:"text-2xl text-primary font-bold mb-6",children:"Web Design and Development Classes"})}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:"text-secondary mb-4 leading-relaxed",children:"Master the art of web development with our comprehensive hands-on training. Perfect for beginners and intermediate developers looking to enhance their skills."}),k.jsxs("ul",{className:"text-secondary mb-8 space-y-2",children:[k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"HTML5, CSS3 & JavaScript Fundamentals"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"React.js & Modern Web Development"})]}),k.jsxs("li",{className:"flex items-center space-x-2",children:[k.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Responsive Design Principles"})]})]}),k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Flexible Learning Options"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("span",{className:"text-lg font-semibold",children:"KSH"}),k.jsx("span",{className:"text-4xl font-bold",children:"300"}),k.jsx("span",{className:"text-sm text-gray-600",children:"/hour"})]}),k.jsx("p",{className:"text-sm text-primary font-semibold",children:"One-on-one mentoring available"})]})]}),k.jsx("footer",{className:"flex flex-col gap-3",children:k.jsxs("a",{href:`https://wa.me/254796591251?text=${encodeURIComponent("Hello, I'm interested in your Web Development and Design Classes. I'd like to know more about the schedule and curriculum.")}`,target:"_blank",rel:"noopener noreferrer",className:"w-full border-2 border-primary text-primary py-3 rounded-full hover:bg-green-500 transition duration-300 flex items-center justify-center space-x-2","aria-label":"Inquire about Web Development Classes",children:[k.jsx("span",{children:"Schedule "}),k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"})})]})})]})})]})]})})}function Pt(){return k.jsxs("main",{className:"flex flex-col",children:[k.jsx("section",{className:"w-full min-h-screen pt-20 bg-gradient-to-r from-quaternary to-quinary","aria-label":"hero section",children:k.jsx("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between py-12 lg:py-20",children:[k.jsxs("article",{className:"w-full lg:w-1/2 text-primary space-y-8 -mt-28 mb-8 lg:mb-0",children:[k.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold leading-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Transform Your Digital Presence"}),k.jsxs("div",{className:"space-y-6",children:[k.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Welcome to SparkTech Solutions - Your One-Stop Digital Excellence Hub in Kenya. We transform ideas into powerful digital solutions."}),k.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-base md:text-lg",children:[k.jsxs("li",{className:"flex items-start space-x-2",children:[k.jsx("svg",{className:"w-6 h-6 text-primary mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Custom Web Design & Development"})]}),k.jsxs("li",{className:"flex items-start space-x-2",children:[k.jsx("svg",{className:"w-6 h-6 text-primary mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Web Application Development"})]}),k.jsxs("li",{className:"flex items-start space-x-2",children:[k.jsx("svg",{className:"w-6 h-6 text-primary mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"Digital Marketing Solutions"})]}),k.jsxs("li",{className:"flex items-start space-x-2",children:[k.jsx("svg",{className:"w-6 h-6 text-primary mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),k.jsx("span",{children:"SEO Implementation"})]})]}),k.jsxs("div",{className:"pt-4",children:[k.jsx("p",{className:"text-lg md:text-xl font-medium",children:"🎓 Learn with Us: Professional Web Development & Digital Marketing Classes"}),k.jsx("p",{className:"text-base md:text-lg mt-2 text-gray-700",children:"Join our expert-led courses and master the skills needed in today's digital world."})]}),k.jsx("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:k.jsx(St,{to:"/online-services",className:"px-8 py-3 bg-primary text-white rounded-full hover:bg-primary/90 transition-colors text-center font-medium",children:"Explore Services"})})]})]}),k.jsx("aside",{className:"w-full lg:w-1/2 flex h-[500px] md:-mt-20 justify-center lg:justify-end","aria-labelledby":"welcome-heading",children:k.jsx("div",{className:"bg-primary p-1 rounded-xl shadow-xl max-w-md w-full",children:k.jsx("section",{className:"bg-white rounded-lg p-8 h-full",children:k.jsxs("div",{className:"text-center space-y-6",children:[k.jsx("span",{className:"text-5xl mb-4 inline-block animate-bounce",role:"img","aria-label":"welcome emoji",children:"👋"}),k.jsxs("div",{className:"space-y-4 welcome-text-container",children:[k.jsx("h2",{id:"welcome-heading",className:"text-4xl font-bold animate-bounce-text text-gradient-primary",children:"Welcome"}),k.jsx("p",{className:"text-4xl font-bold animate-slide-text text-gradient-secondary",children:"To"}),k.jsx("div",{className:"animate-dance",children:k.jsx("h3",{className:"text-4xl font-bricksons font-bold bg-gradient-to-r from-blue-600 to-purple-600 text-transparent bg-clip-text",children:"SPARK"})}),k.jsx("div",{className:"animate-float",children:k.jsx("h3",{className:"text-4xl font-bisdak font-bold bg-gradient-to-r from-purple-600 to-pink-600 text-transparent bg-clip-text",children:"TECH"})})]}),k.jsxs("div",{className:"flex justify-center items-center gap-4 pt-4 animate-pulse",children:[k.jsx(c,{className:"w-6 h-6 text-pink-600","aria-hidden":"true"}),k.jsx("a",{href:"https://instagram.com/spark_techsolutions",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-pink-600 transition-colors font-medium","aria-label":"Follow us on Instagram @spark_techsolutions",children:"@spark_techsolutions"})]})]})})})})]})})}),k.jsx(jt,{}),k.jsx(At,{}),k.jsx(R,{}),k.jsx(K,{})]})}function Rt(){const[e,t]=a.useState(!1),n=Me(),s=["Dashboard","Online services","Demo sites","About","Contact Us","Website Pricing"],r=e=>"Home"===e?"/"===n.pathname:n.pathname==="/"+e.toLowerCase().replace(" ","-");return k.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg",children:k.jsxs("nav",{className:"max-w-7xl mx-auto",role:"navigation","aria-label":"Main navigation",children:[k.jsxs("div",{className:"flex flex-col items-center justify-between p-4",children:[k.jsxs(St,{to:"/",className:"flex items-center space-x-2 mb-4 md:mb-2","aria-label":"Spark Tech Home",children:[k.jsx("div",{className:"","aria-hidden":"true",children:k.jsx("img",{src:It,alt:"ST",className:"h-10 w-10"})}),k.jsxs("div",{children:[k.jsxs("div",{className:"text-xl font-bold text-secondary",children:["SPARK",k.jsx("span",{className:"text-primary",children:"TECH"})]}),k.jsx("div",{className:"text-lg text-primary",children:"Solutions"})]})]}),k.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[k.jsxs(St,{to:"/",className:"relative px-4 py-2 text-gray-600 transition-colors duration-300\n                            hover:text-blue-500 group "+(r("")?"text-blue-500":""),"aria-current":r("")?"page":void 0,children:["Home",k.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-blue-500 transform origin-left \n                                transition-transform duration-300 ease-out\n                                ${r("")?"scale-x-100":"scale-x-0"} \n                                group-hover:scale-x-100`})]}),s.map((e=>k.jsxs(St,{to:`/${e.toLowerCase().replace(" ","-")}`,className:"relative px-4 py-2 text-gray-600 transition-colors duration-300\n                                    hover:text-blue-500 group "+(r(e)?"text-blue-500":""),"aria-current":r(e)?"page":void 0,children:[e,k.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-blue-500 transform origin-left \n                                    transition-transform duration-300 ease-out\n                                    ${r(e)?"scale-x-100":"scale-x-0"} \n                                    group-hover:scale-x-100`})]},e)))]}),k.jsx("button",{className:"md:hidden absolute left-4 p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>t(!e),"aria-expanded":e,"aria-label":"Toggle navigation menu",children:e?k.jsx(p,{className:"h-6 w-6 text-gray-600","aria-hidden":"true"}):k.jsx(m,{className:"h-6 w-6 text-gray-600","aria-hidden":"true"})})]}),k.jsx("div",{className:"md:hidden overflow-hidden transition-all duration-300 ease-in-out\n                        "+(e?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:k.jsxs("div",{className:"bg-gray-50 p-4",children:[k.jsx(St,{to:"/",className:"block py-2 px-4 rounded-lg transition-all duration-300\n                "+("/"===n.pathname?"text-blue-500 bg-blue-50 transform translate-x-2":"text-gray-600 hover:text-blue-500 hover:bg-gray-100"),onClick:()=>t(!1),"aria-current":"/"===n.pathname?"page":void 0,children:"Home"}),s.map((e=>k.jsx(St,{to:`/${e.toLowerCase().replace(" ","-")}`,className:"block py-2 px-4 rounded-lg transition-all duration-300\n                                    "+(r(e)?"text-blue-500 bg-blue-50 transform translate-x-2":"text-gray-600 hover:text-blue-500 hover:bg-gray-100"),onClick:()=>t(!1),"aria-current":r(e)?"page":void 0,children:e},e)))]})})]})})}const Dt=[{id:1,title:"Starter",price:"KSH: 9,000",level:"Personal/Business",features:["up to 5 pages","free logo","2 free revision","Search engine optimization(SEO)"],bgColor:"bg-tertiary",text1:"text-primary"},{id:2,title:"Popular",price:"KSH:14,000",level:"Personal/Business",features:[" up to 10 pages","site chat","social media integration","links to other websites","Basic website automation","Search engine optimization(SEO)"],bgColor:"bg-secondary",text1:"text-quaternary"},{id:3,title:"Premium",price:"KSH: 21,000",level:"E-commerce",features:[" Up to 20 pages"," Free logo","Site chat"," Members page"," Sell online","search engine optimization (SEO)"," Accept online payment's"," Google analytics"," Incorporate software eg maps","24/7 customer care services"],bgColor:"bg-primary",text1:"text-tertiary"}],Lt=()=>k.jsx("main",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-16",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsx("header",{className:"mb-12",children:k.jsx("h1",{className:"text-3xl font-bold text-center bg-gradient-to-r from-primary to-indigo-600 bg-clip-text text-transparent",children:"Website Pricing Plans"})}),k.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8","aria-label":"pricing-plans",children:Dt.map((e=>k.jsxs("article",{className:`${e.bgColor} p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300`,children:[k.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[k.jsxs("header",{children:[k.jsx("h2",{className:"text-primary text-3xl font-semibold text-center mb-6",children:e.title}),k.jsxs("p",{className:"text-center text-xl text-secondary mb-6",children:[k.jsx("span",{className:"sr-only",children:"Plan type: "}),e.level]}),k.jsxs("p",{className:"text-center text-primary text-3xl font-bold mb-16",children:[k.jsx("span",{className:"sr-only",children:"Price: "}),e.price]})]}),k.jsx("div",{className:"text-center mb-6",children:k.jsx("a",{href:`https://wa.me/254796591251?text=${encodeURIComponent(`Hello, I'm interested in the ${e.title} plan. Can we discuss more details?`)}`,target:"_blank",rel:"noopener noreferrer",className:"bg-primary text-white px-4 py-2 rounded-full hover:bg-secondary transition-colors duration-300 inline-flex items-center space-x-2","aria-label":`Choose ${e.title} plan`,children:k.jsx("span",{children:"Choose Plan"})})})]}),k.jsxs("section",{className:`p-4 rounded-lg ${e.text1}`,"aria-label":`${e.title} plan features`,children:[k.jsx("h3",{className:"text-xl mb-2 text-center underline",children:"Features"}),k.jsx("ul",{role:"list",className:"space-y-2",children:e.features.map(((t,n)=>k.jsxs("li",{className:"flex items-center mb-2",role:"listitem",children:[k.jsx("svg",{className:`w-4 h-4 ${e.text1} mr-2`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),t]},n)))})]})]},e.id)))})]})}),Ot=a.createContext({});function Mt(e){const t=a.useRef(null);return null===t.current&&(t.current=e()),t.current}const Vt=a.createContext(null),Ut=a.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Ft extends a.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Bt({children:e,isPresent:t,anchorX:n}){const s=a.useId(),r=a.useRef(null),i=a.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=a.useContext(Ut);return a.useInsertionEffect((()=>{const{width:e,height:a,top:l,left:c,right:u}=i.current;if(t||!r.current||!e||!a)return;const h="left"===n?`left: ${c}`:`right: ${u}`;r.current.dataset.motionPopId=s;const d=document.createElement("style");return o&&(d.nonce=o),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${a}px !important;\n            ${h}px !important;\n            top: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(d)}}),[t]),k.jsx(Ft,{isPresent:t,childRef:r,sizeRef:i,children:a.cloneElement(e,{ref:r})})}const $t=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o,anchorX:l})=>{const c=Mt(qt),u=a.useId(),h=a.useCallback((e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()}),[c,s]),d=a.useMemo((()=>({id:u,initial:t,isPresent:n,custom:r,onExitComplete:h,register:e=>(c.set(e,!1),()=>c.delete(e))})),i?[Math.random(),h]:[n,h]);return a.useMemo((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[n]),a.useEffect((()=>{!n&&!c.size&&s&&s()}),[n]),"popLayout"===o&&(e=k.jsx(Bt,{isPresent:n,anchorX:l,children:e})),k.jsx(Vt.Provider,{value:d,children:e})};function qt(){return new Map}function zt(e=!0){const t=a.useContext(Vt);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=t,i=a.useId();a.useEffect((()=>{e&&r(i)}),[e]);const o=a.useCallback((()=>e&&s&&s(i)),[i,s,e]);return!n&&s?[!1,o]:[!0]}const Ht=e=>e.key||"";function Wt(e){const t=[];return a.Children.forEach(e,(e=>{a.isValidElement(e)&&t.push(e)})),t}const Kt="undefined"!=typeof window,Gt=Kt?a.useLayoutEffect:a.useEffect,Qt=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,u]=zt(o),h=a.useMemo((()=>Wt(e)),[e]),d=o&&!c?[]:h.map(Ht),p=a.useRef(!0),m=a.useRef(h),f=Mt((()=>new Map)),[g,y]=a.useState(h),[v,w]=a.useState(h);Gt((()=>{p.current=!1,m.current=h;for(let e=0;e<v.length;e++){const t=Ht(v[e]);d.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}}),[v,d.length,d.join("-")]);const x=[];if(h!==g){let e=[...h];for(let t=0;t<v.length;t++){const n=v[t],s=Ht(n);d.includes(s)||(e.splice(t,0,n),x.push(n))}return"wait"===i&&x.length&&(e=x),w(Wt(e)),y(h),null}const{forceRender:b}=a.useContext(Ot);return k.jsx(k.Fragment,{children:v.map((e=>{const a=Ht(e),g=!(o&&!c)&&(h===v||d.includes(a));return k.jsx($t,{isPresent:g,initial:!(p.current&&!n)&&void 0,custom:t,presenceAffectsLayout:r,mode:i,onExitComplete:g?void 0:()=>{if(!f.has(a))return;f.set(a,!0);let e=!0;f.forEach((t=>{t||(e=!1)})),e&&(null==b||b(),w(m.current),o&&(null==u||u()),s&&s())},anchorX:l,children:e},a)}))})},Yt=e=>e;let Xt=Yt;function Jt(e){let t;return()=>(void 0===t&&(t=e()),t)}const Zt=(e,t,n)=>{const s=t-e;return 0===s?1:(n-e)/s},en=e=>1e3*e,tn=e=>e/1e3,nn=!1,sn=["read","resolveKeyframes","update","preRender","render","postRender"];function rn(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=sn.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,s=!1,r=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(t){i.has(t)&&(l.schedule(t),e()),t(o)}const l={schedule:(e,r=!1,o=!1)=>{const a=o&&s?t:n;return r&&i.add(e),a.has(e)||a.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{o=e,s?r=!0:(s=!0,[t,n]=[n,t],t.forEach(a),t.clear(),s=!1,r&&(r=!1,l.process(e)))}};return l}(i),e)),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:d}=o,p=()=>{const i=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(i-r.timestamp,40),1),r.timestamp=i,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),h.process(r),d.process(r),r.isProcessing=!1,n&&t&&(s=!1,e(p))};return{schedule:sn.reduce(((t,i)=>{const a=o[i];return t[i]=(t,i=!1,o=!1)=>(n||(n=!0,s=!0,r.isProcessing||e(p)),a.schedule(t,i,o)),t}),{}),cancel:e=>{for(let t=0;t<sn.length;t++)o[sn[t]].cancel(e)},state:r,steps:o}}const{schedule:on,cancel:an,state:ln,steps:cn}=rn("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Yt,!0),un=a.createContext({strict:!1}),hn={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dn={};for(const qE in hn)dn[qE]={isEnabled:e=>hn[qE].some((t=>!!e[t]))};const pn=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mn(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pn.has(e)}let fn=e=>!mn(e);try{(gn=require("@emotion/is-prop-valid").default)&&(fn=e=>e.startsWith("on")?!mn(e):gn(e))}catch($E){}var gn;function yn(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy(((...t)=>e(...t)),{get:(n,s)=>"create"===s?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const vn=a.createContext({});function wn(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function xn(e){return"string"==typeof e||Array.isArray(e)}const bn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Tn=["initial",...bn];function En(e){return wn(e.animate)||Tn.some((t=>xn(e[t])))}function Sn(e){return Boolean(En(e)||e.variants)}function _n(e){const{initial:t,animate:n}=function(e,t){if(En(e)){const{initial:t,animate:n}=e;return{initial:!1===t||xn(t)?t:void 0,animate:xn(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,a.useContext(vn));return a.useMemo((()=>({initial:t,animate:n})),[Cn(t),Cn(n)])}function Cn(e){return Array.isArray(e)?e.join(" "):e}const Nn=Symbol.for("motionComponentSymbol");function In(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function kn(e,t,n){return a.useCallback((s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&("function"==typeof n?n(s):In(n)&&(n.current=s))}),[t])}const An=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jn="data-"+An("framerAppearId"),{schedule:Pn,cancel:Rn}=rn(queueMicrotask,!1),Dn=a.createContext({});function Ln(e,t,n,s,r){var i,o;const{visualElement:l}=a.useContext(vn),c=a.useContext(un),u=a.useContext(Vt),h=a.useContext(Ut).reducedMotion,d=a.useRef(null);s=s||c.renderer,!d.current&&s&&(d.current=s(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:h}));const p=d.current,m=a.useContext(Dn);!p||p.projection||!r||"html"!==p.type&&"svg"!==p.type||function(e,t,n,s){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:On(e.parent)),e.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:Boolean(o)||a&&In(a),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:s,layoutScroll:l,layoutRoot:c})}(d.current,n,r,m);const f=a.useRef(!1);a.useInsertionEffect((()=>{p&&f.current&&p.update(n,u)}));const g=n[jn],y=a.useRef(Boolean(g)&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,g))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,g)));return Gt((()=>{p&&(f.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Pn.render(p.render),y.current&&p.animationState&&p.animationState.animateChanges())})),a.useEffect((()=>{p&&(!y.current&&p.animationState&&p.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),y.current=!1))})),p}function On(e){if(e)return!1!==e.options.allowProjection?e.projection:On(e.parent)}function Mn({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){var i,o;function l(e,i){let o;const l={...a.useContext(Ut),...e,layoutId:Vn(e)},{isStatic:c}=l,u=_n(e),h=s(e,c);if(!c&&Kt){a.useContext(un).strict;const e=function(e){const{drag:t,layout:n}=dn;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);o=e.MeasureLayout,u.visualElement=Ln(r,h,l,t,e.ProjectionNode)}return k.jsxs(vn.Provider,{value:u,children:[o&&u.visualElement?k.jsx(o,{visualElement:u.visualElement,...l}):null,n(r,e,kn(h,u.visualElement,i),h,c,u.visualElement)]})}e&&function(e){for(const t in e)dn[t]={...dn[t],...e[t]}}(e),l.displayName=`motion.${"string"==typeof r?r:`create(${null!==(o=null!==(i=r.displayName)&&void 0!==i?i:r.name)&&void 0!==o?o:""})`}`;const c=a.forwardRef(l);return c[Nn]=r,c}function Vn({layoutId:e}){const t=a.useContext(Ot).id;return t&&void 0!==e?t+"-"+e:e}const Un=e=>t=>"string"==typeof t&&t.startsWith(e),Fn=Un("--"),Bn=Un("var(--"),$n=e=>!!Bn(e)&&qn.test(e.split("/*")[0].trim()),qn=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zn={};const Hn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wn=new Set(Hn);function Kn(e,{layout:t,layoutId:n}){return Wn.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!zn[e]||"opacity"===e)}const Gn=e=>Boolean(e&&e.getVelocity),Qn=(e,t)=>t&&"number"==typeof e?t.transform(e):e,Yn=(e,t,n)=>n>t?t:n<e?e:n,Xn={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Jn={...Xn,transform:e=>Yn(0,1,e)},Zn={...Xn,default:1},es=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),ts=es("deg"),ns=es("%"),ss=es("px"),rs=es("vh"),is=es("vw"),os={...ns,parse:e=>ns.parse(e)/100,transform:e=>ns.transform(100*e)},as={borderWidth:ss,borderTopWidth:ss,borderRightWidth:ss,borderBottomWidth:ss,borderLeftWidth:ss,borderRadius:ss,radius:ss,borderTopLeftRadius:ss,borderTopRightRadius:ss,borderBottomRightRadius:ss,borderBottomLeftRadius:ss,width:ss,maxWidth:ss,height:ss,maxHeight:ss,top:ss,right:ss,bottom:ss,left:ss,padding:ss,paddingTop:ss,paddingRight:ss,paddingBottom:ss,paddingLeft:ss,margin:ss,marginTop:ss,marginRight:ss,marginBottom:ss,marginLeft:ss,backgroundPositionX:ss,backgroundPositionY:ss},ls={rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:Zn,scaleX:Zn,scaleY:Zn,scaleZ:Zn,skew:ts,skewX:ts,skewY:ts,distance:ss,translateX:ss,translateY:ss,translateZ:ss,x:ss,y:ss,z:ss,perspective:ss,transformPerspective:ss,opacity:Jn,originX:os,originY:os,originZ:ss},cs={...Xn,transform:Math.round},us={...as,...ls,zIndex:cs,size:ss,fillOpacity:Jn,strokeOpacity:Jn,numOctaves:cs},hs={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ds=Hn.length;function ps(e,t,n){const{style:s,vars:r,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(Wn.has(l))o=!0;else if(Fn(l))r[l]=e;else{const t=Qn(e,us[l]);l.startsWith("origin")?(a=!0,i[l]=t):s[l]=t}}if(t.transform||(o||n?s.transform=function(e,t,n){let s="",r=!0;for(let i=0;i<ds;i++){const o=Hn[i],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=Qn(a,us[o]);l||(r=!1,s+=`${hs[o]||o}(${e}) `),n&&(t[o]=e)}}return s=s.trim(),n?s=n(t,r?"":s):r&&(s="none"),s}(t,e.transform,n):s.transform&&(s.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;s.transformOrigin=`${e} ${t} ${n}`}}const ms=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fs(e,t,n){for(const s in t)Gn(t[s])||Kn(s,n)||(e[s]=t[s])}function gs(e,t){const n={};return fs(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return a.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return ps(n,t,e),Object.assign({},n.vars,n.style)}),[t])}(e,t)),n}function ys(e,t){const n={},s=gs(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const vs=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ws(e){return"string"==typeof e&&!e.includes("-")&&!!(vs.indexOf(e)>-1||/[A-Z]/u.test(e))}const xs={offset:"stroke-dashoffset",array:"stroke-dasharray"},bs={offset:"strokeDashoffset",array:"strokeDasharray"};function Ts(e,t,n){return"string"==typeof e?e:ss.transform(t+n*e)}function Es(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(ps(e,c,h),u)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:p,dimensions:m}=e;d.transform&&(m&&(p.transform=d.transform),delete d.transform),m&&(void 0!==r||void 0!==i||p.transform)&&(p.transformOrigin=function(e,t,n){return`${Ts(t,e.x,e.width)} ${Ts(n,e.y,e.height)}`}(m,void 0!==r?r:.5,void 0!==i?i:.5)),void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==s&&(d.scale=s),void 0!==o&&function(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?xs:bs;e[i.offset]=ss.transform(-s);const o=ss.transform(t),a=ss.transform(n);e[i.array]=`${o} ${a}`}(d,o,a,l,!1)}const Ss=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),_s=e=>"string"==typeof e&&"svg"===e.toLowerCase();function Cs(e,t,n,s){const r=a.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Es(n,t,_s(s),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};fs(t,e.style,e),r.style={...t,...r.style}}return r}function Ns(e=!1){return(t,n,s,{latestValues:r},i)=>{const o=(ws(t)?Cs:ys)(n,r,i,t),l=function(e,t,n){const s={};for(const r in e)"values"===r&&"object"==typeof e.values||(fn(r)||!0===n&&mn(r)||!t&&!mn(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}(n,"string"==typeof t,e),c=t!==a.Fragment?{...l,...o,ref:s}:{},{children:u}=n,h=a.useMemo((()=>Gn(u)?u.get():u),[u]);return a.createElement(t,{...c,children:h})}}function Is(e){const t=[{},{}];return null==e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function ks(e,t,n,s){if("function"==typeof t){const[r,i]=Is(s);t=t(void 0!==n?n:e.custom,r,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[r,i]=Is(s);t=t(void 0!==n?n:e.custom,r,i)}return t}const As=e=>Array.isArray(e);function js(e){const t=Gn(e)?e.get():e;return n=t,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const Ps=e=>(t,n)=>{const s=a.useContext(vn),r=a.useContext(Vt),i=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,r,i){const o={latestValues:Rs(s,r,i,e),renderState:t()};return n&&(o.onMount=e=>n({props:s,current:e,...o}),o.onUpdate=e=>n(e)),o}(e,t,s,r);return n?i():Mt(i)};function Rs(e,t,n,s){const r={},i=s(e,{});for(const d in i)r[d]=js(i[d]);let{initial:o,animate:a}=e;const l=En(e),c=Sn(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const h=u?a:o;if(h&&"boolean"!=typeof h&&!wn(h)){const t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){const s=ks(e,t[n]);if(s){const{transitionEnd:e,transition:t,...n}=s;for(const s in n){let e=n[s];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(r[s]=e)}for(const s in e)r[s]=e[s]}}}return r}function Ds(e,t,n){var s;const{style:r}=e,i={};for(const o in r)(Gn(r[o])||t.style&&Gn(t.style[o])||Kn(o,e)||void 0!==(null===(s=null==n?void 0:n.getValue(o))||void 0===s?void 0:s.liveStyle))&&(i[o]=r[o]);return i}const Ls={useVisualState:Ps({scrapeMotionValuesFromProps:Ds,createRenderState:ms})};function Os(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(BE){t.dimensions={x:0,y:0,width:0,height:0}}}function Ms(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const Vs=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Us(e,t,n,s){Ms(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(Vs.has(r)?r:An(r),t.attrs[r])}function Fs(e,t,n){const s=Ds(e,t,n);for(const r in e)if(Gn(e[r])||Gn(t[r])){s[-1!==Hn.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return s}const Bs=["x","y","width","height","cx","cy","r"],$s={useVisualState:Ps({scrapeMotionValuesFromProps:Fs,createRenderState:Ss,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:r})=>{if(!n)return;let i=!!e.drag;if(!i)for(const a in r)if(Wn.has(a)){i=!0;break}if(!i)return;let o=!t;if(t)for(let a=0;a<Bs.length;a++){const n=Bs[a];e[n]!==t[n]&&(o=!0)}o&&on.read((()=>{Os(n,s),on.render((()=>{Es(s,r,_s(n.tagName),e.transformTemplate),Us(n,s)}))}))}})};function qs(e,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){return Mn({...ws(n)?$s:Ls,preloadedFeatures:e,useRender:Ns(s),createVisualElement:t,Component:n})}}function zs(e,t,n){const s=e.getProps();return ks(s,t,void 0!==n?n:s.custom,e)}const Hs=Jt((()=>void 0!==window.ScrollTimeline));class Ws{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>Hs()&&n.attachTimeline?n.attachTimeline(e):"function"==typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ks extends Ws{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Gs(e,t){return e?e[t]||e.default||e:void 0}const Qs=2e4;function Ys(e){let t=0;let n=e.next(t);for(;!n.done&&t<Qs;)t+=50,n=e.next(t);return t>=Qs?1/0:t}function Xs(e){return"function"==typeof e}function Js(e,t){e.timeline=t,e.onfinish=null}const Zs=e=>Array.isArray(e)&&"number"==typeof e[0],er={linearEasing:void 0};function tr(e,t){const n=Jt(e);return()=>{var e;return null!==(e=er[t])&&void 0!==e?e:n()}}const nr=tr((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(BE){return!1}return!0}),"linearEasing"),sr=(e,t,n=10)=>{let s="";const r=Math.max(Math.round(t/n),2);for(let i=0;i<r;i++)s+=e(Zt(0,r-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function rr(e){return Boolean("function"==typeof e&&nr()||!e||"string"==typeof e&&(e in or||nr())||Zs(e)||Array.isArray(e)&&e.every(rr))}const ir=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,or={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ir([0,.65,.55,1]),circOut:ir([.55,0,1,.45]),backIn:ir([.31,.01,.66,-.59]),backOut:ir([.33,1.53,.69,.99])};function ar(e,t){return e?"function"==typeof e&&nr()?sr(e,t):Zs(e)?ir(e):Array.isArray(e)?e.map((e=>ar(e,t)||or.easeOut)):or[e]:void 0}const lr={x:!1,y:!1};function cr(){return lr.x||lr.y}function ur(e,t){const n=function(e){if(e instanceof Element)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),s=new AbortController;return[n,{passive:!0,...t,signal:s.signal},()=>s.abort()]}function hr(e){return!("touch"===e.pointerType||cr())}const dr=(e,t)=>!!t&&(e===t||dr(e,t.parentElement)),pr=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,mr=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const fr=new WeakSet;function gr(e){return t=>{"Enter"===t.key&&e(t)}}function yr(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function vr(e){return pr(e)&&!cr()}function wr(e,t,n={}){const[s,r,i]=ur(e,n),o=e=>{const s=e.currentTarget;if(!vr(e)||fr.has(s))return;fr.add(s);const i=t(s,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),vr(e)&&fr.has(s)&&(fr.delete(s),"function"==typeof i&&i(e,{success:t}))},a=e=>{o(e,n.useGlobalTarget||dr(s,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,r),window.addEventListener("pointercancel",l,r)};return s.forEach((e=>{(function(e){return mr.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,r),e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const s=gr((()=>{if(fr.has(n))return;yr(n,"down");const e=gr((()=>{yr(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>yr(n,"cancel")),t)}));n.addEventListener("keydown",s,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",s)),t)})(e,r)),r)})),i}const xr=new Set(["width","height","top","left","right","bottom",...Hn]);let br;function Tr(){br=void 0}const Er={now:()=>(void 0===br&&Er.set(ln.isProcessing||nn?ln.timestamp:performance.now()),br),set:e=>{br=e,queueMicrotask(Tr)}};function Sr(e,t){-1===e.indexOf(t)&&e.push(t)}function _r(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Cr{constructor(){this.subscriptions=[]}add(e){return Sr(this.subscriptions,e),()=>_r(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const s=this.subscriptions[r];s&&s(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Nr(e,t){return t?e*(1e3/t):0}class Ir{constructor(e,t={}){this.version="12.4.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const n=Er.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Er.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Cr);const n=this.events[e].add(t);return"change"===e?()=>{n(),on.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Er.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Nr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kr(e,t){return new Ir(e,t)}function Ar(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,kr(n))}function jr(e,t){const n=e.getValue("willChange");if(s=n,Boolean(Gn(s)&&s.add))return n.add(t);var s}function Pr(e){return e.props[jn]}const Rr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Dr(e,t,n,s){if(e===t&&n===s)return Yt;const r=t=>function(e,t,n,s,r){let i,o,a=0;do{o=t+(n-t)/2,i=Rr(o,s,r)-e,i>0?n=o:t=o}while(Math.abs(i)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:Rr(r(e),t,s)}const Lr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Or=e=>t=>1-e(1-t),Mr=Dr(.33,1.53,.69,.99),Vr=Or(Mr),Ur=Lr(Vr),Fr=e=>(e*=2)<1?.5*Vr(e):.5*(2-Math.pow(2,-10*(e-1))),Br=e=>1-Math.sin(Math.acos(e)),$r=Or(Br),qr=Lr(Br),zr=e=>/^0[^.\s]+$/u.test(e);const Hr=e=>Math.round(1e5*e)/1e5,Wr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Kr=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gr=(e,t)=>n=>Boolean("string"==typeof n&&Kr.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Qr=(e,t,n)=>s=>{if("string"!=typeof s)return s;const[r,i,o,a]=s.match(Wr);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},Yr={...Xn,transform:e=>Math.round((e=>Yn(0,255,e))(e))},Xr={test:Gr("rgb","red"),parse:Qr("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Yr.transform(e)+", "+Yr.transform(t)+", "+Yr.transform(n)+", "+Hr(Jn.transform(s))+")"};const Jr={test:Gr("#"),parse:function(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}},transform:Xr.transform},Zr={test:Gr("hsl","hue"),parse:Qr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ns.transform(Hr(t))+", "+ns.transform(Hr(n))+", "+Hr(Jn.transform(s))+")"},ei={test:e=>Xr.test(e)||Jr.test(e)||Zr.test(e),parse:e=>Xr.test(e)?Xr.parse(e):Zr.test(e)?Zr.parse(e):Jr.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Xr.transform(e):Zr.transform(e)},ti=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const ni="number",si="color",ri=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ii(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const o=t.replace(ri,(e=>(ei.test(e)?(s.color.push(i),r.push(si),n.push(ei.parse(e))):e.startsWith("var(")?(s.var.push(i),r.push("var"),n.push(e)):(s.number.push(i),r.push(ni),n.push(parseFloat(e))),++i,"${}"))).split("${}");return{values:n,split:o,indexes:s,types:r}}function oi(e){return ii(e).values}function ai(e){const{split:t,types:n}=ii(e),s=t.length;return e=>{let r="";for(let i=0;i<s;i++)if(r+=t[i],void 0!==e[i]){const t=n[i];r+=t===ni?Hr(e[i]):t===si?ei.transform(e[i]):e[i]}return r}}const li=e=>"number"==typeof e?0:e;const ci={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(Wr))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(ti))||void 0===n?void 0:n.length)||0)>0},parse:oi,createTransformer:ai,getAnimatableNone:function(e){const t=oi(e);return ai(e)(t.map(li))}},ui=new Set(["brightness","contrast","saturate","opacity"]);function hi(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=n.match(Wr)||[];if(!s)return e;const r=n.replace(s,"");let i=ui.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const di=/\b([a-z-]*)\(.*?\)/gu,pi={...ci,getAnimatableNone:e=>{const t=e.match(di);return t?t.map(hi).join(" "):e}},mi={...us,color:ei,backgroundColor:ei,outlineColor:ei,fill:ei,stroke:ei,borderColor:ei,borderTopColor:ei,borderRightColor:ei,borderBottomColor:ei,borderLeftColor:ei,filter:pi,WebkitFilter:pi},fi=e=>mi[e];function gi(e,t){let n=fi(e);return n!==pi&&(n=ci),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yi=new Set(["auto","none","0"]);const vi=e=>e===Xn||e===ss,wi=(e,t)=>parseFloat(e.split(", ")[t]),xi=(e,t)=>(n,{transform:s})=>{if("none"===s||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return wi(r[1],t);{const t=s.match(/^matrix\((.+)\)$/u);return t?wi(t[1],e):0}},bi=new Set(["x","y","z"]),Ti=Hn.filter((e=>!bi.has(e)));const Ei={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:xi(4,13),y:xi(5,14)};Ei.translateX=Ei.x,Ei.translateY=Ei.y;const Si=new Set;let _i=!1,Ci=!1;function Ni(){if(Ci){const e=Array.from(Si).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Ti.forEach((n=>{const s=e.getValue(n);void 0!==s&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((([t,n])=>{var s;null===(s=e.getValue(t))||void 0===s||s.set(n)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Ci=!1,_i=!1,Si.forEach((e=>e.complete())),Si.clear()}function Ii(){Si.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Ci=!0)}))}class ki{constructor(e,t,n,s,r,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Si.add(this),_i||(_i=!0,on.read(Ii),on.resolveKeyframes(Ni))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null==s?void 0:s.get(),i=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const s=n.readValue(t,i);null!=s&&(e[0]=s)}void 0===e[0]&&(e[0]=i),s&&void 0===r&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Si.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Si.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ai=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),ji=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Pi(e,t,n=1){const[s,r]=function(e){const t=ji.exec(e);if(!t)return[,];const[,n,s,r]=t;return[`--${null!=n?n:s}`,r]}(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const e=i.trim();return Ai(e)?parseFloat(e):e}return $n(r)?Pi(r,t,n+1):r}const Ri=e=>t=>t.test(e),Di=[Xn,ss,ns,ts,is,rs,{test:e=>"auto"===e,parse:e=>e}],Li=e=>Di.find(Ri(e));class Oi extends ki{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"==typeof n&&(n=n.trim(),$n(n))){const s=Pi(n,t.current);void 0!==s&&(e[a]=s),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!xr.has(n)||2!==e.length)return;const[s,r]=e,i=Li(s),o=Li(r);if(i!==o)if(vi(i)&&vi(o))for(let a=0;a<e.length;a++){const t=e[a];"string"==typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)("number"==typeof(s=e[r])?0===s:null===s||"none"===s||"0"===s||zr(s))&&n.push(r);var s;n.length&&function(e,t,n){let s,r=0;for(;r<e.length&&!s;){const t=e[r];"string"==typeof t&&!yi.has(t)&&ii(t).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=gi(n,s)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ei[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=Ei[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((([e,n])=>{t.getValue(e).set(n)})),this.resolveNoneKeyframes()}}const Mi=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!ci.test(e)&&"0"!==e||e.startsWith("url(")));const Vi=e=>null!==e;function Ui(e,{repeat:t,repeatType:n="loop"},s){const r=e.filter(Vi),i=t&&"loop"!==n&&t%2==1?0:r.length-1;return i&&void 0!==s?s:r[i]}class Fi{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Er.now(),this.options={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:r,repeatType:i,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Ii(),Ni()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Er.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:r,delay:i,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!function(e,t,n,s){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],o=Mi(r,t),a=Mi(i,t);return!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Xs(n))&&s)}(e,n,s,r)){if(!i)return a&&a(Ui(e,this.options,t)),o&&o(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const Bi=(e,t,n)=>e+(t-e)*n;function $i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function qi(e,t){return n=>n>0?t:e}const zi=(e,t,n)=>{const s=e*e,r=n*(t*t-s)+s;return r<0?0:Math.sqrt(r)},Hi=[Jr,Xr,Zr];function Wi(e){const t=(n=e,Hi.find((e=>e.test(n))));var n;if(!Boolean(t))return!1;let s=t.parse(e);return t===Zr&&(s=function({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,n/=100;let r=0,i=0,o=0;if(t/=100){const s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;r=$i(a,s,e+1/3),i=$i(a,s,e),o=$i(a,s,e-1/3)}else r=i=o=n;return{red:Math.round(255*r),green:Math.round(255*i),blue:Math.round(255*o),alpha:s}}(s)),s}const Ki=(e,t)=>{const n=Wi(e),s=Wi(t);if(!n||!s)return qi(e,t);const r={...n};return e=>(r.red=zi(n.red,s.red,e),r.green=zi(n.green,s.green,e),r.blue=zi(n.blue,s.blue,e),r.alpha=Bi(n.alpha,s.alpha,e),Xr.transform(r))},Gi=(e,t)=>n=>t(e(n)),Qi=(...e)=>e.reduce(Gi),Yi=new Set(["none","hidden"]);function Xi(e,t){return n=>Bi(e,t,n)}function Ji(e){return"number"==typeof e?Xi:"string"==typeof e?$n(e)?qi:ei.test(e)?Ki:to:Array.isArray(e)?Zi:"object"==typeof e?ei.test(e)?Ki:eo:qi}function Zi(e,t){const n=[...e],s=n.length,r=e.map(((e,n)=>Ji(e)(e,t[n])));return e=>{for(let t=0;t<s;t++)n[t]=r[t](e);return n}}function eo(e,t){const n={...e,...t},s={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(s[r]=Ji(e[r])(e[r],t[r]));return e=>{for(const t in s)n[t]=s[t](e);return n}}const to=(e,t)=>{const n=ci.createTransformer(t),s=ii(e),r=ii(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Yi.has(e)&&!r.values.length||Yi.has(t)&&!s.values.length?function(e,t){return Yi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Qi(Zi(function(e,t){var n;const s=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][r[o]],l=null!==(n=e.values[a])&&void 0!==n?n:0;s[i]=l,r[o]++}return s}(s,r),r.values),n):qi(e,t)};function no(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return Bi(e,t,n);return Ji(e)(e,t)}function so(e,t,n){const s=Math.max(t-5,0);return Nr(n-e(s),t-s)}const ro=100,io=10,oo=1,ao=0,lo=800,co=.3,uo=.3,ho={granular:.01,default:2},po={granular:.005,default:.5},mo=.01,fo=10,go=.05,yo=1;function vo({duration:e=lo,bounce:t=co,velocity:n=ao,mass:s=oo}){let r,i,o=1-t;o=Yn(go,yo,o),e=Yn(mo,fo,tn(e)),o<1?(r=t=>{const s=t*o,r=s*e;return.001-(s-n)/xo(t,o)*Math.exp(-r)},i=t=>{const s=t*o*e,i=s*n+n,a=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-s),c=xo(Math.pow(t,2),o);return(.001-r(t)>0?-1:1)*((i-a)*l)/c}):(r=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(n-t)));const a=function(e,t,n){let s=n;for(let r=1;r<wo;r++)s-=e(s)/t(s);return s}(r,i,5/e);if(e=en(e),isNaN(a))return{stiffness:ro,damping:io,duration:e};{const t=Math.pow(a,2)*s;return{stiffness:t,damping:2*o*Math.sqrt(s*t),duration:e}}}const wo=12;function xo(e,t){return e*Math.sqrt(1-t*t)}const bo=["duration","bounce"],To=["stiffness","damping","mass"];function Eo(e,t){return t.some((t=>void 0!==e[t]))}function So(e=uo,t=co){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:p}=function(e){let t={velocity:ao,stiffness:ro,damping:io,mass:oo,isResolvedFromDuration:!1,...e};if(!Eo(e,To)&&Eo(e,bo))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(1.2*n),r=s*s,i=2*Yn(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:oo,stiffness:r,damping:i}}else{const n=vo(e);t={...t,...n,mass:oo},t.isResolvedFromDuration=!0}return t}({...n,velocity:-tn(n.velocity||0)}),m=d||0,f=c/(2*Math.sqrt(l*u)),g=o-i,y=tn(Math.sqrt(l/u)),v=Math.abs(g)<5;let w;if(s||(s=v?ho.granular:ho.default),r||(r=v?po.granular:po.default),f<1){const e=xo(y,f);w=t=>{const n=Math.exp(-f*y*t);return o-n*((m+f*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)w=e=>o-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(f*f-1);w=t=>{const n=Math.exp(-f*y*t),s=Math.min(e*t,300);return o-n*((m+f*y*g)*Math.sinh(s)+e*g*Math.cosh(s))/e}}const x={calculatedDuration:p&&h||null,next:e=>{const t=w(e);if(p)a.done=e>=h;else{let n=0;f<1&&(n=0===e?en(m):so(w,e,t));const i=Math.abs(n)<=s,l=Math.abs(o-t)<=r;a.done=i&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(Ys(x),Qs),t=sr((t=>x.next(e*t).value),e,30);return e+"ms "+t}};return x}function _o({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],d={done:!1,value:h},p=e=>void 0===a?l:void 0===l||Math.abs(a-e)<Math.abs(l-e)?a:l;let m=n*t;const f=h+m,g=void 0===o?f:o(f);g!==f&&(m=g-h);const y=e=>-m*Math.exp(-e/s),v=e=>g+y(e),w=e=>{const t=y(e),n=v(e);d.done=Math.abs(t)<=c,d.value=d.done?g:n};let x,b;const T=e=>{var t;(t=d.value,void 0!==a&&t<a||void 0!==l&&t>l)&&(x=e,b=So({keyframes:[d.value,p(d.value)],velocity:so(v,e,d.value),damping:r,stiffness:i,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:e=>{let t=!1;return b||void 0!==x||(t=!0,w(e),T(e)),void 0!==x&&e>=x?b.next(e-x):(!t&&w(e),d)}}}const Co=Dr(.42,0,1,1),No=Dr(0,0,.58,1),Io=Dr(.42,0,.58,1),ko={linear:Yt,easeIn:Co,easeInOut:Io,easeOut:No,circIn:Br,circInOut:qr,circOut:$r,backIn:Vr,backInOut:Ur,backOut:Mr,anticipate:Fr},Ao=e=>{if(Zs(e)){Xt(4===e.length);const[t,n,s,r]=e;return Dr(t,n,s,r)}return"string"==typeof e?(Xt(void 0!==ko[e]),ko[e]):e};function jo(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(Xt(i===t.length),1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const s=[],r=n||no,i=e.length-1;for(let o=0;o<i;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||Yt:t;n=Qi(e,n)}s.push(n)}return s}(t,s,r),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(n<e[s+1]);s++);const r=Zt(e[s],e[s+1],n);return a[s](r)};return n?t=>c(Yn(e[0],e[i-1],t)):c}function Po(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=Zt(0,t,s);e.push(Bi(n,1,r))}}(t,e.length-1),t}function Ro({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=(e=>Array.isArray(e)&&"number"!=typeof e[0])(s)?s.map(Ao):Ao(s),i={done:!1,value:t[0]},o=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:Po(t),e),a=jo(o,t,{ease:Array.isArray(r)?r:(l=t,c=r,l.map((()=>c||Io)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=a(t),i.done=t>=e,i)}}const Do=e=>{const t=({timestamp:t})=>e(t);return{start:()=>on.update(t,!0),stop:()=>an(t),now:()=>ln.isProcessing?ln.timestamp:Er.now()}},Lo={decay:_o,inertia:_o,tween:Ro,keyframes:Ro,spring:So},Oo=e=>e/100;class Mo extends Fi{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:s,keyframes:r}=this.options,i=(null==s?void 0:s.KeyframeResolver)||ki;this.resolver=new i(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:i=0}=this.options,o=Xs(t)?t:Lo[t]||Ro;let a,l;o!==Ro&&"number"!=typeof e[0]&&(a=Qi(Oo,no(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});"mirror"===r&&(l=o({...this.options,keyframes:[...e].reverse(),velocity:-i})),null===c.calculatedDuration&&(c.calculatedDuration=Ys(c));const{calculatedDuration:u}=c,h=u+s;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:h,totalDuration:h*(n+1)-s}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:i,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return r.next(0);const{delay:h,repeat:d,repeatType:p,repeatDelay:m,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,w=r;if(d){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===p?(n=1-n,m&&(n-=m/u)):"mirror"===p&&(w=i)),v=Yn(0,1,n)*u}const x=y?{done:!1,value:a[0]}:w.next(v);o&&(x.value=o(x.value));let{done:b}=x;y||null===l||(b=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return T&&void 0!==s&&(x.value=Ui(a,this.options,s)),f&&f(x.value),T&&this.finish(),x}get duration(){const{resolved:e}=this;return e?tn(e.calculatedDuration):0}get time(){return tn(this.currentTime)}set time(e){e=en(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=tn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Do,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const s=this.driver.now();null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=s):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Vo=new Set(["opacity","clipPath","filter","transform"]);function Uo(e,t,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const u=ar(a,r);Array.isArray(u)&&(c.easing=u);return e.animate(c,{delay:s,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"})}const Fo=Jt((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Bo={anticipate:Fr,backInOut:Ur,circInOut:qr};class $o extends Fi{constructor(e){super(e);const{name:t,motionValue:n,element:s,keyframes:r}=this.options;this.resolver=new Oi(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:s,ease:r,type:i,motionValue:o,name:a,startTime:l}=this.options;if(!o.owner||!o.owner.current)return!1;var c;if("string"==typeof r&&nr()&&r in Bo&&(r=Bo[r]),Xs((c=this.options).type)||"spring"===c.type||!rr(c.ease)){const{onComplete:t,onUpdate:o,motionValue:a,element:l,...c}=this.options,u=function(e,t){const n=new Mo({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const r=[];let i=0;for(;!s.done&&i<2e4;)s=n.sample(i),r.push(s.value),i+=10;return{times:void 0,keyframes:r,duration:i-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),n=u.duration,s=u.times,r=u.ease,i="keyframes"}const u=Uo(o.owner.current,a,e,{...this.options,duration:n,times:s,ease:r});return u.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(Js(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;o.set(Ui(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:s,type:i,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return tn(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return tn(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=en(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Yt;const{animation:n}=t;Js(n,e)}else this.pendingTimeline=e;return Yt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:s,type:r,ease:i,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,u=new Mo({...c,keyframes:n,duration:s,type:r,ease:i,times:o,isGenerator:!0}),h=en(this.time);e.setWithVelocity(u.sample(h-10).value,u.sample(h).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:s,repeatType:r,damping:i,type:o}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return Fo()&&n&&Vo.has(n)&&!a&&!l&&!s&&"mirror"!==r&&0!==i&&"inertia"!==o}}const qo={type:"spring",stiffness:500,damping:25,restSpeed:10},zo={type:"keyframes",duration:.8},Ho={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wo=(e,{keyframes:t})=>t.length>2?zo:Wn.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:qo:Ho;const Ko=(e,t,n,s={},r,i)=>o=>{const a=Gs(s,e)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c-=en(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:r};(function({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(a)||(u={...u,...Wo(e,u)}),u.duration&&(u.duration=en(u.duration)),u.repeatDelay&&(u.repeatDelay=en(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(h=!0)),h&&!i&&void 0!==t.get()){const e=Ui(u.keyframes,a);if(void 0!==e)return on.update((()=>{u.onUpdate(e),u.onComplete()})),new Ks([])}return!i&&$o.supports(u)?new $o(u):new Mo(u)};function Go({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,s}function Qo(e,t,{delay:n=0,transitionOverride:s,type:r}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;s&&(o=s);const c=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const t=e.getValue(h,null!==(i=e.latestValues[h])&&void 0!==i?i:null),s=l[h];if(void 0===s||u&&Go(u,h))continue;const r={delay:n,...Gs(o||{},h)};let a=!1;if(window.MotionHandoffAnimation){const t=Pr(e);if(t){const e=window.MotionHandoffAnimation(t,h,on);null!==e&&(r.startTime=e,a=!0)}}jr(e,h),t.start(Ko(h,t,s,e.shouldReduceMotion&&xr.has(h)?{type:!1}:r,e,a));const d=t.animation;d&&c.push(d)}return a&&Promise.all(c).then((()=>{on.update((()=>{a&&function(e,t){const n=zs(e,t);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i)Ar(e,a,(o=i[a],As(o)?o[o.length-1]||0:o));var o}(e,a)}))})),c}function Yo(e,t,n={}){var s;const r=zs(e,t,"exit"===n.type?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Qo(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(s=0)=>{const{delayChildren:r=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t,n=0,s=0,r=1,i){const o=[],a=(e.variantChildren.size-1)*s,l=1===r?(e=0)=>e*s:(e=0)=>a-e*s;return Array.from(e.variantChildren).sort(Xo).forEach(((e,s)=>{e.notify("AnimationStart",t),o.push(Yo(e,t,{...i,delay:n+l(s)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(o)}(e,t,r+s,o,a,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then((()=>t()))}return Promise.all([o(),a(n.delay)])}function Xo(e,t){return e.sortNodePosition(t)}function Jo(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const Zo=Tn.length;function ea(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&ea(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Zo;n++){const s=Tn[n],r=e.props[s];(xn(r)||!1===r)&&(t[s]=r)}return t}const ta=[...bn].reverse(),na=bn.length;function sa(e){return t=>Promise.all(t.map((({animation:t,options:n})=>function(e,t,n={}){let s;if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>Yo(e,t,n)));s=Promise.all(r)}else if("string"==typeof t)s=Yo(e,t,n);else{const r="function"==typeof t?zs(e,t,n.custom):t;s=Promise.all(Qo(e,r,n))}return s.then((()=>{e.notify("AnimationComplete",t)}))}(e,t,n))))}function ra(e){let t=sa(e),n=aa(),s=!0;const r=t=>(n,s)=>{var r;const i=zs(e,s,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(i){const{transition:e,transitionEnd:t,...s}=i;n={...n,...s,...t}}return n};function i(i){const{props:o}=e,a=ea(e.parent)||{},l=[],c=new Set;let u={},h=1/0;for(let t=0;t<na;t++){const d=ta[t],p=n[d],m=void 0!==o[d]?o[d]:a[d],f=xn(m),g=d===i?p.isActive:null;!1===g&&(h=t);let y=m===a[d]&&m!==o[d]&&f;if(y&&s&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...u},!p.isActive&&null===g||!m&&!p.prevProp||wn(m)||"boolean"==typeof m)continue;const v=ia(p.prevProp,m);let w=v||d===i&&p.isActive&&!y&&f||t>h&&f,x=!1;const b=Array.isArray(m)?m:[m];let T=b.reduce(r(d),{});!1===g&&(T={});const{prevResolvedValues:E={}}=p,S={...E,...T},_=t=>{w=!0,c.has(t)&&(x=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=T[e],n=E[e];if(u.hasOwnProperty(e))continue;let s=!1;s=As(t)&&As(n)?!Jo(t,n):t!==n,s?null!=t?_(e):c.add(e):void 0!==t&&c.has(e)?_(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=T,p.isActive&&(u={...u,...T}),s&&e.blockInitialAnimation&&(w=!1);w&&(!(y&&v)||x)&&l.push(...b.map((e=>({animation:e,options:{type:d}}))))}if(c.size){const t={};if("boolean"!=typeof o.initial){const n=zs(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const s=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!=s?s:null})),l.push({animation:t})}let d=Boolean(l.length);return!s||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(d=!1),s=!1,d?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,s){var r;if(n[t].isActive===s)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,s)})),n[t].isActive=s;const o=i(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=aa(),s=!0}}}function ia(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Jo(t,e)}function oa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aa(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class la{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ca=0;const ua={animation:{Feature:class extends la{constructor(e){super(e),e.animationState||(e.animationState=ra(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wn(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends la{constructor(){super(...arguments),this.id=ca++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function ha(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function da(e){return{point:{x:e.pageX,y:e.pageY}}}function pa(e,t,n,s){return ha(e,t,(e=>t=>pr(t)&&e(t,da(t)))(n),s)}const ma=(e,t)=>Math.abs(e-t);class fa{constructor(e,t,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=va(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=ma(e.x,t.x),s=ma(e.y,t.y);return Math.sqrt(n**2+s**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:s}=e,{timestamp:r}=ln;this.history.push({...s,timestamp:r});const{onStart:i,onMove:o}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ga(t,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=va("pointercancel"===e.type?this.lastMoveEventInfo:ga(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),s&&s(e,i)},!pr(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const i=ga(da(e),this.transformPagePoint),{point:o}=i,{timestamp:a}=ln;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,va(i,this.history)),this.removeListeners=Qi(pa(this.contextWindow,"pointermove",this.handlePointerMove),pa(this.contextWindow,"pointerup",this.handlePointerUp),pa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),an(this.updatePoint)}}function ga(e,t){return t?{point:t(e.point)}:e}function ya(e,t){return{x:e.x-t.x,y:e.y-t.y}}function va({point:e},t){return{point:e,delta:ya(e,xa(t)),offset:ya(e,wa(t)),velocity:ba(t,.1)}}function wa(e){return e[0]}function xa(e){return e[e.length-1]}function ba(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=xa(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>en(t)));)n--;if(!s)return{x:0,y:0};const i=tn(r.timestamp-s.timestamp);if(0===i)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ta(e){return e.max-e.min}function Ea(e,t,n,s=.5){e.origin=s,e.originPoint=Bi(t.min,t.max,e.origin),e.scale=Ta(n)/Ta(t),e.translate=Bi(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Sa(e,t,n,s){Ea(e.x,t.x,n.x,s?s.originX:void 0),Ea(e.y,t.y,n.y,s?s.originY:void 0)}function _a(e,t,n){e.min=n.min+t.min,e.max=e.min+Ta(t)}function Ca(e,t,n){e.min=t.min-n.min,e.max=e.min+Ta(t)}function Na(e,t,n){Ca(e.x,t.x,n.x),Ca(e.y,t.y,n.y)}function Ia(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ka(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}const Aa=.35;function ja(e,t,n){return{min:Pa(e,t),max:Pa(e,n)}}function Pa(e,t){return"number"==typeof e?e:e[t]||0}const Ra=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Da(e){return[e("x"),e("y")]}function La({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Oa(e){return void 0===e||1===e}function Ma({scale:e,scaleX:t,scaleY:n}){return!Oa(e)||!Oa(t)||!Oa(n)}function Va(e){return Ma(e)||Ua(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ua(e){return Fa(e.x)||Fa(e.y)}function Fa(e){return e&&"0%"!==e}function Ba(e,t,n){return n+t*(e-n)}function $a(e,t,n,s,r){return void 0!==r&&(e=Ba(e,r,s)),Ba(e,n,s)+t}function qa(e,t=0,n=1,s,r){e.min=$a(e.min,t,n,s,r),e.max=$a(e.max,t,n,s,r)}function za(e,{x:t,y:n}){qa(e.x,t.translate,t.scale,t.originPoint),qa(e.y,n.translate,n.scale,n.originPoint)}const Ha=.999999999999,Wa=1.0000000000001;function Ka(e,t){e.min=e.min+t,e.max=e.max+t}function Ga(e,t,n,s,r=.5){qa(e,t,n,Bi(e.min,e.max,r),s)}function Qa(e,t){Ga(e.x,t.x,t.scaleX,t.scale,t.originX),Ga(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ya(e,t){return La(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const Xa=({current:e})=>e?e.ownerDocument.defaultView:null,Ja=new WeakMap;class Za{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new fa(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(da(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:s,onDragStart:r}=this.getProps();if(n&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?lr[i]?null:(lr[i]=!0,()=>{lr[i]=!1}):lr.x||lr.y?null:(lr.x=lr.y=!0,()=>{lr.x=lr.y=!1}),!this.openDragLock))return;var i;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Da((e=>{let t=this.getAxisMotionValue(e).get()||0;if(ns.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[e];if(s){t=Ta(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),r&&on.postRender((()=>r(e,t))),jr(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:r,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Da((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:Xa(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&on.postRender((()=>r(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!el(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:n},s){return void 0!==t&&e<t?e=s?Bi(t,e,s.min):Math.max(e,t):void 0!==n&&e>n&&(e=s?Bi(n,e,s.max):Math.min(e,n)),e}(i,this.constraints[e],this.elastic[e])),r.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&In(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,{top:t,left:n,bottom:s,right:r}){return{x:Ia(e.x,n,r),y:Ia(e.y,t,s)}}(s.layoutBox,t),this.elastic=function(e=Aa){return!1===e?e=0:!0===e&&(e=Aa),{x:ja(e,"left","right"),y:ja(e,"top","bottom")}}(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Da((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(s.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!In(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=function(e,t,n){const s=Ya(e,n),{scroll:r}=t;return r&&(Ka(s.x,r.offset.x),Ka(s.y,r.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:ka(e.x,t.x),y:ka(e.y,t.y)}}(s.layout.layoutBox,r);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=La(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Da((o=>{if(!el(o,t,this.currentDirection))return;let l=a[o]||{};i&&(l={min:0,max:0});const c=s?200:1e6,u=s?40:1e7,h={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(o,h)}));return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return jr(this.visualElement,e),n.start(Ko(e,n,0,t,this.visualElement,!1))}stopAnimation(){Da((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Da((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Da((t=>{const{drag:n}=this.getProps();if(!el(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:n,max:i}=s.layout.layoutBox[t];r.set(e[t]-Bi(n,i,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!In(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Da((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();s[e]=function(e,t){let n=.5;const s=Ta(e),r=Ta(t);return r>s?n=Zt(t.min,t.max-s,e.min):s>r&&(n=Zt(e.min,e.max-r,t.min)),Yn(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Da((t=>{if(!el(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:i}=this.constraints[t];n.set(Bi(r,i,s[t]))}))}addListeners(){if(!this.visualElement.current)return;Ja.set(this.visualElement,this);const e=pa(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();In(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),on.read(t);const r=ha(window,"resize",(()=>this.scalePositionWithinConstraints())),i=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Da((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{r(),e(),s(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:i=Aa,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:i,dragMomentum:o}}}function el(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const tl=e=>(t,n)=>{e&&on.postRender((()=>e(t,n)))};const nl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sl(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rl={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!ss.test(e))return e;e=parseFloat(e)}return`${sl(e,t.target.x)}% ${sl(e,t.target.y)}%`}},il={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=ci.parse(e);if(r.length>5)return s;const i=ci.createTransformer(e),o="number"!=typeof r[0]?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;r[0+o]/=a,r[1+o]/=l;const c=Bi(a,l,.5);return"number"==typeof r[2+o]&&(r[2+o]/=c),"number"==typeof r[3+o]&&(r[3+o]/=c),i(r)}};class ol extends a.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;!function(e){for(const t in e)zn[t]=e[t],Fn(t)&&(zn[t].isCSSVariable=!0)}(ll),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(()=>{this.safeToRemove()})),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),nl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,i=n.projection;return i?(i.isPresent=r,s||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?i.promote():i.relegate()||on.postRender((()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pn.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function al(e){const[t,n]=zt(),s=a.useContext(Ot);return k.jsx(ol,{...e,layoutGroup:s,switchLayoutGroup:a.useContext(Dn),isPresent:t,safeToRemove:n})}const ll={borderRadius:{...rl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomLeftRadius:rl,borderBottomRightRadius:rl,boxShadow:il};const cl=(e,t)=>e.depth-t.depth;class ul{constructor(){this.children=[],this.isDirty=!1}add(e){Sr(this.children,e),this.isDirty=!0}remove(e){_r(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cl),this.isDirty=!1,this.children.forEach(e)}}const hl=["TopLeft","TopRight","BottomLeft","BottomRight"],dl=hl.length,pl=e=>"string"==typeof e?parseFloat(e):e,ml=e=>"number"==typeof e||ss.test(e);function fl(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const gl=vl(0,.5,$r),yl=vl(.5,.95,Yt);function vl(e,t,n){return s=>s<e?0:s>t?1:n(Zt(e,t,s))}function wl(e,t){e.min=t.min,e.max=t.max}function xl(e,t){wl(e.x,t.x),wl(e.y,t.y)}function bl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Tl(e,t,n,s,r){return e=Ba(e-=t,1/n,s),void 0!==r&&(e=Ba(e,1/r,s)),e}function El(e,t,[n,s,r],i,o){!function(e,t=0,n=1,s=.5,r,i=e,o=e){ns.test(t)&&(t=parseFloat(t),t=Bi(o.min,o.max,t/100)-o.min);if("number"!=typeof t)return;let a=Bi(i.min,i.max,s);e===i&&(a-=t),e.min=Tl(e.min,t,n,a,r),e.max=Tl(e.max,t,n,a,r)}(e,t[n],t[s],t[r],t.scale,i,o)}const Sl=["x","scaleX","originX"],_l=["y","scaleY","originY"];function Cl(e,t,n,s){El(e.x,t,Sl,n?n.x:void 0,s?s.x:void 0),El(e.y,t,_l,n?n.y:void 0,s?s.y:void 0)}function Nl(e){return 0===e.translate&&1===e.scale}function Il(e){return Nl(e.x)&&Nl(e.y)}function kl(e,t){return e.min===t.min&&e.max===t.max}function Al(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jl(e,t){return Al(e.x,t.x)&&Al(e.y,t.y)}function Pl(e){return Ta(e.x)/Ta(e.y)}function Rl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Dl{constructor(){this.members=[]}add(e){Sr(this.members,e),e.scheduleRender()}remove(e){if(_r(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ll=["","X","Y","Z"],Ol={visibility:"hidden"};let Ml=0;function Vl(e,t,n,s){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Ul(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Pr(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Ul(s)}function Fl({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=Ml++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ql),this.nodes.forEach(Yl),this.nodes.forEach(Xl),this.nodes.forEach(zl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new ul)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Cr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var s;this.isSVG=(s=t)instanceof SVGElement&&"svg"!==s.tagName,this.instance=t;const{layoutId:r,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||r)&&(this.isLayoutDirty=!0),e){let n;const s=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Er.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(an(s),e(i-t))};return on.read(s,!0),()=>an(s)}(s,250),nl.hasAnimatedSinceResize&&(nl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ql))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||i)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const r=this.options.transition||o.getDefaultTransition()||sc,{onLayoutAnimationStart:i,onLayoutAnimationComplete:a}=o.getProps(),l=!this.targetLayout||!jl(this.targetLayout,s),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...Gs(r,"layout"),onPlay:i,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||Ql(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,an(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jl),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ul(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Wl);this.isUpdating||this.nodes.forEach(Kl),this.isUpdating=!1,this.nodes.forEach(Gl),this.nodes.forEach(Bl),this.nodes.forEach($l),this.clearAllSnapshots();const e=Er.now();ln.delta=Yn(0,1e3/60,e-ln.timestamp),ln.timestamp=e,ln.isProcessing=!0,cn.update.process(ln),cn.preRender.process(ln),cn.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pn.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Hl),this.sharedNodes.forEach(Zl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Ta(this.snapshot.measuredBox.x)||Ta(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Il(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,i=s!==this.prevTransformTemplateValue;e&&(t||Va(this.latestValues)||i)&&(r(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var s;return e&&(n=this.removeTransform(n)),oc((s=n).x),oc(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(lc))){const{scroll:e}=this.root;e&&(Ka(n.x,e.offset.x),Ka(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(xl(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let s=0;s<this.path.length;s++){const t=this.path[s],{scroll:r,options:i}=t;t!==this.root&&r&&i.layoutScroll&&(r.wasRoot&&xl(n,e),Ka(n.x,r.offset.x),Ka(n.y,r.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};xl(n,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Qa(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Va(e.latestValues)&&Qa(n,e.latestValues)}return Va(this.latestValues)&&Qa(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};xl(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Va(e.latestValues))continue;Ma(e.latestValues)&&e.updateSnapshot();const s={x:{min:0,max:0},y:{min:0,max:0}};xl(s,e.measurePageBox()),Cl(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return Va(this.latestValues)&&Cl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Na(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),xl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var o,a,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,_a(o.x,a.x,l.x),_a(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):xl(this.target,this.layout.layoutBox),za(this.target,this.targetDelta)):xl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Na(this.relativeTargetOrigin,this.target,e.target),xl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Ma(this.parent.latestValues)&&!Ua(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(s=!1),s)return;const{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!i)return;xl(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,s=!1){const r=n.length;if(!r)return;let i,o;t.x=t.y=1;for(let a=0;a<r;a++){i=n[a],o=i.projectionDelta;const{visualElement:r}=i.options;r&&r.props.style&&"contents"===r.props.style.display||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Qa(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,za(e,o)),s&&Va(i.latestValues)&&Qa(e,i.latestValues))}t.x<Wa&&t.x>Ha&&(t.x=1),t.y<Wa&&t.y>Ha&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(bl(this.prevProjectionDelta.x,this.projectionDelta.x),bl(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Sa(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&Rl(this.projectionDelta.x,this.prevProjectionDelta.x)&&Rl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,s=n?n.latestValues:{},r={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(nc));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,d,p,m,f,g;ec(i.x,e.x,n),ec(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Na(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,m=this.relativeTargetOrigin,f=o,g=n,tc(p.x,m.x,f.x,g),tc(p.y,m.y,f.y,g),h&&(l=this.relativeTarget,d=h,kl(l.x,d.x)&&kl(l.y,d.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),xl(h,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,s,r,i){r?(e.opacity=Bi(0,void 0!==n.opacity?n.opacity:1,gl(s)),e.opacityExit=Bi(void 0!==t.opacity?t.opacity:1,0,yl(s))):i&&(e.opacity=Bi(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,s));for(let o=0;o<dl;o++){const r=`border${hl[o]}Radius`;let i=fl(t,r),a=fl(n,r);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||ml(i)===ml(a)?(e[r]=Math.max(Bi(pl(i),pl(a),s),0),(ns.test(a)||ns.test(i))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=Bi(t.rotate||0,n.rotate||0,s))}(r,s,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(an(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update((()=>{nl.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const s=Gn(e)?e:kr(e);return s.start(Ko("",s,t,n)),s.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:s,latestValues:r}=e;if(t&&n&&s){if(this!==e&&this.layout&&s&&ac(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Ta(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const s=Ta(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+s}xl(t,n),Qa(t,r),Sa(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Dl);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const s={};n.z&&Vl("z",e,s,this.animationValues);for(let r=0;r<Ll.length;r++)Vl(`rotate${Ll[r]}`,e,s,this.animationValues),Vl(`skew${Ll[r]}`,e,s,this.animationValues);e.render();for(const r in s)e.setStaticValue(r,s[r]),this.animationValues&&(this.animationValues[r]=s[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ol;const s={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=js(null==e?void 0:e.pointerEvents)||"",s.transform=r?r(this.latestValues,""):"none",s;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=js(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!Va(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const o=i.animationValues||i.latestValues;this.applyTransformsToTarget(),s.transform=function(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y,o=(null==n?void 0:n.z)||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),1===t.x&&1===t.y||(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:i,skewX:o,skewY:a}=n;e&&(s=`perspective(${e}px) ${s}`),t&&(s+=`rotate(${t}deg) `),r&&(s+=`rotateX(${r}deg) `),i&&(s+=`rotateY(${i}deg) `),o&&(s+=`skewX(${o}deg) `),a&&(s+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(s+=`scale(${a}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),r&&(s.transform=r(o,s.transform));const{x:a,y:l}=this.projectionDelta;s.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,i.animationValues?s.opacity=i===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:s.opacity=i===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in zn){if(void 0===o[c])continue;const{correct:e,applyTo:t,isCSSVariable:n}=zn[c],r="none"===s.transform?o[c]:e(o[c],i);if(t){const e=t.length;for(let n=0;n<e;n++)s[t[n]]=r}else n?this.options.visualElement.renderState.vars[c]=r:s[c]=r}return this.options.layoutId&&(s.pointerEvents=i===this?js(null==e?void 0:e.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Wl),this.root.sharedNodes.clear()}}}function Bl(e){e.updateLayout()}function $l(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:r}=e.options,i=n.source!==e.layout.source;"size"===r?Da((e=>{const s=i?n.measuredBox[e]:n.layoutBox[e],r=Ta(s);s.min=t[e].min,s.max=s.min+r})):ac(r,n.layoutBox,t)&&Da((s=>{const r=i?n.measuredBox[s]:n.layoutBox[s],o=Ta(t[s]);r.max=r.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+o)}));const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Sa(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Sa(a,e.applyTransform(s,!0),n.measuredBox):Sa(a,t,n.layoutBox);const l=!Il(o);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:r,layout:i}=s;if(r&&i){const o={x:{min:0,max:0},y:{min:0,max:0}};Na(o,n.layoutBox,r.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Na(a,t,i.layoutBox),jl(o,a)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ql(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Hl(e){e.clearSnapshot()}function Wl(e){e.clearMeasurements()}function Kl(e){e.isLayoutDirty=!1}function Gl(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ql(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Yl(e){e.resolveTargetDelta()}function Xl(e){e.calcProjection()}function Jl(e){e.resetSkewAndRotation()}function Zl(e){e.removeLeadSnapshot()}function ec(e,t,n){e.translate=Bi(t.translate,0,n),e.scale=Bi(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function tc(e,t,n,s){e.min=Bi(t.min,n.min,s),e.max=Bi(t.max,n.max,s)}function nc(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const sc={duration:.45,ease:[.4,0,.1,1]},rc=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ic=rc("applewebkit/")&&!rc("chrome/")?Math.round:Yt;function oc(e){e.min=ic(e.min),e.max=ic(e.max)}function ac(e,t,n){return"position"===e||"preserve-aspect"===e&&(s=Pl(t),r=Pl(n),i=.2,!(Math.abs(s-r)<=i));var s,r,i}function lc(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const cc=Fl({attachResizeListener:(e,t)=>ha(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uc={current:void 0},hc=Fl({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!uc.current){const e=new cc({});e.mount(window),e.setOptions({layoutScroll:!0}),uc.current=e}return uc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),dc={pan:{Feature:class extends la{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(e){this.session=new fa(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xa(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:tl(e),onStart:tl(t),onMove:n,onEnd:(e,t)=>{delete this.session,s&&on.postRender((()=>s(e,t)))}}}mount(){this.removePointerDownListener=pa(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends la{constructor(e){super(e),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new Za(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:hc,MeasureLayout:al}};function pc(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=s["onHover"+n];r&&on.postRender((()=>r(t,da(t))))}function mc(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=s["onTap"+("End"===n?"":n)];r&&on.postRender((()=>r(t,da(t))))}const fc=new WeakMap,gc=new WeakMap,yc=e=>{const t=fc.get(e.target);t&&t(e)},vc=e=>{e.forEach(yc)};function wc(e,t,n){const s=function({root:e,...t}){const n=e||document;gc.has(n)||gc.set(n,{});const s=gc.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(vc,{root:e,...t})),s[r]}(t);return fc.set(e,n),s.observe(e),()=>{fc.delete(e),s.unobserve(e)}}const xc={some:0,all:1};const bc={inView:{Feature:class extends la{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:xc[s]};return wc(this.node.current,i,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),i=t?n:s;i&&i(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends la{mount(){const{current:e}=this.node;e&&(this.unmount=wr(e,((e,t)=>(mc(this.node,t,"Start"),(e,{success:t})=>mc(this.node,e,t?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends la{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(BE){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qi(ha(this.node.current,"focus",(()=>this.onFocus())),ha(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends la{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[s,r,i]=ur(e,n),o=e=>{if(!hr(e))return;const{target:n}=e,s=t(n,e);if("function"!=typeof s||!n)return;const i=e=>{hr(e)&&(s(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,r)};return s.forEach((e=>{e.addEventListener("pointerenter",o,r)})),i}(e,((e,t)=>(pc(this.node,t,"Start"),e=>pc(this.node,e,"End")))))}unmount(){}}}},Tc={layout:{ProjectionNode:hc,MeasureLayout:al}},Ec={current:null},Sc={current:!1};const _c=[...Di,ei,ci],Cc=new WeakMap;const Nc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ic{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ki,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Er.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,on.render(this.render,!1,!0))};const{latestValues:a,renderState:l,onUpdate:c}=i;this.onUpdate=c,this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=En(t),this.isVariantNode=Sn(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const e=h[d];void 0!==a[d]&&Gn(e)&&e.set(a[d],!1)}}mount(e){this.current=e,Cc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),Sc.current||function(){if(Sc.current=!0,Kt)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ec.current=e.matches;e.addListener(t),t()}else Ec.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ec.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),an(this.notifyUpdate),an(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Wn.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&on.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),r=t.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{s(),r(),i&&i(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in dn){const t=dn[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Nc.length;n++){const t=Nc[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,n){for(const s in t){const r=t[s],i=n[s];if(Gn(r))e.addValue(s,r);else if(Gn(i))e.addValue(s,kr(r,{owner:e}));else if(i!==r)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(s);e.addValue(s,kr(void 0!==t?t:r,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=kr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let s=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=s&&("string"==typeof s&&(Ai(s)||zr(s))?s=parseFloat(s):(r=s,!_c.find(Ri(r))&&ci.test(t)&&(s=gi(e,t))),this.setBaseTarget(e,Gn(s)?s.get():s)),Gn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let s;if("string"==typeof n||"object"==typeof n){const r=ks(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(s=r[e])}if(n&&void 0!==s)return s;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Gn(r)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Cr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class kc extends Ic{constructor(){super(...arguments),this.KeyframeResolver=Oi}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gn(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class Ac extends kc{constructor(){super(...arguments),this.type="html",this.renderInstance=Ms}readValueFromInstance(e,t){if(Wn.has(t)){const e=fi(t);return e&&e.default||0}{const s=(n=e,window.getComputedStyle(n)),r=(Fn(t)?s.getPropertyValue(t):s[t])||0;return"string"==typeof r?r.trim():r}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return Ya(e,t)}build(e,t,n){ps(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ds(e,t,n)}}class jc extends kc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ra,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Os(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Wn.has(t)){const e=fi(t);return e&&e.default||0}return t=Vs.has(t)?t:An(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Fs(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&on.postRender(this.updateDimensions)}build(e,t,n){Es(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,s){Us(e,t,0,s)}mount(e){this.isSVGTag=_s(e.tagName),super.mount(e)}}const Pc=yn(qs({...ua,...bc,...dc,...Tc},((e,t)=>ws(e)?new jc(t):new Ac(t,{allowProjection:e!==a.Fragment}))));var Rc={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Lc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,o=i?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,i||(h=64)),s.push(n[c],n[u],n[h],n[d])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Dc(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==o||null==a)throw new Oc;const l=t<<2|i>>4;if(s.push(l),64!==o){const e=i<<4&240|o>>2;if(s.push(e),64!==a){const e=o<<6&192|a;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Oc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mc=function(e){return function(e){const t=Dc(e);return Lc.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Vc=function(e){try{return Lc.decodeString(e,!0)}catch(BE){console.error("base64Decode failed: ",BE)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Uc=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fc=()=>{try{return Uc()||(()=>{if("undefined"==typeof process)return;const e=Rc.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(BE){return}const t=e&&Vc(e[1]);return t&&JSON.parse(t)})()}catch(BE){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${BE}`)}},Bc=e=>{var t,n;return null===(n=null===(t=Fc())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$c=()=>{var e;return null===(e=Fc())||void 0===e?void 0:e.config},qc=e=>{var t;return null===(t=Fc())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hc(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Wc(){return!function(){var e;const t=null===(e=Fc())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(BE){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Kc extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Kc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Qc,((e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Kc(s,o,n)}}const Qc=/\{\$([^}]+)}/g;function Yc(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(Xc(n)&&Xc(i)){if(!Yc(n,i))return!1}else if(n!==i)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Xc(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Zc(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,s]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(s)}})),t}function eu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tu{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let s;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");s=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===s.next&&(s.next=nu),void 0===s.error&&(s.error=nu),void 0===s.complete&&(s.complete=nu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(BE){}})),this.observers.push(s),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(BE){"undefined"!=typeof console&&console.error&&console.error(BE)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function nu(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(e){return e&&e._delegate?e._delegate:e}class ru{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new zc;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(BE){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(BE){if(s)return null;throw BE}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:iu})}catch(BE){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(BE){}}}}clearInstance(e=iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=iu){return this.instances.has(e)}getOptions(e=iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch($E){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===iu?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch($E){}var s;return n||null}normalizeInstanceIdentifier(e=iu){return this.component?this.component.multipleInstances?e:iu:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class au{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ou(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lu,cu;(cu=lu||(lu={}))[cu.DEBUG=0]="DEBUG",cu[cu.VERBOSE=1]="VERBOSE",cu[cu.INFO=2]="INFO",cu[cu.WARN=3]="WARN",cu[cu.ERROR=4]="ERROR",cu[cu.SILENT=5]="SILENT";const uu={debug:lu.DEBUG,verbose:lu.VERBOSE,info:lu.INFO,warn:lu.WARN,error:lu.ERROR,silent:lu.SILENT},hu=lu.INFO,du={[lu.DEBUG]:"log",[lu.VERBOSE]:"log",[lu.INFO]:"info",[lu.WARN]:"warn",[lu.ERROR]:"error"},pu=(e,t,...n)=>{if(t<e.logLevel)return;const s=(new Date).toISOString(),r=du[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${s}]  ${e.name}:`,...n)};class mu{constructor(e){this.name=e,this._logLevel=hu,this._logHandler=pu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lu))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?uu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lu.DEBUG,...e),this._logHandler(this,lu.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lu.VERBOSE,...e),this._logHandler(this,lu.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lu.INFO,...e),this._logHandler(this,lu.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lu.WARN,...e),this._logHandler(this,lu.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lu.ERROR,...e),this._logHandler(this,lu.ERROR,...e)}}let fu,gu;const yu=new WeakMap,vu=new WeakMap,wu=new WeakMap,xu=new WeakMap,bu=new WeakMap;let Tu={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vu.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wu.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _u(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Eu(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gu||(gu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Cu(this),t),_u(yu.get(this))}:function(...t){return _u(e.apply(Cu(this),t))}:function(t,...n){const s=e.call(Cu(this),t,...n);return wu.set(s,t.sort?t.sort():[t]),_u(s)}}function Su(e){return"function"==typeof e?Eu(e):(e instanceof IDBTransaction&&function(e){if(vu.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)}));vu.set(e,t)}(e),t=e,(fu||(fu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Tu):e);var t}function _u(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(_u(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&yu.set(t,e)})).catch((()=>{})),bu.set(t,e),t}(e);if(xu.has(e))return xu.get(e);const t=Su(e);return t!==e&&(xu.set(e,t),bu.set(t,e)),t}const Cu=e=>bu.get(e);const Nu=["get","getKey","getAll","getAllKeys","count"],Iu=["put","add","delete","clear"],ku=new Map;function Au(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ku.get(t))return ku.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=Iu.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!Nu.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let o=i.store;return s&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&i.done]))[0]};return ku.set(t,i),i}Tu=(e=>({...e,get:(t,n,s)=>Au(t,n)||e.get(t,n,s),has:(t,n)=>!!Au(t,n)||e.has(t,n)}))(Tu);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ju{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Pu="@firebase/app",Ru="0.11.1",Du=new mu("@firebase/app"),Lu="@firebase/app-compat",Ou="@firebase/analytics-compat",Mu="@firebase/analytics",Vu="@firebase/app-check-compat",Uu="@firebase/app-check",Fu="@firebase/auth",Bu="@firebase/auth-compat",$u="@firebase/database",qu="@firebase/data-connect",zu="@firebase/database-compat",Hu="@firebase/functions",Wu="@firebase/functions-compat",Ku="@firebase/installations",Gu="@firebase/installations-compat",Qu="@firebase/messaging",Yu="@firebase/messaging-compat",Xu="@firebase/performance",Ju="@firebase/performance-compat",Zu="@firebase/remote-config",eh="@firebase/remote-config-compat",th="@firebase/storage",nh="@firebase/storage-compat",sh="@firebase/firestore",rh="@firebase/vertexai",ih="@firebase/firestore-compat",oh="firebase",ah="[DEFAULT]",lh={[Pu]:"fire-core",[Lu]:"fire-core-compat",[Mu]:"fire-analytics",[Ou]:"fire-analytics-compat",[Uu]:"fire-app-check",[Vu]:"fire-app-check-compat",[Fu]:"fire-auth",[Bu]:"fire-auth-compat",[$u]:"fire-rtdb",[qu]:"fire-data-connect",[zu]:"fire-rtdb-compat",[Hu]:"fire-fn",[Wu]:"fire-fn-compat",[Ku]:"fire-iid",[Gu]:"fire-iid-compat",[Qu]:"fire-fcm",[Yu]:"fire-fcm-compat",[Xu]:"fire-perf",[Ju]:"fire-perf-compat",[Zu]:"fire-rc",[eh]:"fire-rc-compat",[th]:"fire-gcs",[nh]:"fire-gcs-compat",[sh]:"fire-fst",[ih]:"fire-fst-compat",[rh]:"fire-vertex","fire-js":"fire-js",[oh]:"fire-js-all"},ch=new Map,uh=new Map,hh=new Map;function dh(e,t){try{e.container.addComponent(t)}catch(BE){Du.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,BE)}}function ph(e){const t=e.name;if(hh.has(t))return Du.debug(`There were multiple attempts to register component ${t}.`),!1;hh.set(t,e);for(const n of ch.values())dh(n,e);for(const n of uh.values())dh(n,e);return!0}function mh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fh(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Gc("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yh{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ru("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gh.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="11.3.1";function wh(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const s=Object.assign({name:ah,automaticDataCollectionEnabled:!1},t),r=s.name;if("string"!=typeof r||!r)throw gh.create("bad-app-name",{appName:String(r)});if(n||(n=$c()),!n)throw gh.create("no-options");const i=ch.get(r);if(i){if(Yc(n,i.options)&&Yc(s,i.config))return i;throw gh.create("duplicate-app",{appName:r})}const o=new au(r);for(const l of hh.values())o.addComponent(l);const a=new yh(n,s,o);return ch.set(r,a),a}function xh(e=ah){const t=ch.get(e);if(!t&&e===ah&&$c())return wh();if(!t)throw gh.create("no-app",{appName:e});return t}function bh(e,t,n){var s;let r=null!==(s=lh[e])&&void 0!==s?s:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Du.warn(e.join(" "))}ph(new ru(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="firebase-heartbeat-store";let Eh=null;function Sh(){return Eh||(Eh=function(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),a=_u(o);return s&&o.addEventListener("upgradeneeded",(e=>{s(_u(o.result),e.oldVersion,e.newVersion,_u(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Th)}catch(BE){console.warn(BE)}}}).catch((e=>{throw gh.create("idb-open",{originalErrorMessage:e.message})}))),Eh}async function _h(e,t){try{const n=(await Sh()).transaction(Th,"readwrite"),s=n.objectStore(Th);await s.put(t,Ch(e)),await n.done}catch(BE){if(BE instanceof Kc)Du.warn(BE.message);else{const t=gh.create("idb-set",{originalErrorMessage:null==BE?void 0:BE.message});Du.warn(t.message)}}}function Ch(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kh(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ih();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some((e=>e.date===s)))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(BE){Du.warn(BE)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ih(),{heartbeatsToSend:n,unsentEntries:s}=function(e,t=1024){const n=[];let s=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Ah(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ah(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=Mc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(BE){return Du.warn(BE),""}}}function Ih(){return(new Date).toISOString().substring(0,10)}class kh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(BE){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Sh()).transaction(Th),n=await t.objectStore(Th).get(Ch(e));return await t.done,n}catch(BE){if(BE instanceof Kc)Du.warn(BE.message);else{const t=gh.create("idb-get",{originalErrorMessage:null==BE?void 0:BE.message});Du.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _h(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _h(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ah(e){return Mc(JSON.stringify({version:2,heartbeats:e})).length}var jh;jh="",ph(new ru("platform-logger",(e=>new ju(e)),"PRIVATE")),ph(new ru("heartbeat",(e=>new Nh(e)),"PRIVATE")),bh(Pu,Ru,jh),bh(Pu,Ru,"esm2017"),bh("fire-js","");function Ph(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}function Rh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
bh("firebase","11.3.1","app"),"function"==typeof SuppressedError&&SuppressedError;const Dh=Rh,Lh=new Gc("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oh=new mu("@firebase/auth");function Mh(e,...t){Oh.logLevel<=lu.ERROR&&Oh.error(`Auth (${vh}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(e,...t){throw $h(e,...t)}function Uh(e,...t){return $h(e,...t)}function Fh(e,t,n){const s=Object.assign(Object.assign({},Dh()),{[t]:n});return new Gc("auth","Firebase",s).create(t,{appName:e.name})}function Bh(e){return Fh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $h(e,...t){if("string"!=typeof e){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return Lh.create(e,...t)}function qh(e,t,...n){if(!e)throw $h(t,...n)}function zh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Mh(t),new Error(t)}function Hh(e,t){e||zh(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Kh()&&"https:"!==Kh()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hc())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Gh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(e,t){Hh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void zh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void zh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void zh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Zh=new Qh(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function td(e,t,n,s,r={}){return nd(e,r,(async()=>{let r={},i={};s&&("GET"===t?i=s:r={body:JSON.stringify(s)});const o=Jc(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},r);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Xh.fetch()(rd(e,e.config.apiHost,n,o),l)}))}async function nd(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},Jh),t);try{const t=new od(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw ad(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ad(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw ad(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw ad(e,"user-disabled",i);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fh(e,a,o);Vh(e,a)}}catch(BE){if(BE instanceof Kc)throw BE;Vh(e,"network-request-failed",{message:String(BE)})}}async function sd(e,t,n,s,r={}){const i=await td(e,t,n,s,r);return"mfaPendingCredential"in i&&Vh(e,"multi-factor-auth-required",{_serverResponse:i}),i}function rd(e,t,n,s){const r=`${t}${n}?${s}`;return e.config.emulator?Yh(e.config,r):`${e.config.apiScheme}://${r}`}function id(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class od{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Uh(this.auth,"network-request-failed"))),Zh.get())}))}}function ad(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Uh(e,t,s);return r.customData._tokenResponse=n,r}function ld(e){return void 0!==e&&void 0!==e.enterprise}class cd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return id(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ud(e,t){return td(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(BE){}}function dd(e){return 1e3*Number(e)}function pd(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const e=Vc(n);return e?JSON.parse(e):(Mh("Failed to decode base64 JWT payload"),null)}catch(BE){return Mh("Caught error parsing JWT payload as JSON",null==BE?void 0:BE.toString()),null}}function md(e){const t=pd(e);return qh(t,"internal-error"),qh(void 0!==t.exp,"internal-error"),qh(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(e,t,n=!1){if(n)return t;try{return await t}catch(BE){throw BE instanceof Kc&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(BE)&&e.auth.currentUser===e&&await e.auth.signOut(),BE}}class gd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(BE){return void("auth/network-request-failed"===(null==BE?void 0:BE.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hd(this.lastLoginAt),this.creationTime=hd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(e){var t;const n=e.auth,s=await e.getIdToken(),r=await fd(e,ud(n,{idToken:s}));qh(null==r?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?wd(i.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&i.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new yd(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function wd(e){return e.map((e=>{var{providerId:t}=e,n=Ph(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qh(e.idToken,"internal-error"),qh(void 0!==e.idToken,"internal-error"),qh(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):md(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qh(0!==e.length,"internal-error");const t=md(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(qh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:r}=await async function(e,t){const n=await nd(e,{},(async()=>{const n=Jc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,i=rd(e,s,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Xh.fetch()(i,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:r}=t,i=new xd;return n&&(qh("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),s&&(qh("string"==typeof s,"internal-error",{appName:e}),i.accessToken=s),r&&(qh("number"==typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xd,this.toJSON())}_performRefresh(){return zh("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(e,t){qh("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Td{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,r=Ph(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new yd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await fd(this,this.stsTokenManager.getToken(this.auth,e));return qh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=su(e),s=await n.getIdToken(t),r=pd(s);qh(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i="object"==typeof r.firebase?r.firebase:void 0,o=null==i?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:hd(dd(r.auth_time)),issuedAtTime:hd(dd(r.iat)),expirationTime:hd(dd(r.exp)),signInProvider:o||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=su(e);await vd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Td(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fh(this.auth.app))return Promise.reject(Bh(this.auth));const e=await this.getIdToken();return await fd(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return td(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,r,i,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(s=t.email)&&void 0!==s?s:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:x,providerData:b,stsTokenManager:T}=t;qh(v&&T,e,"internal-error");const E=xd.fromJSON(this.name,T);qh("string"==typeof v,e,"internal-error"),bd(u,e.name),bd(h,e.name),qh("boolean"==typeof w,e,"internal-error"),qh("boolean"==typeof x,e,"internal-error"),bd(d,e.name),bd(p,e.name),bd(m,e.name),bd(f,e.name),bd(g,e.name),bd(y,e.name);const S=new Td({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),f&&(S._redirectEventId=f),S}static async _fromIdTokenResponse(e,t,n=!1){const s=new xd;s.updateFromServerResponse(t);const r=new Td({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await vd(r),r}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];qh(void 0!==s.localId,"internal-error");const r=void 0!==s.providerUserInfo?wd(s.providerUserInfo):[],i=!(s.email&&s.passwordHash||(null==r?void 0:r.length)),o=new xd;o.updateFromIdToken(n);const a=new Td({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new yd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash||(null==r?void 0:r.length))};return Object.assign(a,l),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map;function Sd(e){Hh(e instanceof Function,"Expected a class definition");let t=Ed.get(e);return t?(Hh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ed.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_d.type="NONE";const Cd=_d;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(e,t,n){return`firebase:${e}:${t}:${n}`}class Id{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:r}=this.auth;this.fullUserKey=Nd(this.userKey,s.apiKey,r),this.fullPersistenceKey=Nd("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Td._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Id(Sd(Cd),e,n);const s=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=s[0]||Sd(Cd);const i=Nd(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){const n=Td._fromJSON(e,t);l!==r&&(o=n),r=l;break}}catch($E){}const a=s.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(i,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(i)}catch($E){}}))),new Id(r,e,n)):new Id(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ad(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ld(t))return"Blackberry";if(Od(t))return"Webos";if(jd(t))return"Safari";if((t.includes("chrome/")||Pd(t))&&!t.includes("edge/"))return"Chrome";if(Dd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ad(e=Hc()){return/firefox\//i.test(e)}function jd(e=Hc()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pd(e=Hc()){return/crios\//i.test(e)}function Rd(e=Hc()){return/iemobile/i.test(e)}function Dd(e=Hc()){return/android/i.test(e)}function Ld(e=Hc()){return/blackberry/i.test(e)}function Od(e=Hc()){return/webos/i.test(e)}function Md(e=Hc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vd(){return function(){const e=Hc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ud(e=Hc()){return Md(e)||Dd(e)||Od(e)||Ld(e)||/windows phone/i.test(e)||Rd(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e,t=[]){let n;switch(e){case"Browser":n=kd(Hc());break;case"Worker":n=`${kd(Hc())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${vh}/${s}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,s)=>{try{n(e(t))}catch(BE){s(BE)}}));n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(BE){t.reverse();for(const s of t)try{s()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==BE?void 0:BE.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){var t,n,s,r;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(s=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==s?s:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,r,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(s=a.containsLowercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsNumericCharacter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hd(this),this.idTokenSubscription=new Hd(this),this.beforeStateQueue=new Bd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sd(t)),this._initializationPromise=this.queue((async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Id.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(BE){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ud(this,{idToken:e}),n=await Td._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fh(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==i||!(null==o?void 0:o.user)||(s=o.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(BE){s=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(BE)))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(BE){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(BE){if("auth/network-request-failed"!==(null==BE?void 0:BE.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fh(this.app))return Promise.reject(Bh(this));const t=e?su(e):null;return t&&qh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return fh(this.app)?Promise.reject(Bh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fh(this.app)?Promise.reject(Bh(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Sd(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return td(e,"GET","/v2/passwordPolicy",ed(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new $d(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return td(e,"POST","/v2/accounts:revokeToken",ed(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sd(e)||this._popupRedirectResolver;qh(t,this,"argument-error"),this.redirectPersistenceManager=await Id.create(this,[Sd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qh(o,this,"internal-error"),o.then((()=>{i||r(this.currentUser)})),"function"==typeof t){const r=e.addObserver(t,n,s);return()=>{i=!0,r()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(fh(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Oh.logLevel<=lu.WARN&&Oh.warn(`Auth (${vh}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function zd(e){return su(e)}class Hd{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new tu(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return qh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kd(e){return Wd.loadJS(e)}class Gd{constructor(){this.enterprise=new Qd}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qd{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Yd="NO_RECAPTCHA";class Xd{constructor(e){this.type="recaptcha-enterprise",this.auth=zd(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return td(e,"GET","/v2/recaptchaConfig",ed(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((s=>{if(void 0!==s.recaptchaKey){const n=new cd(s);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))}function s(t,n,s){const r=window.grecaptcha;ld(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Yd)}))})):s(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Gd).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{n(this.auth).then((n=>{if(!t&&ld(window.grecaptcha))s(n,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Wd.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Kd(t).then((()=>{s(n,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Jd(e,t,n,s=!1,r=!1){const i=new Xd(e);let o;if(r)o=Yd;else try{o=await i.verify(n)}catch(l){o=await i.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Zd(e,t,n,s,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Jd(e,t,n,"getOobCode"===n);return s(e,r)}return s(e,t).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await Jd(e,t,n,"getOobCode"===n);return s(e,r)}return Promise.reject(r)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(e,t,n){const s=zd(e);qh(s._canInitEmulator,s,"emulator-config-failed"),qh(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const r=tp(t),{host:i,port:o}=function(e){const t=tp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const e=r[1];return{host:e,port:np(s.substr(e.length+1))}}{const[e,t]=s.split(":");return{host:e,port:np(t)}}}(t),a=null===o?"":`:${o}`;s.config.emulator={url:`${r}//${i}${a}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:i,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function tp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function np(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class sp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zh("not implemented")}_getIdTokenResponse(e){return zh("not implemented")}_linkToIdToken(e,t){return zh("not implemented")}_getReauthenticationResolver(e){return zh("not implemented")}}async function rp(e,t){return td(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(e,t){return sd(e,"POST","/v1/accounts:signInWithPassword",ed(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class op extends sp{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new op(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new op(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ip);case"emailLink":return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithEmailLink",ed(e,t))}(e,{email:this._email,oobCode:this._password});default:Vh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rp);case"emailLink":return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithEmailLink",ed(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(e,t){return sd(e,"POST","/v1/accounts:signInWithIdp",ed(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends sp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new lp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,r=Ph(t,["providerId","signInMethod"]);if(!n||!s)return null;const i=new lp(n,s);return i.idToken=r.idToken||void 0,i.accessToken=r.accessToken||void 0,i.secret=r.secret,i.nonce=r.nonce,i.pendingToken=r.pendingToken||null,i}_getIdTokenResponse(e){return ap(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ap(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ap(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){var t,n,s,r,i,o;const a=Zc(eu(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=a.mode)&&void 0!==s?s:null);qh(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Zc(eu(e)).link,n=t?Zc(eu(t)).deep_link_id:null,s=Zc(eu(e)).deep_link_id;return(s?Zc(eu(s)).link:null)||s||n||t||e}(e);try{return new cp(t)}catch($E){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.providerId=up.PROVIDER_ID}static credential(e,t){return op._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cp.parseLink(t);return qh(n,"argument-error"),op._fromEmailAndCode(e,n.code,n.tenantId)}}up.PROVIDER_ID="password",up.EMAIL_PASSWORD_SIGN_IN_METHOD="password",up.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends hp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends dp{constructor(){super("facebook.com")}static credential(e){return lp._fromParams({providerId:pp.PROVIDER_ID,signInMethod:pp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pp.credentialFromTaggedObject(e)}static credentialFromError(e){return pp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return pp.credential(e.oauthAccessToken)}catch($E){return null}}}pp.FACEBOOK_SIGN_IN_METHOD="facebook.com",pp.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mp extends dp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return lp._fromParams({providerId:mp.PROVIDER_ID,signInMethod:mp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mp.credentialFromTaggedObject(e)}static credentialFromError(e){return mp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return mp.credential(t,n)}catch($E){return null}}}mp.GOOGLE_SIGN_IN_METHOD="google.com",mp.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fp extends dp{constructor(){super("github.com")}static credential(e){return lp._fromParams({providerId:fp.PROVIDER_ID,signInMethod:fp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fp.credentialFromTaggedObject(e)}static credentialFromError(e){return fp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return fp.credential(e.oauthAccessToken)}catch($E){return null}}}fp.GITHUB_SIGN_IN_METHOD="github.com",fp.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gp extends dp{constructor(){super("twitter.com")}static credential(e,t){return lp._fromParams({providerId:gp.PROVIDER_ID,signInMethod:gp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gp.credentialFromTaggedObject(e)}static credentialFromError(e){return gp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return gp.credential(t,n)}catch($E){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function yp(e,t){return sd(e,"POST","/v1/accounts:signUp",ed(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gp.TWITTER_SIGN_IN_METHOD="twitter.com",gp.PROVIDER_ID="twitter.com";class vp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const r=await Td._fromIdTokenResponse(e,n,s),i=wp(n);return new vp({user:r,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=wp(n);return new vp({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function wp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Kc{constructor(e,t,n,s){var r;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,xp.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new xp(e,t,n,s)}}function bp(e,t,n,s){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw xp._fromErrorAndOperation(e,n,t,s);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Tp(e,t,n=!1){if(fh(e.app))return Promise.reject(Bh(e));const s="signIn",r=await bp(e,s,t),i=await vp._fromIdTokenResponse(e,s,r);return n||await e._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ep(e){const t=zd(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Sp(e,t,n){return fh(e.app)?Promise.reject(Bh(e)):async function(e,t){return Tp(zd(e),t)}(su(e),up.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ep(e),t}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function _p(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const s=su(e),r={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},i=await fd(s,async function(e,t){return td(e,"POST","/v1/accounts:update",t)}(s.auth,r));s.displayName=i.displayName||null,s.photoURL=i.photoUrl||null;const o=s.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(i)}function Cp(e,t,n,s){return su(e).onAuthStateChanged(t,n,s)}const Np="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Np,"1"),this.storage.removeItem(Np),Promise.resolve(!0)):Promise.resolve(!1)}catch($E){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp extends Ip{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ud(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Vd()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kp.type="LOCAL";const Ap=kp;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Ip{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jp.type="SESSION";const Pp=jp;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Rp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:r}=t.data,i=this.handlersMap[s];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Dp(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rp.receivers=[];class Lp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,i;return new Promise(((o,a)=>{const l=Dp("",20);s.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);i={messageChannel:s,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mp(){return void 0!==Op().WorkerGlobalScope&&"function"==typeof Op().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vp="firebaseLocalStorageDb",Up="firebaseLocalStorage",Fp="fbase_key";class Bp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $p(e,t){return e.transaction([Up],t?"readwrite":"readonly").objectStore(Up)}function qp(){const e=indexedDB.open(Vp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Up,{keyPath:Fp})}catch(BE){n(BE)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Up)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Vp);return new Bp(e).toPromise()}(),t(await qp()))}))}))}async function zp(e,t,n){const s=$p(e,!0).put({[Fp]:t,value:n});return new Bp(s).toPromise()}function Hp(e,t){const n=$p(e,!0).delete(t);return new Bp(n).toPromise()}class Wp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await qp()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(BE){if(t++>3)throw BE;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rp._getInstance(Mp()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Lp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qp();return await zp(e,Np,"1"),await Hp(e,Np),!0}catch($E){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>zp(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$p(e,!1).get(t),s=await new Bp(n).toPromise();return void 0===s?null:s.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$p(e,!1).getAll();return new Bp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:s,value:r}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wp.type="LOCAL";const Kp=Wp;new Qh(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gp extends sp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ap(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ap(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ap(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qp(e){return Tp(e.auth,new Gp(e),e.bypassAuthState)}function Yp(e){const{auth:t,user:n}=e;return qh(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:s}=e;if(fh(s.app))return Promise.reject(Bh(s));const r="reauthenticate";try{const i=await fd(e,bp(s,r,t,e),n);qh(i.idToken,s,"internal-error");const o=pd(i.idToken);qh(o,s,"internal-error");const{sub:a}=o;return qh(e.uid===a,s,"user-mismatch"),vp._forOperation(e,r,i)}catch(BE){throw"auth/user-not-found"===(null==BE?void 0:BE.code)&&Vh(s,"user-mismatch"),BE}}(n,new Gp(e),e.bypassAuthState)}async function Xp(e){const{auth:t,user:n}=e;return qh(n,t,"internal-error"),async function(e,t,n=!1){const s=await fd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vp._forOperation(e,"link",s)}(n,new Gp(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,n,s,r=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(BE){this.reject(BE)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:r,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(BE){this.reject(BE)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qp;case"linkViaPopup":case"linkViaRedirect":return Xp;case"reauthViaPopup":case"reauthViaRedirect":return Yp;default:Vh(this.auth,"internal-error")}}resolve(e){Hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=new Qh(2e3,1e4);class em extends Jp{constructor(e,t,n,s,r){super(e,t,s,r),this.provider=n,this.authWindow=null,this.pollId=null,em.currentPopupAction&&em.currentPopupAction.cancel(),em.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qh(e,this.auth,"internal-error"),e}async onExecution(){Hh(1===this.filter.length,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Uh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Uh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,em.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Uh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Zp.get())};e()}}em.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tm="pendingRedirect",nm=new Map;class sm extends Jp{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=nm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Nd(tm,e.config.apiKey,e.name)}(t),s=function(e){return Sd(e._redirectPersistence)}(e);if(!(await s._isAvailable()))return!1;const r="true"===await s._get(n);return await s._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(BE){e=()=>Promise.reject(BE)}nm.set(this.auth._key(),e)}return this.bypassAuthState||nm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function rm(e,t){nm.set(e._key(),t)}async function im(e,t,n=!1){if(fh(e.app))return Promise.reject(Bh(e));const s=zd(e),r=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Sd(t):(qh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(s,t),i=new sm(s,r,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lm(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lm(e)){const s=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Uh(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(am(e))}saveEventToCache(e){this.cachedEventUids.add(am(e)),this.lastProcessedEventTime=Date.now()}}function am(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lm({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,um=/^https?/;async function hm(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return td(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(dm(n))return}catch($E){}Vh(e,"unauthorized-domain")}function dm(e){const t=Wh(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===s?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===s}if(!um.test(n))return!1;if(cm.test(e))return s===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Qh(3e4,6e4);function mm(){const e=Op().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fm(e){return new Promise(((t,n)=>{var s,r,i;function o(){mm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mm(),n(Uh(e,"network-request-failed"))},timeout:pm.get()})}if(null===(r=null===(s=Op().gapi)||void 0===s?void 0:s.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Op().gapi)||void 0===i?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Op()[t]=()=>{gapi.load?o():n(Uh(e,"network-request-failed"))},Kd(`${Wd.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw gm=null,e}))}let gm=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ym=new Qh(5e3,15e3),vm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xm(e){const t=e.config;qh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yh(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:vh},r=wm.get(e.config.apiHost);r&&(s.eid=r);const i=e._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Jc(s).slice(1)}`}async function bm(e){const t=await function(e){return gm=gm||fm(e),gm}(e),n=Op().gapi;return qh(n,e,"internal-error"),t.open({where:document.body,url:xm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vm,dontclear:!0},(t=>new Promise((async(n,s)=>{await t.restyle({setHideOnLeave:!1});const r=Uh(e,"network-request-failed"),i=Op().setTimeout((()=>{s(r)}),ym.get());function o(){Op().clearTimeout(i),n(t)}t.ping(o).then(o,(()=>{s(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Em{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(BE){}}}function Sm(e,t,n,s=500,r=600){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Tm),{width:s.toString(),height:r.toString(),top:i,left:o}),c=Hc().toLowerCase();n&&(a=Pd(c)?"_blank":n),Ad(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Hc()){var t;return Md(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new Em(null);const h=window.open(t||"",a,u);qh(h,e,"popup-blocked");try{h.focus()}catch(BE){}return new Em(h)}const _m="__/auth/handler",Cm="emulator/auth/handler",Nm=encodeURIComponent("fac");async function Im(e,t,n,s,r,i){qh(e.config.authDomain,e,"auth-domain-config-required"),qh(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:vh,eventId:r};if(t instanceof hp){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof dp){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Nm}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${_m}`;return Yh(e,Cm)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Jc(a).slice(1)}${c}`}const km="webStorageSupport";const Am=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pp,this._completeRedirectFn=im,this._overrideRedirectResult=rm}async _openPopup(e,t,n,s){var r;Hh(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Sm(e,await Im(e,t,n,Wh(),s),Dp())}async _openRedirect(e,t,n,s){await this._originValidation(e);return function(e){Op().location.href=e}(await Im(e,t,n,Wh(),s)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Hh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await bm(e),n=new om(e);return t.register("authEvent",(t=>{qh(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(km,{type:km},(n=>{var s;const r=null===(s=null==n?void 0:n[0])||void 0===s?void 0:s[km];void 0!==r&&t(!!r),Vh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ud()||jd()||Md()}};var jm="@firebase/auth",Pm="1.9.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Dm=qc("authIdTokenMaxAge")||300;let Lm=null;var Om;Wd={loadJS:e=>new Promise(((t,n)=>{const s=document.createElement("script");var r,i;s.setAttribute("src",e),s.onload=t,s.onerror=e=>{const t=Uh("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(s)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Om="Browser",ph(new ru("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;qh(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:i,authDomain:o,clientPlatform:Om,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fd(Om)},l=new qd(n,s,r,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Sd);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ph(new ru("auth-internal",(e=>{const t=zd(e.getProvider("auth").getImmediate());return new Rm(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),bh(jm,Pm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Om)),bh(jm,Pm,"esm2017");var Mm,Vm,Um="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var s=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)s[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var i=e.g[3],o=t+(i^n&(r^i))+s[0]+3614090360&4294967295;o=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(r^t&(n^r))+s[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(t^n))+s[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(i^t))+s[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(r^i))+s[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^t&(n^r))+s[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(t^n))+s[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(i^t))+s[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(r^i))+s[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^t&(n^r))+s[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(t^n))+s[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(i^t))+s[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(r^i))+s[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^t&(n^r))+s[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(t^n))+s[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(i^t))+s[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^i&(n^r))+s[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(t^n))+s[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(i^t))+s[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(r^i))+s[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^i&(n^r))+s[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(t^n))+s[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(i^t))+s[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(r^i))+s[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^i&(n^r))+s[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(t^n))+s[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(i^t))+s[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(r^i))+s[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^i&(n^r))+s[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(t^n))+s[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(i^t))+s[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(r^i))+s[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^i)+s[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^r)+s[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^t^n)+s[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^t)+s[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^i)+s[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^r)+s[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^t^n)+s[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^t)+s[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^i)+s[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^r)+s[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^t^n)+s[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^t)+s[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^i)+s[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^r)+s[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^t^n)+s[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^t)+s[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~i))+s[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~r))+s[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(i|~n))+s[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~t))+s[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~i))+s[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~r))+s[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(i|~n))+s[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~t))+s[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~i))+s[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~r))+s[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(i|~n))+s[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~t))+s[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(r^(n|~i))+s[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~r))+s[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=i+((o=r+(t^(i|~n))+s[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function s(e,t){this.h=t;for(var n=[],s=!0,r=e.length-1;0<=r;r--){var i=0|e[r];s&&i==t||(n[r]=i,s=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var s=t-this.blockSize,r=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=s;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){n(this,r),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};var r={};function i(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var a=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(a,a);if(h(e))return t=g(d(e),t),new f(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new f(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,s=t;0>=s.l(e);)n=y(n),s=y(s);var r=v(n,1),i=v(s,1);for(s=v(s,2),n=v(n,2);!u(s);){var c=i.add(s);0>=c.l(e)&&(r=r.add(n),i=c),s=v(s,1),n=v(n,1)}return t=p(e,r.j(t)),new f(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),c=(i=o(n)).j(t);h(c)||0<c.l(e);)c=(i=o(n-=s)).j(t);u(i)&&(i=l),r=r.add(i),e=p(e,c)}return new f(r,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.i(n);e+=(0<=s?s:4294967296+s)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,s="";;){var r=g(n,t).g,i=((0<(n=p(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return i+s;for(;6>i.length;)i="0"+i;s=i+s}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var l=this.i(r)>>>16,p=65535&this.i(r),f=e.i(i)>>>16,g=65535&e.i(i);n[2*r+2*i]+=p*g,m(n,2*r+2*i),n[2*r+2*i+1]+=l*g,m(n,2*r+2*i+1),n[2*r+2*i+1]+=p*f,m(n,2*r+2*i+1),n[2*r+2*i+2]+=l*f,m(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Vm=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=o(Math.pow(n,8)),r=a,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(s)).add(o(c))}return r},Mm=s}).apply(void 0!==Um?Um:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Fm,Bm,$m,qm,zm,Hm,Wm,Km,Gm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Gm&&Gm];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,s){if(s)e:{var r=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in r))break e;r=r[o]}(s=s(i=r[e=e[e.length-1]]))!=i&&null!=s&&t(r,e,{configurable:!0,writable:!0,value:s})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,s=!1,r={next:function(){if(!s&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return s=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var s=s||{},r=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,s=t.length||0;e.length=n+s;for(let r=0;r<s;r++)e[n+r]=t[r]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function v(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,s;for(let r=1;r<arguments.length;r++){for(n in s=arguments[r],s)e[n]=s[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function T(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){r.setTimeout((()=>{throw e}),0)}function S(){var e=k;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,I=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=r.Promise.resolve(void 0);N=()=>{e.then(j)}};var j=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){E(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,R);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),V=0;function U(e,t,n,s,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ha=r,this.key=++V,this.da=this.fa=!1}function F(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var s,r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(F(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,s){for(var r=0;r<e.length;++r){var i=e[r];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==s)return r}return-1}B.prototype.add=function(e,t,n,s,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=q(e,t,s,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,i,!!s,r)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,s,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,s,r);return null}return n=Z(n),e&&e[M]?e.K(t,n,!!o(s)&&!!s.capture,r):function(e,t,n,s,r,i){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=X(e);if(l||(e[z]=l=new B(e)),n=l.add(t,n,s,a,i),n.proxy)return n;if(s=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)D||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),s,r);else if(e.attachEvent)e.attachEvent(Q(t.toString()),s);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(s)}return n}(e,t,n,!1,s,r)}function K(e,t,n,s,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)K(e,t[i],n,s,r);else s=o(s)?!!s.capture:!!s,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,s,r))&&(F(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,s,r)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])$(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Q(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=X(t))?($(n,e),0==n.h&&(n.src=null,t[z]=null)):F(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,s=e.ha||e.src;e.fa&&G(e),e=n.call(s,t)}return e}function X(e){return(e=e[z])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,s=e.F;if(s)for(n=[];s;s=s.F)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var r=t;b(t=new R(s,e),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];r=ne(o,s,!0,t)&&r}if(r=ne(o=t.g=e,s,!0,t)&&r,r=ne(o,s,!1,t)&&r,n)for(i=0;i<n.length;i++)r=ne(o=t.g=n[i],s,!1,t)&&r}function ne(e,t,n,s){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&$(e.i,o),r=!1!==a.call(l,s)&&r}}return r&&!s.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function re(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,re(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,P),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,s){K(this,e,t,n,s)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)F(n[s]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)},ee.prototype.L=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};class ie extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){P.call(this),this.h=e,this.g={}}h(oe,P);var ae=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&G(e)}),e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),le(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=r.JSON.stringify,ue=r.JSON.parse,he=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function de(){}function pe(e){return e.h||(e.h=e.i())}function me(){}de.prototype.h=null;var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){R.call(this,"d")}function ye(){R.call(this,"c")}h(ge,R),h(ye,R);var ve={},we=null;function xe(){return we=we||new ee}function be(e){R.call(this,ve.La,e)}function Te(e){const t=xe();te(t,new be(t))}function Ee(e,t){R.call(this,ve.STAT_EVENT,e),this.stat=t}function Se(e){const t=xe();te(t,new Ee(t,e))}function _e(e,t){R.call(this,ve.Ma,e),this.size=t}function Ce(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ie(e,t,n,s){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<r.length;o++)r[o]=""}}}return ce(n)}catch(a){return t}}(e,n)+(s?" "+s:"")}))}ve.La="serverreachability",h(be,R),ve.STAT_EVENT="statevent",h(Ee,R),ve.Ma="timingevent",h(_e,R),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var ke,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Re(e,t,n,s){this.j=e,this.i=t,this.l=n,this.R=s||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}h(Pe,de),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},ke=new Pe;var Le={},Oe={};function Me(e,t,n){e.L=1,e.v=ct(rt(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=rt(e.v);var n=e.A,s=e.R;Array.isArray(s)||(s=[String(s)]),Tt(n.i,"t",s),e.C=0,n=e.j.J,e.h=new De,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,s=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ae[0]=r.toString()),r=ae);for(var i=0;i<r.length;i++){var o=W(n,r[i],s||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,s,r,i){e.info((function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Fe(e,t){var n=e.C,s=t.indexOf("\n",n);return-1==s?Oe:(n=Number(t.substring(n,s)),isNaN(n)?Le:(s+=1)+n>t.length?Oe:(t=t.slice(s,s+n),e.C=s+n,t))}function Be(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function qe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function ze(e){0==e.j.G||e.J||rn(e.j,e)}function He(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var s=n.Da.g.parse(t)}catch(u){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Kt(n)}en(n),Se(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&sn(n),!m(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(s=1.5*u,n.L=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=s.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Je(i,i.h),i.h=null))}if(s.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(s.ya=e,lt(s.I,s.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((s=n).qa=cn(s,s.J?s.ia:null,s.W),o.K){Ze(s.h,o);var a=o,l=s.L;l&&(a.I=l),a.B&&(qe(a),Be(a)),s.g=o}else Zt(s);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||an(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?an(n,7):Wt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Te()}catch(u){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const d=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||Te(),qe(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var s=qt(this.g);e="";var i=s.length,o=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),ze(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:!(o&&t==i-1)});s.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,s,r,i,o){e.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),He(this),ze(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Fe(this,a),e==Oe){4==d&&(this.s=4,Se(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Se(15),Ie(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),We(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,Se(11))}}else Ie(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),ze(this)}else Ie(this.i,this.l,a,null),We(this,a);4==d&&He(this),this.o&&!this.J&&(4==d?rn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<e.length;s++){if(m(e[s]))continue;var n=T(e[s]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),He(this),ze(this)}}}catch(d){}},Re.prototype.cancel=function(){this.J=!0,He(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Se(17)),He(this),this.s=2,ze(this)):$e(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}(e),s=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}for(s in t=[],n=0,e)t[n++]=e[s];return t}(e),r=s.length,o=0;o<r;o++)t.call(void 0,s[o],n&&n[o],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),ot(this,t[4]),this.l=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function rt(e){return new st(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?ft:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,ft=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),r=null;if(0<=s){var i=e[n].substring(0,s);r=e[n].substring(s+1)}else i=e[n];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xt(e,t){wt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bt(e,t){return wt(e),t=Et(e,t),e.g.has(t)}function Tt(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),d(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,s,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),s(n)}catch(i){}}function _t(){this.g=new he}function Ct(e,t,n){const s=n||"";try{tt(e,(function(e,n){let r=e;o(e)&&(r=ce(e)),t.push(s+n+"="+encodeURIComponent(r))}))}catch(BE){throw t.push(s+"type="+encodeURIComponent("_badmap")),BE}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function kt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.v=null,jt(e)}function jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rt(e,t,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Pt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Dt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){wt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,s){n.forEach((function(n){e.call(t,n,s,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const r=e[s];for(let e=0;e<r.length;e++)n.push(t[s])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)bt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,bt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const i=encodeURIComponent(String(s)),o=this.V(s);for(s=0;s<o.length;s++){var r=i;""!==o[s]&&(r+="="+encodeURIComponent(String(o[s]))),e.push(r)}}return this.i=e.join("&")},h(Nt,de),Nt.prototype.g=function(){return new It(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),h(It,ee),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jt(this)),this.g&&(this.readyState=3,jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):jt(this),3==this.readyState&&kt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Qa=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Dt,ee);var Lt=/^https?$/i,Ot=["POST","PUT"];function Mt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ft(e)}function Vt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))se(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const s=e.Z();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===s){var o=String(e.D).match(nt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),i=!Lt.test(o?o.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<$t(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Ft(e)}}}function Ft(e,t){if(e.g){Bt(e);const n=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=s}catch(BE){}}}function Bt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zt("baseRetryDelayMs",5e3,e),this.cb=zt("retryDelaySeedMs",1e4,e),this.Wa=zt("forwardChannelMaxRetries",2,e),this.wa=zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new _t,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Gt(e),3==e.G){var t=e.U++,n=rt(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Xt(e,n),(t=new Re(e,e.j,t)).L=2,t.v=ct(rt(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(s){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}ln(e)}function Kt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Gt(e){Kt(e),e.u&&(r.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||A(),I||(N(),I=!0),k.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const s=rt(e.I);lt(s,"SID",e.K),lt(s,"RID",n),lt(s,"AID",e.T),Xt(e,s),e.m&&e.o&&Rt(s,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,s,t)}function Xt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Jt(e,t,n){n=Math.min(e.i.length,n);var s=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),o=!1;else try{Ct(l,e,"req"+n+"_")}catch(i){s&&s(l)}}if(o){s=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,s}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||A(),I||(N(),I=!0),k.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),on(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=rt(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Rt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(rt(t)),n.m=null,n.P=!0,Ve(n,e)}function sn(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function rn(e,t){var n=null;if(e.g==t){sn(e),tn(e),e.g=null;var s=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),s=1}if(0!=e.G)if(t.o)if(1==s){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;te(s=xe(),new _e(s,n)),Qt(e)}else Zt(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==s&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ce(c(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==s&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),s=e.Xa;const t=!s;s=new st(s||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||it(s,"https"),ct(s),t?function(e,t){const n=new Ne;if(r.Image){const s=new Image;s.onload=u(St,n,"TestLoadImage: loaded",!0,t,s),s.onerror=u(St,n,"TestLoadImage: error",!1,t,s),s.onabort=u(St,n,"TestLoadImage: abort",!1,t,s),s.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,s),r.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=e}else t(!1)}(s.toString(),n):function(e,t){new Ne;const n=new AbortController,s=setTimeout((()=>{n.abort(),St(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(s),e.ok?St(0,0,!0,t):St(0,0,!1,t)})).catch((()=>{clearTimeout(s),St(0,0,!1,t)}))}(s.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),ln(e),Gt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var s=n instanceof st?rt(n):new st(n);if(""!=s.g)t&&(s.g=t+"."+s.g),ot(s,s.s);else{var i=r.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new st(null);s&&it(o,s),t&&(o.g=t),i&&ot(o,i),n&&(o.l=n),s=o}return n=e.D,t=e.ya,n&&t&&lt(s,n,t),lt(s,"VER",e.la),Xt(e,s),s}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new Nt({eb:n})):new Dt(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function pn(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function mn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?pe(this.o):pe(ke),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Mt(this,o)}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const e of s.keys())n.set(e,s.get(e))}s=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ot,t,void 0))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Mt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Ft(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ft(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,n,s){Se(0),this.W=e,this.H=t||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.I=cn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Re(this,this.j,e);let i=this.o;if(this.S&&(i?(i=w(i),b(i,this.S)):i=this.S),null!==this.m||this.O||(r.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(t+=s)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,r,t),lt(n=rt(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Xt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Pt(i)))+"&"+t:this.m&&Rt(n,this.m,i)),Je(this.h,r),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),r.T=!0,Me(r,n,null)):Me(r,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Qe(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Kt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),en(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new pn(e,t)},h(pn,ee),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Qt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,pn.aa.N.call(this)},h(mn,ge),h(fn,ye),h(gn,hn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new mn(e))},gn.prototype.sa=function(e){te(this.g,new fn)},gn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Km=function(){return new dn},Wm=function(){return xe()},Hm=ve,zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,qm=Ae,je.COMPLETE="complete",$m=je,me.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Bm=me,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,Fm=Dt}).apply(void 0!==Gm?Gm:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Qm="@firebase/firestore",Ym="4.7.8";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xm.UNAUTHENTICATED=new Xm(null),Xm.GOOGLE_CREDENTIALS=new Xm("google-credentials-uid"),Xm.FIRST_PARTY=new Xm("first-party-uid"),Xm.MOCK_USER=new Xm("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Jm="11.3.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new mu("@firebase/firestore");function ef(){return Zm.logLevel}function tf(e,...t){if(Zm.logLevel<=lu.DEBUG){const n=t.map(rf);Zm.debug(`Firestore (${Jm}): ${e}`,...n)}}function nf(e,...t){if(Zm.logLevel<=lu.ERROR){const n=t.map(rf);Zm.error(`Firestore (${Jm}): ${e}`,...n)}}function sf(e,...t){if(Zm.logLevel<=lu.WARN){const n=t.map(rf);Zm.warn(`Firestore (${Jm}): ${e}`,...n)}}function rf(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(e="Unexpected state"){const t=`FIRESTORE (${Jm}) INTERNAL ASSERTION FAILED: `+e;throw nf(t),new Error(t)}function af(e,t){e||of()}function lf(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class uf extends Kc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Xm.UNAUTHENTICATED)))}shutdown(){}}class mf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ff{constructor(e){this.t=e,this.currentUser=Xm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){af(void 0===this.o);let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new hf;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new hf,e.enqueueRetryable((()=>s(this.currentUser)))};const i=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await s(this.currentUser)}))},o=e=>{tf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(tf("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new hf)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(tf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(af("string"==typeof t.accessToken),new df(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return af(null===e||"string"==typeof e),new Xm(e)}}class gf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Xm.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yf{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Xm.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wf{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,fh(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){af(void 0===this.o);const n=e=>{null!=e.error&&tf("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,tf("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const s=e=>{tf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>s(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?s(e):tf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new vf(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(af("string"==typeof e.token),this.R=e.token,new vf(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=xf(40);for(let s=0;s<n.length;++s)t.length<20&&n[s]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return t}}function Tf(e,t){return e<t?-1:e>t?1:0}function Ef(e,t,n){return e.length===t.length&&e.every(((e,s)=>n(e,t[s])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=-62135596800,_f=1e6;class Cf{static now(){return Cf.fromMillis(Date.now())}static fromDate(e){return Cf.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*_f);return new Cf(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new uf(cf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new uf(cf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sf)throw new uf(cf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new uf(cf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_f}_compareTo(e){return this.seconds===e.seconds?Tf(this.nanoseconds,e.nanoseconds):Tf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Sf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static fromTimestamp(e){return new Nf(e)}static min(){return new Nf(new Cf(0,0))}static max(){return new Nf(new Cf(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="__name__";class kf{constructor(e,t,n){void 0===t?t=0:t>e.length&&of(),void 0===n?n=e.length-t:n>e.length-t&&of(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===kf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kf?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=kf.compareSegments(e.get(s),t.get(s));if(0!==n)return n}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=kf.isNumericId(e),s=kf.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?kf.extractNumericId(e).compare(kf.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mm.fromString(e.substring(4,e.length-2))}}class Af extends kf{construct(e,t,n){return new Af(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new uf(cf.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Af(t)}static emptyPath(){return new Af([])}}const jf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pf extends kf{construct(e,t,n){return new Pf(e,t,n)}static isValidIdentifier(e){return jf.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pf.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===If}static keyField(){return new Pf([If])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(0===n.length)throw new uf(cf.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new uf(cf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new uf(cf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(i=!i,s++):"."!==t||i?(n+=t,s++):(r(),s++)}if(r(),i)throw new uf(cf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pf(t)}static emptyPath(){return new Pf([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.path=e}static fromPath(e){return new Rf(Af.fromString(e))}static fromName(e){return new Rf(Af.fromString(e).popFirst(5))}static empty(){return new Rf(Af.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Af.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Af.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rf(new Af(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(e){return new Lf(e.readTime,e.key,-1)}class Lf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Lf(Nf.min(),Rf.empty(),-1)}static max(){return new Lf(Nf.max(),Rf.empty(),-1)}}function Of(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Rf.comparator(e.documentKey,t.documentKey),0!==n?n:Tf(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Mf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(e){if(e.code!==cf.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;tf("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&of(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Uf(((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Uf?t:Uf.resolve(t)}catch(t){return Uf.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Uf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Uf.reject(t)}static resolve(e){return new Uf(((t,n)=>{t(e)}))}static reject(e){return new Uf(((t,n)=>{n(e)}))}static waitFor(e){return new Uf(((t,n)=>{let s=0,r=0,i=!1;e.forEach((e=>{++s,e.next((()=>{++r,i&&r===s&&t()}),(e=>n(e)))})),i=!0,r===s&&t()}))}static or(e){let t=Uf.resolve(!1);for(const n of e)t=t.next((e=>e?Uf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,s)=>{n.push(t.call(this,e,s))})),this.waitFor(n)}static mapArray(e,t){return new Uf(((n,s)=>{const r=e.length,i=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{i[l]=e,++o,o===r&&n(i)}),(e=>s(e)))}}))}static doWhile(e,t){return new Uf(((n,s)=>{const r=()=>{!0===e()?t().next((()=>{r()}),s):n()};r()}))}}function Ff(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Bf.ae=-1;function $f(e){return null==e}function qf(e){return 0===e&&1/e==-1/0}function zf(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const t=e.charAt(r);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Hf(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.comparator=e,this.root=t||Xf.EMPTY}insert(e,t){return new Qf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xf.BLACK,null,null))}remove(e){return new Qf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xf{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:Xf.RED,this.left=null!=s?s:Xf.EMPTY,this.right=null!=r?r:Xf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new Xf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Xf.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw of();if(this.right.isRed())throw of();const e=this.left.check();if(e!==this.right.check())throw of();return e+(this.isRed()?0:1)}}Xf.EMPTY=null,Xf.RED=!0,Xf.BLACK=!1,Xf.EMPTY=new class{constructor(){this.size=0}get key(){throw of()}get value(){throw of()}get color(){throw of()}get left(){throw of()}get right(){throw of()}copy(e,t,n,s,r){return this}insert(e,t,n){return new Xf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jf{constructor(e){this.comparator=e,this.data=new Qf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(e){return new Zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Jf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jf(this.comparator);return t.data=e,t}}class Zf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.fields=e,e.sort(Pf.comparator)}static empty(){return new eg([])}unionWith(e){let t=new Jf(Pf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new eg(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ef(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new tg("Invalid base64 string: "+t):t}}(e);return new ng(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ng(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ng.EMPTY_BYTE_STRING=new ng("");const sg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rg(e){if(af(!!e),"string"==typeof e){let t=0;const n=sg.exec(e);if(af(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ig(e.seconds),nanos:ig(e.nanos)}}function ig(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function og(e){return"string"==typeof e?ng.fromBase64String(e):ng.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="server_timestamp",lg="__type__",cg="__previous_value__",ug="__local_write_time__";function hg(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[lg])||void 0===n?void 0:n.stringValue)===ag}function dg(e){const t=e.mapValue.fields[cg];return hg(t)?dg(t):t}function pg(e){const t=rg(e.mapValue.fields[ug].timestampValue);return new Cf(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,n,s,r,i,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const fg="(default)";class gg{constructor(e,t){this.projectId=e,this.database=t||fg}static empty(){return new gg("","")}get isDefaultDatabase(){return this.database===fg}isEqual(e){return e instanceof gg&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="__type__",vg="__max__",wg={fields:{__type__:{stringValue:vg}}},xg="__vector__",bg="value";function Tg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hg(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===vg}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[yg])||void 0===n?void 0:n.stringValue)===xg}(e)?10:11:of()}function Eg(e,t){if(e===t)return!0;const n=Tg(e);if(n!==Tg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pg(e).isEqual(pg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=rg(e.timestampValue),s=rg(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return s=t,og(e.bytesValue).isEqual(og(s.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ig(e.geoPointValue.latitude)===ig(t.geoPointValue.latitude)&&ig(e.geoPointValue.longitude)===ig(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ig(e.integerValue)===ig(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ig(e.doubleValue),s=ig(t.doubleValue);return n===s?qf(n)===qf(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return Ef(e.arrayValue.values||[],t.arrayValue.values||[],Eg);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(Wf(n)!==Wf(s))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===s[r]||!Eg(n[r],s[r])))return!1;return!0}(e,t);default:return of()}var s}function Sg(e,t){return void 0!==(e.values||[]).find((e=>Eg(e,t)))}function _g(e,t){if(e===t)return 0;const n=Tg(e),s=Tg(t);if(n!==s)return Tf(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ig(e.integerValue||e.doubleValue),s=ig(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return Cg(e.timestampValue,t.timestampValue);case 4:return Cg(pg(e),pg(t));case 5:return Tf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=og(e),s=og(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let r=0;r<n.length&&r<s.length;r++){const e=Tf(n[r],s[r]);if(0!==e)return e}return Tf(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Tf(ig(e.latitude),ig(t.latitude));return 0!==n?n:Tf(ig(e.longitude),ig(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ng(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,s,r,i;const o=e.fields||{},a=t.fields||{},l=null===(n=o[bg])||void 0===n?void 0:n.arrayValue,c=null===(s=a[bg])||void 0===s?void 0:s.arrayValue,u=Tf((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ng(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===wg&&t===wg)return 0;if(e===wg)return 1;if(t===wg)return-1;const n=e.fields||{},s=Object.keys(n),r=t.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let o=0;o<s.length&&o<i.length;++o){const e=Tf(s[o],i[o]);if(0!==e)return e;const t=_g(n[s[o]],r[i[o]]);if(0!==t)return t}return Tf(s.length,i.length)}(e.mapValue,t.mapValue);default:throw of()}}function Cg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Tf(e,t);const n=rg(e),s=rg(t),r=Tf(n.seconds,s.seconds);return 0!==r?r:Tf(n.nanos,s.nanos)}function Ng(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const e=_g(n[r],s[r]);if(e)return e}return Tf(n.length,s.length)}function Ig(e){return kg(e)}function kg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=rg(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?og(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Rf.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=kg(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const r of t)s?s=!1:n+=",",n+=`${r}:${kg(e.fields[r])}`;return n+"}"}(e.mapValue):of()}function Ag(e){switch(Tg(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=dg(e);return t?16+Ag(t):16;case 5:return 2*e.stringValue.length;case 6:return og(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce(((e,t)=>e+Ag(t)),0);case 10:case 11:return function(e){let t=0;return Kf(e.fields,((e,n)=>{t+=e.length+Ag(n)})),t}(e.mapValue);default:throw of()}}function jg(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Pg(e){return!!e&&"integerValue"in e}function Rg(e){return!!e&&"arrayValue"in e}function Dg(e){return!!e&&"nullValue"in e}function Lg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Og(e){return!!e&&"mapValue"in e}function Mg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Kf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Mg(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Mg(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Vg{constructor(e){this.value=e}static empty(){return new Vg({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Og(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mg(t)}setAll(e){let t=Pf.emptyPath(),n={},s=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=r.popLast()}e?n[r.lastSegment()]=Mg(e):s.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());Og(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eg(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Og(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Kf(t,((t,n)=>e[t]=n));for(const s of n)delete e[s]}clone(){return new Vg(Mg(this.value))}}function Ug(e){const t=[];return Kf(e.fields,((e,n)=>{const s=new Pf([e]);if(Og(n)){const e=Ug(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)})),new eg(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Fg{constructor(e,t,n,s,r,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Fg(e,0,Nf.min(),Nf.min(),Nf.min(),Vg.empty(),0)}static newFoundDocument(e,t,n,s){return new Fg(e,1,t,Nf.min(),n,s,0)}static newNoDocument(e,t){return new Fg(e,2,t,Nf.min(),Nf.min(),Vg.empty(),0)}static newUnknownDocument(e,t){return new Fg(e,3,t,Nf.min(),Nf.min(),Vg.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vg.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nf.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fg&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.position=e,this.inclusive=t}}function $g(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(s=i.field.isKeyField()?Rf.comparator(Rf.fromName(o.referenceValue),n.key):_g(o,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function qg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Eg(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{}class Kg extends Wg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ey(e,t,n):"array-contains"===t?new ry(e,n):"in"===t?new iy(e,n):"not-in"===t?new oy(e,n):"array-contains-any"===t?new ay(e,n):new Kg(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ty(e,n):new ny(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_g(t,this.value)):null!==t&&Tg(this.value)===Tg(t)&&this.matchesComparison(_g(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return of()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gg extends Wg{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Gg(e,t)}matches(e){return Qg(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Qg(e){return"and"===e.op}function Yg(e){return function(e){for(const t of e.filters)if(t instanceof Gg)return!1;return!0}(e)&&Qg(e)}function Xg(e){if(e instanceof Kg)return e.field.canonicalString()+e.op.toString()+Ig(e.value);if(Yg(e))return e.filters.map((e=>Xg(e))).join(",");{const t=e.filters.map((e=>Xg(e))).join(",");return`${e.op}(${t})`}}function Jg(e,t){return e instanceof Kg?(n=e,(s=t)instanceof Kg&&n.op===s.op&&n.field.isEqual(s.field)&&Eg(n.value,s.value)):e instanceof Gg?function(e,t){return t instanceof Gg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,s)=>e&&Jg(n,t.filters[s])),!0)}(e,t):void of();var n,s}function Zg(e){return e instanceof Kg?`${(t=e).field.canonicalString()} ${t.op} ${Ig(t.value)}`:e instanceof Gg?function(e){return e.op.toString()+" {"+e.getFilters().map(Zg).join(" ,")+"}"}(e):"Filter";var t}class ey extends Kg{constructor(e,t,n){super(e,t,n),this.key=Rf.fromName(n.referenceValue)}matches(e){const t=Rf.comparator(e.key,this.key);return this.matchesComparison(t)}}class ty extends Kg{constructor(e,t){super(e,"in",t),this.keys=sy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ny extends Kg{constructor(e,t){super(e,"not-in",t),this.keys=sy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Rf.fromName(e.referenceValue)))}class ry extends Kg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rg(t)&&Sg(t.arrayValue,this.value)}}class iy extends Kg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sg(this.value.arrayValue,t)}}class oy extends Kg{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sg(this.value.arrayValue,t)}}class ay extends Kg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Sg(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t=null,n=[],s=[],r=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=o,this.le=null}}function cy(e,t=null,n=[],s=[],r=null,i=null,o=null){return new ly(e,t,n,s,r,i,o)}function uy(e){const t=lf(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Xg(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>{return(t=e).field.canonicalString()+t.dir;var t})).join(","),$f(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ig(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ig(e))).join(",")),t.le=e}return t.le}function hy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Hg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Jg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qg(e.startAt,t.startAt)&&qg(e.endAt,t.endAt)}function dy(e){return Rf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t=null,n=[],s=[],r=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function my(e){return new py(e)}function fy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gy(e){return null!==e.collectionGroup}function yy(e){const t=lf(e);if(null===t.he){t.he=[];const e=new Set;for(const s of t.explicitOrderBy)t.he.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Jf(Pf.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((s=>{e.has(s.canonicalString())||s.isKeyField()||t.he.push(new zg(s,n))})),e.has(Pf.keyField().canonicalString())||t.he.push(new zg(Pf.keyField(),n))}return t.he}function vy(e){const t=lf(e);return t.Pe||(t.Pe=function(e,t){if("F"===e.limitType)return cy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new zg(e.field,t)}));const n=e.endAt?new Bg(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Bg(e.startAt.position,e.startAt.inclusive):null;return cy(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}(t,yy(e))),t.Pe}function wy(e,t){const n=e.filters.concat([t]);return new py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xy(e,t,n){return new py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function by(e,t){return hy(vy(e),vy(t))&&e.limitType===t.limitType}function Ty(e){return`${uy(vy(e))}|lt:${e.limitType}`}function Ey(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Zg(e))).join(", ")}]`),$f(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t})).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ig(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ig(e))).join(",")),`Target(${t})`}(vy(e))}; limitType=${e.limitType})`}function Sy(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of yy(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(s=t,!((n=e).startAt&&!function(e,t,n){const s=$g(e,t,n);return e.inclusive?s<=0:s<0}(n.startAt,yy(n),s)||n.endAt&&!function(e,t,n){const s=$g(e,t,n);return e.inclusive?s>=0:s>0}(n.endAt,yy(n),s)));var n,s}function _y(e){return(t,n)=>{let s=!1;for(const r of yy(e)){const e=Cy(r,t,n);if(0!==e)return e;s=s||r.field.isKeyField()}return 0}}function Cy(e,t,n){const s=e.field.isKeyField()?Rf.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),r=n.data.field(e);return null!==s&&null!==r?_g(s,r):of()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return of()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,r]of n)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Kf(this.inner,((t,n)=>{for(const[s,r]of n)e(s,r)}))}isEmpty(){return Gf(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Qf(Rf.comparator);function ky(){return Iy}const Ay=new Qf(Rf.comparator);function jy(...e){let t=Ay;for(const n of e)t=t.insert(n.key,n);return t}function Py(e){let t=Ay;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ry(){return Ly()}function Dy(){return Ly()}function Ly(){return new Ny((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Oy=new Qf(Rf.comparator),My=new Jf(Rf.comparator);function Vy(...e){let t=My;for(const n of e)t=t.add(n);return t}const Uy=new Jf(Tf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(t)?"-0":t}}function By(e){return{integerValue:""+e}}function $y(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!qf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?By(t):Fy(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this._=void 0}}function zy(e,t,n){return e instanceof Ky?function(e,t){const n={fields:{[lg]:{stringValue:ag},[ug]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&hg(t)&&(t=dg(t)),t&&(n.fields[cg]=t),{mapValue:n}}(n,t):e instanceof Gy?Qy(e,t):e instanceof Yy?Xy(e,t):function(e,t){const n=Wy(e,t),s=Zy(n)+Zy(e.Ie);return Pg(n)&&Pg(e.Ie)?By(s):Fy(e.serializer,s)}(e,t)}function Hy(e,t,n){return e instanceof Gy?Qy(e,t):e instanceof Yy?Xy(e,t):n}function Wy(e,t){return e instanceof Jy?Pg(n=t)||(s=n)&&"doubleValue"in s?t:{integerValue:0}:null;var n,s}class Ky extends qy{}class Gy extends qy{constructor(e){super(),this.elements=e}}function Qy(e,t){const n=ev(t);for(const s of e.elements)n.some((e=>Eg(e,s)))||n.push(s);return{arrayValue:{values:n}}}class Yy extends qy{constructor(e){super(),this.elements=e}}function Xy(e,t){let n=ev(t);for(const s of e.elements)n=n.filter((e=>!Eg(e,s)));return{arrayValue:{values:n}}}class Jy extends qy{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Zy(e){return ig(e.integerValue||e.doubleValue)}function ev(e){return Rg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class tv{constructor(e,t){this.version=e,this.transformResults=t}}class nv{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nv}static exists(e){return new nv(void 0,e)}static updateTime(e){return new nv(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class rv{}function iv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fv(e.key,nv.none()):new uv(e.key,e.data,nv.none());{const n=e.data,s=Vg.empty();let r=new Jf(Pf.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),r=r.add(e)}return new hv(e.key,s,new eg(r.toArray()),nv.none())}}function ov(e,t,n){var s;e instanceof uv?function(e,t,n){const s=e.value.clone(),r=pv(e.fieldTransforms,t,n.transformResults);s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof hv?function(e,t,n){if(!sv(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=pv(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(dv(e)),r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(s=n,t.convertToNoDocument(s.version).setHasCommittedMutations())}function av(e,t,n,s){return e instanceof uv?function(e,t,n,s){if(!sv(e.precondition,t))return n;const r=e.value.clone(),i=mv(e.fieldTransforms,s,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,s):e instanceof hv?function(e,t,n,s){if(!sv(e.precondition,t))return n;const r=mv(e.fieldTransforms,s,t),i=t.data;return i.setAll(dv(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,s):(r=t,i=n,sv(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function lv(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),r=Wy(s.transform,e||null);null!=r&&(null===n&&(n=Vg.empty()),n.set(s.field,r))}return n||null}function cv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,s=t.fieldTransforms,!!(void 0===n&&void 0===s||n&&s&&Ef(n,s,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,s=t.transform,n instanceof Gy&&s instanceof Gy||n instanceof Yy&&s instanceof Yy?Ef(n.elements,s.elements,Eg):n instanceof Jy&&s instanceof Jy?Eg(n.Ie,s.Ie):n instanceof Ky&&s instanceof Ky);var n,s}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,s}class uv extends rv{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hv extends rv{constructor(e,t,n,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function dv(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function pv(e,t,n){const s=new Map;af(e.length===n.length);for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,a=t.data.field(i.field);s.set(i.field,Hy(o,a,n[r]))}return s}function mv(e,t,n){const s=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);s.set(r.field,zy(e,i,t))}return s}class fv extends rv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gv extends rv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&ov(t,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=av(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=av(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Dy();return this.mutations.forEach((s=>{const r=e.get(s.key),i=r.overlayedDocument;let o=this.applyToLocalView(i,r.mutatedFields);o=t.has(s.key)?null:o;const a=iv(i,o);null!==a&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Nf.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Vy())}isEqual(e){return this.batchId===e.batchId&&Ef(this.mutations,e.mutations,((e,t)=>cv(e,t)))&&Ef(this.baseMutations,e.baseMutations,((e,t)=>cv(e,t)))}}class vv{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){af(e.mutations.length===n.length);let s=function(){return Oy}();const r=e.mutations;for(let i=0;i<r.length;i++)s=s.insert(r[i].key,n[i].version);return new vv(e,t,n,s)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bv,Tv;function Ev(e){if(void 0===e)return nf("GRPC error has no .code"),cf.UNKNOWN;switch(e){case bv.OK:return cf.OK;case bv.CANCELLED:return cf.CANCELLED;case bv.UNKNOWN:return cf.UNKNOWN;case bv.DEADLINE_EXCEEDED:return cf.DEADLINE_EXCEEDED;case bv.RESOURCE_EXHAUSTED:return cf.RESOURCE_EXHAUSTED;case bv.INTERNAL:return cf.INTERNAL;case bv.UNAVAILABLE:return cf.UNAVAILABLE;case bv.UNAUTHENTICATED:return cf.UNAUTHENTICATED;case bv.INVALID_ARGUMENT:return cf.INVALID_ARGUMENT;case bv.NOT_FOUND:return cf.NOT_FOUND;case bv.ALREADY_EXISTS:return cf.ALREADY_EXISTS;case bv.PERMISSION_DENIED:return cf.PERMISSION_DENIED;case bv.FAILED_PRECONDITION:return cf.FAILED_PRECONDITION;case bv.ABORTED:return cf.ABORTED;case bv.OUT_OF_RANGE:return cf.OUT_OF_RANGE;case bv.UNIMPLEMENTED:return cf.UNIMPLEMENTED;case bv.DATA_LOSS:return cf.DATA_LOSS;default:return of()}}(Tv=bv||(bv={}))[Tv.OK=0]="OK",Tv[Tv.CANCELLED=1]="CANCELLED",Tv[Tv.UNKNOWN=2]="UNKNOWN",Tv[Tv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tv[Tv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tv[Tv.NOT_FOUND=5]="NOT_FOUND",Tv[Tv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tv[Tv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tv[Tv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tv[Tv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tv[Tv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tv[Tv.ABORTED=10]="ABORTED",Tv[Tv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tv[Tv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tv[Tv.INTERNAL=13]="INTERNAL",Tv[Tv.UNAVAILABLE=14]="UNAVAILABLE",Tv[Tv.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sv=new Mm([4294967295,4294967295],0);function _v(e){const t=(new TextEncoder).encode(e),n=new Vm;return n.update(t),new Uint8Array(n.digest())}function Cv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Mm([n,s],0),new Mm([r,i],0)]}class Nv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Iv(`Invalid padding: ${t}`);if(n<0)throw new Iv(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Iv(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Iv(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Mm.fromNumber(this.Ee)}Ae(e,t,n){let s=e.add(t.multiply(Mm.fromNumber(n)));return 1===s.compare(Sv)&&(s=new Mm([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=_v(e),[n,s]=Cv(t);for(let r=0;r<this.hashCount;r++){const e=this.Ae(n,s,r);if(!this.Re(e))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new Nv(r,s,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.Ee)return;const t=_v(e),[n,s]=Cv(t);for(let r=0;r<this.hashCount;r++){const e=this.Ae(n,s,r);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Iv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Av.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new kv(Nf.min(),s,new Qf(Tf),ky(),Vy())}}class Av{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Av(n,t,Vy(),Vy(),Vy())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,n,s){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=s}}class Pv{constructor(e,t){this.targetId=e,this.ge=t}}class Rv{constructor(e,t,n=ng.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Dv{constructor(){this.pe=0,this.ye=Mv(),this.we=ng.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Vy(),t=Vy(),n=Vy();return this.ye.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:of()}})),new Av(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=Mv()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,af(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Lv{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ky(),this.$e=Ov(),this.Ke=Ov(),this.Ue=new Qf(Tf)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:of()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,s=this.Xe(t);if(s){const r=s.target;if(dy(r))if(0===n){const e=new Rf(r.path);this.ze(t,e,Fg.newNoDocument(e,Nf.min()))}else af(1===n);else{const s=this.et(t);if(s!==n){const n=this.tt(e),r=n?this.nt(n,e,s):1;if(0!==r){this.Ye(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,e)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=t;let i,o;try{i=og(n).toUint8Array()}catch(a){if(a instanceof tg)return sf("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Nv(i,s,r)}catch(a){return sf(a instanceof Iv?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let s=0;return n.forEach((n=>{const r=this.ke.it(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.ze(t,n,null),s++)})),s}ot(e){const t=new Map;this.qe.forEach(((n,s)=>{const r=this.Xe(s);if(r){if(n.current&&dy(r.target)){const t=new Rf(r.target.path);this._t(t).has(s)||this.ut(s,t)||this.ze(s,t,Fg.newNoDocument(t,e))}n.ve&&(t.set(s,n.Fe()),n.Me())}}));let n=Vy();this.Ke.forEach(((e,t)=>{let s=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(s=!1,!1)})),s&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const s=new kv(e,t,this.Ue,this.Qe,n);return this.Qe=ky(),this.$e=Ov(),this.Ke=Ov(),this.Ue=new Qf(Tf),s}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Dv,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Jf(Tf),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Jf(Tf),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||tf("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Dv),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Ov(){return new Qf(Rf.comparator)}function Mv(){return new Qf(Rf.comparator)}const Vv=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Uv=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Fv=(()=>({and:"AND",or:"OR"}))();class Bv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $v(e,t){return e.useProto3Json||$f(t)?t:{value:t}}function qv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hv(e,t){return qv(e,t.toTimestamp())}function Wv(e){return af(!!e),Nf.fromTimestamp(function(e){const t=rg(e);return new Cf(t.seconds,t.nanos)}(e))}function Kv(e,t){return Gv(e,t).canonicalString()}function Gv(e,t){const n=(s=e,new Af(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===t?n:n.child(t)}function Qv(e){const t=Af.fromString(e);return af(pw(t)),t}function Yv(e,t){return Kv(e.databaseId,t.path)}function Xv(e,t){const n=Qv(t);if(n.get(1)!==e.databaseId.projectId)throw new uf(cf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uf(cf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rf(ew(n))}function Jv(e,t){return Kv(e.databaseId,t)}function Zv(e){return new Af(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ew(e){return af(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tw(e,t,n){return{name:Yv(e,t),fields:n.value.mapValue.fields}}function nw(e,t){return{documents:[Jv(e,t.path)]}}function sw(e,t){const n={structuredQuery:{}},s=t.path;let r;null!==t.collectionGroup?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Jv(e,r);const i=function(e){if(0!==e.length)return hw(Gg.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>{return{field:cw((t=e).field),direction:ow(t.dir)};var t}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$v(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:r};var l}function rw(e){let t=function(e){const t=Qv(e);return 4===t.length?Af.emptyPath():ew(t)}(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){af(1===s);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=iw(e);return t instanceof Gg&&Yg(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>{return new zg(uw((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,$f(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bg(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Bg(n,t)}(n.endAt)),function(e,t,n,s,r,i,o,a){return new py(e,t,n,s,r,i,o,a)}(t,r,o,i,a,"F",l,c)}function iw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=uw(e.unaryFilter.field);return Kg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=uw(e.unaryFilter.field);return Kg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=uw(e.unaryFilter.field);return Kg.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=uw(e.unaryFilter.field);return Kg.create(r,"!=",{nullValue:"NULL_VALUE"});default:return of()}}(e):void 0!==e.fieldFilter?(t=e,Kg.create(uw(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return of()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Gg.create(e.compositeFilter.filters.map((e=>iw(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return of()}}(e.compositeFilter.op))}(e):of();var t}function ow(e){return Vv[e]}function aw(e){return Uv[e]}function lw(e){return Fv[e]}function cw(e){return{fieldPath:e.canonicalString()}}function uw(e){return Pf.fromServerFormat(e.fieldPath)}function hw(e){return e instanceof Kg?function(e){if("=="===e.op){if(Lg(e.value))return{unaryFilter:{field:cw(e.field),op:"IS_NAN"}};if(Dg(e.value))return{unaryFilter:{field:cw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lg(e.value))return{unaryFilter:{field:cw(e.field),op:"IS_NOT_NAN"}};if(Dg(e.value))return{unaryFilter:{field:cw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cw(e.field),op:aw(e.op),value:e.value}}}(e):e instanceof Gg?function(e){const t=e.getFilters().map((e=>hw(e)));return 1===t.length?t[0]:{compositeFilter:{op:lw(e.op),filters:t}}}(e):of()}function dw(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,n,s,r=Nf.min(),i=Nf.min(),o=ng.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new mw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.Tt=e}}function gw(e){const t=rw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xy(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.Tn=new vw}addToCollectionParentIndex(e,t){return this.Tn.add(t),Uf.resolve()}getCollectionParents(e,t){return Uf.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Uf.resolve()}deleteFieldIndex(e,t){return Uf.resolve()}deleteAllFieldIndexes(e){return Uf.resolve()}createTargetIndexes(e,t){return Uf.resolve()}getDocumentsMatchingTarget(e,t){return Uf.resolve(null)}getIndexType(e,t){return Uf.resolve(0)}getFieldIndexes(e,t){return Uf.resolve([])}getNextCollectionGroupToUpdate(e){return Uf.resolve(null)}getMinOffset(e,t){return Uf.resolve(Lf.min())}getMinOffsetFromCollectionGroup(e,t){return Uf.resolve(Lf.min())}updateCollectionGroup(e,t,n){return Uf.resolve()}updateIndexEntries(e,t){return Uf.resolve()}}class vw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Jf(Af.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Jf(Af.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xw=41943040;class bw{static withCacheSize(e){return new bw(e,bw.DEFAULT_COLLECTION_PERCENTILE,bw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bw.DEFAULT_COLLECTION_PERCENTILE=10,bw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bw.DEFAULT=new bw(xw,bw.DEFAULT_COLLECTION_PERCENTILE,bw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bw.DISABLED=new bw(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tw{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Tw(0)}static Un(){return new Tw(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="LruGarbageCollector";function Sw([e,t],[n,s]){const r=Tf(e,n);return 0===r?Tf(t,s):r}class _w{constructor(e){this.Hn=e,this.buffer=new Jf(Sw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Sw(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cw{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){tf(Ew,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ff(e)?tf(Ew,"Ignoring IndexedDB error during garbage collection: ",e):await Vf(e)}await this.er(3e5)}))}}class Nw{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Uf.resolve(Bf.ae);const n=new _w(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tf("LruGarbageCollector","Garbage collection skipped; disabled"),Uf.resolve(ww)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(tf("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ww):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,s,r,i,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(tf("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),s=this.params.maximumSequenceNumbersToCollect):s=t,i=Date.now(),this.nthSequenceNumber(e,s)))).next((s=>(n=s,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ef()<=lu.DEBUG&&tf("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${s} in `+(o-i)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(l-a)+`ms\nTotal Duration: ${l-c}ms`),Uf.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:e}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Iw{constructor(){this.changes=new Ny((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Uf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&av(n.mutation,e,eg.empty(),Cf.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Vy()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Vy()){const s=Ry();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((e=>{let t=jy();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ry();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Vy())))}populateOverlays(e,t,n){const s=[];return n.forEach((e=>{t.has(e)||s.push(e)})),this.documentOverlayCache.getOverlays(e,s).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,s){let r=ky();const i=Ly(),o=Ly();return t.forEach(((e,t)=>{const o=n.get(t.key);s.has(t.key)&&(void 0===o||o.mutation instanceof hv)?r=r.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),av(o.mutation,t,o.mutation.getFieldMask(),Cf.now())):i.set(t.key,eg.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new kw(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ly();let s=new Qf(((e,t)=>e-t)),r=Vy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||eg.empty();o=r.applyToLocalView(i,o),n.set(e,o);const a=(s.get(r.batchId)||Vy()).add(e);s=s.insert(r.batchId,a)}))})).next((()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),a=s.key,l=s.value,c=Dy();l.forEach((e=>{if(!r.has(e)){const s=iv(t.get(e),n.get(e));null!==s&&c.set(e,s),r=r.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Uf.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,s){return r=t,Rf.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s);var r}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-r.size):Uf.resolve(Ry());let o=-1,a=r;return i.next((t=>Uf.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?Uf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,Vy()))).next((e=>({batchId:o,changes:Py(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Rf(t)).next((e=>{let t=jy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const r=t.collectionGroup;let i=jy();return this.indexManager.getCollectionParents(e,r).next((o=>Uf.forEach(o,(o=>{const a=(l=t,c=o.child(r),new py(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,a,n,s).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,s)))).next((e=>{r.forEach(((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,Fg.newInvalidDocument(s)))}));let n=jy();return e.forEach(((e,s)=>{const i=r.get(e);void 0!==i&&av(i.mutation,s,eg.empty(),Cf.now()),Sy(t,s)&&(n=n.insert(e,s))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Uf.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,{id:(n=t).id,version:n.version,createTime:Wv(n.createTime)}),Uf.resolve();var n}getNamedQuery(e,t){return Uf.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,{name:(n=t).name,query:gw(n.bundledQuery),readTime:Wv(n.readTime)}),Uf.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.overlays=new Qf(Rf.comparator),this.Rr=new Map}getOverlay(e,t){return Uf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ry();return Uf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,s)=>{this.Et(e,t,s)})),Uf.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Rr.get(n);return void 0!==s&&(s.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),Uf.resolve()}getOverlaysForCollection(e,t,n){const s=Ry(),r=t.length+1,i=new Rf(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&s.set(e.getKey(),e)}return Uf.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new Qf(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Ry(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ry(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=s)););return Uf.resolve(o)}Et(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new wv(t,n));let r=this.Rr.get(t);void 0===r&&(r=Vy(),this.Rr.set(t,r)),this.Rr.set(t,r.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.sessionToken=ng.EMPTY_BYTE_STRING}getSessionToken(e){return Uf.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Uf.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.Vr=new Jf(Lw.mr),this.gr=new Jf(Lw.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Lw(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new Lw(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new Rf(new Af([])),n=new Lw(t,e),s=new Lw(t,e+1),r=[];return this.gr.forEachInRange([n,s],(e=>{this.wr(e),r.push(e.key)})),r}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Rf(new Af([])),n=new Lw(t,e),s=new Lw(t,e+1);let r=Vy();return this.gr.forEachInRange([n,s],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Lw(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Lw{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Rf.comparator(e.key,t.key)||Tf(e.Cr,t.Cr)}static pr(e,t){return Tf(e.Cr,t.Cr)||Rf.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Jf(Lw.mr)}checkEmpty(e){return Uf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new yv(r,t,n,s);this.mutationQueue.push(i);for(const o of s)this.Mr=this.Mr.add(new Lw(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Uf.resolve(i)}lookupMutationBatch(e,t){return Uf.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Nr(n),r=s<0?0:s;return Uf.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Uf.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(e){return Uf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Lw(t,0),s=new Lw(t,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([n,s],(e=>{const t=this.Or(e.Cr);r.push(t)})),Uf.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jf(Tf);return t.forEach((e=>{const t=new Lw(e,0),s=new Lw(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,s],(e=>{n=n.add(e.Cr)}))})),Uf.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;Rf.isDocumentKey(r)||(r=r.child(""));const i=new Lw(new Rf(r),0);let o=new Jf(Tf);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(o=o.add(e.Cr)),!0)}),i),Uf.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){af(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Uf.forEach(t.mutations,(s=>{const r=new Lw(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new Lw(t,0),s=this.Mr.firstAfterOrEqual(n);return Uf.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Uf.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.kr=e,this.docs=new Qf(Rf.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,i=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Uf.resolve(n?n.document.mutableCopy():Fg.newInvalidDocument(t))}getEntries(e,t){let n=ky();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Fg.newInvalidDocument(e))})),Uf.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let r=ky();const i=t.path,o=new Rf(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Of(Df(o),n)<=0||(s.has(o.key)||Sy(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Uf.resolve(r)}getAllFromCollectionGroup(e,t,n,s){of()}qr(e,t){return Uf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Vw(this)}getSize(e){return Uf.resolve(this.size)}}class Vw extends Iw{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)})),Uf.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.persistence=e,this.Qr=new Ny((e=>uy(e)),hy),this.lastRemoteSnapshotVersion=Nf.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Dw,this.targetCount=0,this.Ur=Tw.Kn()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),Uf.resolve()}getLastRemoteSnapshotVersion(e){return Uf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Uf.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Uf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Uf.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Tw(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Uf.resolve()}updateTargetData(e,t){return this.zn(t),Uf.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Uf.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.Qr.forEach(((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(i),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),Uf.waitFor(r).next((()=>s))}getTargetCount(e){return Uf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Uf.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),Uf.resolve()}removeMatchingKeys(e,t,n){this.Kr.Sr(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach((t=>{r.push(s.markPotentiallyOrphaned(e,t))})),Uf.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Uf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return Uf.resolve(n)}containsKey(e,t){return Uf.resolve(this.Kr.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Bf(0),this.zr=!1,this.zr=!0,this.jr=new Rw,this.referenceDelegate=e(this),this.Hr=new Uw(this),this.indexManager=new yw,this.remoteDocumentCache=new Mw((e=>this.referenceDelegate.Jr(e))),this.serializer=new fw(t),this.Yr=new jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Ow(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){tf("MemoryPersistence","Starting transaction:",e);const s=new Bw(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next((e=>this.referenceDelegate.Xr(s).next((()=>e)))).toPromise().then((e=>(s.raiseOnCommittedEvent(),e)))}ei(e,t){return Uf.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Bw extends Mf{constructor(e){super(),this.currentSequenceNumber=e}}class $w{constructor(e){this.persistence=e,this.ti=new Dw,this.ni=null}static ri(e){return new $w(e)}get ii(){if(this.ni)return this.ni;throw of()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Uf.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Uf.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Uf.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Uf.forEach(this.ii,(n=>{const s=Rf.fromPath(n);return this.si(e,s).next((e=>{e||t.removeEntry(s,Nf.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return Uf.or([()=>Uf.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class qw{constructor(e,t){this.persistence=e,this.oi=new Ny((e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Hf(t)),t=zf(e.get(n),t);return Hf(t)}(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=function(e,t){return new Nw(e,t)}(this,t)}static ri(e,t){return new qw(e,t)}Zr(){}Xr(e){return Uf.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return Uf.forEach(this.oi,((n,s)=>this.ar(e,n,s).next((e=>e?Uf.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(e,(s=>this.ar(e,s,t).next((e=>{e||(n++,r.removeEntry(s,Nf.min()))})))).next((()=>r.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Uf.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Uf.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Uf.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Uf.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ag(e.data.value)),t}ar(e,t,n){return Uf.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return Uf.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=s}static Yi(e,t){let n=Vy(),s=Vy();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new zw(e,t.fromCache,n,s)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Wc()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Hc())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,s){const r={result:null};return this.rs(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.ss(e,t,s,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new Hw;return this._s(e,t,n).next((s=>{if(r.result=s,this.Xi)return this.us(e,t,n,s.size)}))})).next((()=>r.result))}us(e,t,n,s){return n.documentReadCount<this.es?(ef()<=lu.DEBUG&&tf("QueryEngine","SDK will not create cache indexes for query:",Ey(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Uf.resolve()):(ef()<=lu.DEBUG&&tf("QueryEngine","Query:",Ey(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(ef()<=lu.DEBUG&&tf("QueryEngine","The SDK decides to create cache indexes for query:",Ey(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vy(t))):Uf.resolve())}rs(e,t){if(fy(t))return Uf.resolve(null);let n=vy(t);return this.indexManager.getIndexType(e,n).next((s=>0===s?null:(null!==t.limit&&1===s&&(t=xy(t,null,"F"),n=vy(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const r=Vy(...s);return this.ns.getDocuments(e,r).next((s=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.cs(t,s);return this.ls(t,i,r,n.readTime)?this.rs(e,xy(t,null,"F")):this.hs(e,i,t,n)}))))})))))}ss(e,t,n,s){return fy(t)||s.isEqual(Nf.min())?Uf.resolve(null):this.ns.getDocuments(e,n).next((r=>{const i=this.cs(t,r);return this.ls(t,i,n,s)?Uf.resolve(null):(ef()<=lu.DEBUG&&tf("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ey(t)),this.hs(e,i,t,function(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=Nf.fromTimestamp(1e9===s?new Cf(n+1,0):new Cf(n,s));return new Lf(r,Rf.empty(),t)}(s,-1)).next((e=>e)))}))}cs(e,t){let n=new Jf(_y(e));return t.forEach(((t,s)=>{Sy(e,s)&&(n=n.add(s))})),n}ls(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(e,t,n){return ef()<=lu.DEBUG&&tf("QueryEngine","Using full collection scan to execute query:",Ey(t)),this.ns.getDocumentsMatchingQuery(e,t,Lf.min(),n)}hs(e,t,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="LocalStore";class Gw{constructor(e,t,n,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Qf(Tf),this.Is=new Ny((e=>uy(e)),hy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Aw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}async function Qw(e,t){const n=lf(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next((r=>(s=r,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],i=[];let o=Vy();for(const e of s){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:r,addedBatchIds:i})))}))}))}function Yw(e){const t=lf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Xw(e,t){const n=lf(e),s=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const o=[];t.targetChanges.forEach(((i,a)=>{const l=r.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,i.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,i.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ng.EMPTY_BYTE_STRING,Nf.min()).withLastLimboFreeSnapshotVersion(Nf.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,s)),r=r.insert(a,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&o.push(n.Hr.updateTargetData(e,c))}));let a=ky(),l=Vy();if(t.documentUpdates.forEach((s=>{t.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))})),o.push(function(e,t,n){let s=Vy(),r=Vy();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=ky();return n.forEach(((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(Nf.min())?(t.removeEntry(n,i.readTime),s=s.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),s=s.insert(n,i)):tf(Kw,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{Vs:s,fs:r}}))}(e,i,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!s.isEqual(Nf.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,s)));o.push(t)}return Uf.waitFor(o).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=r,e)))}function Jw(e,t){const n=lf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function Zw(e,t,n){const s=lf(e),r=s.Ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(e=>s.persistence.referenceDelegate.removeTarget(e,r)))}catch(o){if(!Ff(o))throw o;tf(Kw,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function ex(e,t,n){const s=lf(e);let r=Nf.min(),i=Vy();return s.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const s=lf(e),r=s.Is.get(n);return void 0!==r?Uf.resolve(s.Ts.get(r)):s.Hr.getTargetData(t,n)}(s,e,vy(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>s.Ps.getDocumentsMatchingQuery(e,t,n?r:Nf.min(),n?i:Vy()))).next((e=>(function(e,t,n){let s=e.Es.get(t)||Nf.min();n.forEach(((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)})),e.Es.set(t,s)}(s,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,gs:i})))))}class tx{constructor(){this.activeTargetIds=Uy}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nx{constructor(){this.ho=new tx,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new tx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{To(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="ConnectivityMonitor";class ix{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){tf(rx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){tf(rx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ox=null;function ax(){return null===ox?ox=268435456+Math.round(2147483648*Math.random()):ox++,"0x"+ox.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const lx="RestConnection",cx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ux{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===fg?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,t,n,s,r){const i=ax(),o=this.bo(e,t.toUriEncodedString());tf(lx,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,s,r),this.vo(e,o,a,n).then((t=>(tf(lx,`Received RPC '${e}' ${i}: `,t),t)),(t=>{throw sf(lx,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,s,r,i){return this.So(e,t,n,s,r)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=cx[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="WebChannelConnection";class px extends ux{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,s){const r=ax();return new Promise(((i,o)=>{const a=new Fm;a.setWithCredentials(!0),a.listenOnce($m.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case qm.NO_ERROR:const t=a.getResponseJson();tf(dx,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),i(t);break;case qm.TIMEOUT:tf(dx,`RPC '${e}' ${r} timed out`),o(new uf(cf.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const n=a.getStatus();if(tf(dx,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(cf).indexOf(t)>=0?t:cf.UNKNOWN}(t.status);o(new uf(e,t.message))}else o(new uf(cf.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new uf(cf.UNAVAILABLE,"Connection failed."));break;default:of()}}finally{tf(dx,`RPC '${e}' ${r} completed.`)}}));const l=JSON.stringify(s);tf(dx,`RPC '${e}' ${r} sending request:`,s),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const s=ax(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Km(),o=Wm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");tf(dx,`Creating RPC '${e}' stream ${s}: ${c}`,a);const u=i.createWebChannel(c,a);let h=!1,d=!1;const p=new hx({Fo:t=>{d?tf(dx,`Not sending because RPC '${e}' stream ${s} is closed:`,t):(h||(tf(dx,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),tf(dx,`RPC '${e}' stream ${s} sending:`,t),u.send(t))},Mo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(t){setTimeout((()=>{throw t}),0)}}))};return m(u,Bm.EventType.OPEN,(()=>{d||(tf(dx,`RPC '${e}' stream ${s} transport opened.`),p.Qo())})),m(u,Bm.EventType.CLOSE,(()=>{d||(d=!0,tf(dx,`RPC '${e}' stream ${s} transport closed`),p.Ko())})),m(u,Bm.EventType.ERROR,(t=>{d||(d=!0,sf(dx,`RPC '${e}' stream ${s} transport errored:`,t),p.Ko(new uf(cf.UNAVAILABLE,"The operation could not be completed")))})),m(u,Bm.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];af(!!r);const i=r,o=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){tf(dx,`RPC '${e}' stream ${s} received error:`,o);const t=o.status;let n=function(e){const t=bv[e];if(void 0!==t)return Ev(t)}(t),r=o.message;void 0===n&&(n=cf.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,p.Ko(new uf(n,r)),u.close()}else tf(dx,`RPC '${e}' stream ${s} received:`,r),p.Uo(r)}})),m(o,Hm.STAT_EVENT,(t=>{t.stat===zm.PROXY?tf(dx,`RPC '${e}' stream ${s} detected buffering proxy`):t.stat===zm.NOPROXY&&tf(dx,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function mx(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(e){return new Bv(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t,n=1e3,s=1.5,r=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-n);s>0&&tf("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="PersistentStream";class vx{constructor(e,t,n,s,r,i,o,a){this.Ti=e,this.n_=n,this.r_=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gx(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===cf.RESOURCE_EXHAUSTED?(nf(t.toString()),nf("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===cf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.i_===t&&this.V_(e,n)}),(t=>{e((()=>{const e=new uf(cf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return tf(yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(tf(yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wx extends vx{constructor(e,t,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(s=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===s?1:"REMOVE"===s?2:"CURRENT"===s?3:"RESET"===s?4:of(),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(af(void 0===t||"string"==typeof t),ng.fromBase64String(t||"")):(af(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ng.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(e){const t=void 0===e.code?cf.UNKNOWN:Ev(e.code);return new uf(t,e.message||"")}(a);n=new Rv(r,i,o,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Xv(e,s.document.name),i=Wv(s.document.updateTime),o=s.document.createTime?Wv(s.document.createTime):Nf.min(),a=new Vg({mapValue:{fields:s.document.fields}}),l=Fg.newFoundDocument(r,i,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new jv(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Xv(e,s.document),i=s.readTime?Wv(s.readTime):Nf.min(),o=Fg.newNoDocument(r,i),a=s.removedTargetIds||[];n=new jv([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Xv(e,s.document),i=s.removedTargetIds||[];n=new jv([],i,r,null)}else{if(!("filter"in t))return of();{t.filter;const e=t.filter;e.targetId;const{count:s=0,unchangedNames:r}=e,i=new xv(s,r),o=e.targetId;n=new Pv(o,i)}}var s;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Nf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Nf.min():t.readTime?Wv(t.readTime):Nf.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Zv(this.serializer),t.addTarget=function(e,t){let n;const s=t.target;if(n=dy(s)?{documents:nw(e,s)}:{query:sw(e,s).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=zv(e,t.resumeToken);const s=$v(e,t.expectedCount);null!==s&&(n.expectedCount=s)}else if(t.snapshotVersion.compareTo(Nf.min())>0){n.readTime=qv(e,t.snapshotVersion.toTimestamp());const s=$v(e,t.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return of()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Zv(this.serializer),t.removeTarget=e,this.I_(t)}}class xx extends vx{constructor(e,t,n,s,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return af(!!e.streamToken),this.lastStreamToken=e.streamToken,af(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){af(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(af(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Wv(e.updateTime):Wv(t);return n.isEqual(Nf.min())&&(n=Wv(t)),new tv(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Wv(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Zv(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof uv)n={update:tw(e,t.key,t.value)};else if(t instanceof fv)n={delete:Yv(e,t.key)};else if(t instanceof hv)n={update:tw(e,t.key,t.data),updateMask:dw(t.fieldMask)};else{if(!(t instanceof gv))return of();n={verify:Yv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ky)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jy)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw of()}(0,e)))),t.precondition.isNone||(n.currentDocument=(s=e,void 0!==(r=t.precondition).updateTime?{updateTime:Hv(s,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:of())),n;var s,r}(this.serializer,e)))};this.I_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{}class Tx extends bx{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new uf(cf.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.So(e,Gv(t,n),s,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===cf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new uf(cf.UNKNOWN,e.toString())}))}Co(e,t,n,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Co(e,Gv(t,n),s,i,o,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===cf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new uf(cf.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Ex{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(nf(t),this.N_=!1):tf("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="RemoteStore";class _x{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To((e=>{n.enqueueAndForget((async()=>{Dx(this)&&(tf(Sx,"Restarting streams for network reachability change."),await async function(e){const t=lf(e);t.W_.add(4),await Nx(t),t.j_.set("Unknown"),t.W_.delete(4),await Cx(t)}(this))}))})),this.j_=new Ex(n,s)}}async function Cx(e){if(Dx(e))for(const t of e.G_)await t(!0)}async function Nx(e){for(const t of e.G_)await t(!1)}function Ix(e,t){const n=lf(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),Rx(n)?Px(n):Jx(n).c_()&&Ax(n,t))}function kx(e,t){const n=lf(e),s=Jx(n);n.U_.delete(t),s.c_()&&jx(n,t),0===n.U_.size&&(s.c_()?s.P_():Dx(n)&&n.j_.set("Unknown"))}function Ax(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nf.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jx(e).y_(t)}function jx(e,t){e.H_.Ne(t),Jx(e).w_(t)}function Px(e){e.H_=new Lv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Jx(e).start(),e.j_.B_()}function Rx(e){return Dx(e)&&!Jx(e).u_()&&e.U_.size>0}function Dx(e){return 0===lf(e).W_.size}function Lx(e){e.H_=void 0}async function Ox(e){e.j_.set("Online")}async function Mx(e){e.U_.forEach(((t,n)=>{Ax(e,t)}))}async function Vx(e,t){Lx(e),Rx(e)?(e.j_.q_(t),Px(e)):e.j_.set("Unknown")}async function Ux(e,t,n){if(e.j_.set("Online"),t instanceof Rv&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.U_.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.U_.delete(s),e.H_.removeTarget(s))}(e,t)}catch(s){tf(Sx,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Fx(e,s)}else if(t instanceof jv?e.H_.We(t):t instanceof Pv?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Nf.min()))try{const t=await Yw(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.U_.get(s);r&&e.U_.set(s,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const s=e.U_.get(t);if(!s)return;e.U_.set(t,s.withResumeToken(ng.EMPTY_BYTE_STRING,s.snapshotVersion)),jx(e,t);const r=new mw(s.target,t,n,s.sequenceNumber);Ax(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(r){tf(Sx,"Failed to raise snapshot:",r),await Fx(e,r)}}async function Fx(e,t,n){if(!Ff(t))throw t;e.W_.add(1),await Nx(e),e.j_.set("Offline"),n||(n=()=>Yw(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{tf(Sx,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Cx(e)}))}function Bx(e,t){return t().catch((n=>Fx(e,n,t)))}async function $x(e){const t=lf(e),n=Zx(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:-1;for(;qx(t);)try{const e=await Jw(t.localStore,s);if(null===e){0===t.K_.length&&n.P_();break}s=e.batchId,zx(t,e)}catch(r){await Fx(t,r)}Hx(t)&&Wx(t)}function qx(e){return Dx(e)&&e.K_.length<10}function zx(e,t){e.K_.push(t);const n=Zx(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Hx(e){return Dx(e)&&!Zx(e).u_()&&e.K_.length>0}function Wx(e){Zx(e).start()}async function Kx(e){Zx(e).C_()}async function Gx(e){const t=Zx(e);for(const n of e.K_)t.b_(n.mutations)}async function Qx(e,t,n){const s=e.K_.shift(),r=vv.from(s,t,n);await Bx(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await $x(e)}async function Yx(e,t){t&&Zx(e).S_&&await async function(e,t){if(function(e){switch(e){case cf.OK:return of();case cf.CANCELLED:case cf.UNKNOWN:case cf.DEADLINE_EXCEEDED:case cf.RESOURCE_EXHAUSTED:case cf.INTERNAL:case cf.UNAVAILABLE:case cf.UNAUTHENTICATED:return!1;case cf.INVALID_ARGUMENT:case cf.NOT_FOUND:case cf.ALREADY_EXISTS:case cf.PERMISSION_DENIED:case cf.FAILED_PRECONDITION:case cf.ABORTED:case cf.OUT_OF_RANGE:case cf.UNIMPLEMENTED:case cf.DATA_LOSS:return!0;default:return of()}}(n=t.code)&&n!==cf.ABORTED){const n=e.K_.shift();Zx(e).h_(),await Bx(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await $x(e)}var n}(e,t),Hx(e)&&Wx(e)}async function Xx(e,t){const n=lf(e);n.asyncQueue.verifyOperationInProgress(),tf(Sx,"RemoteStore received new credentials");const s=Dx(n);n.W_.add(3),await Nx(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Cx(n)}function Jx(e){return e.J_||(e.J_=function(e,t,n){const s=lf(e);return s.M_(),new wx(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{xo:Ox.bind(null,e),No:Mx.bind(null,e),Lo:Vx.bind(null,e),p_:Ux.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Rx(e)?Px(e):e.j_.set("Unknown")):(await e.J_.stop(),Lx(e))}))),e.J_}function Zx(e){return e.Y_||(e.Y_=function(e,t,n){const s=lf(e);return s.M_(),new xx(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Kx.bind(null,e),Lo:Yx.bind(null,e),D_:Gx.bind(null,e),v_:Qx.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await $x(e)):(await e.Y_.stop(),e.K_.length>0&&(tf(Sx,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))}))),e.Y_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class eb{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new hf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,r){const i=Date.now()+n,o=new eb(e,t,i,s,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uf(cf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tb(e,t){if(nf("AsyncQueue",`${t}: ${e}`),Ff(e))return new uf(cf.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static emptySet(e){return new nb(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Rf.comparator(t.key,n.key):(e,t)=>Rf.comparator(e.key,t.key),this.keyedMap=jy(),this.sortedSet=new Qf(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nb))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new nb;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.Z_=new Qf(Rf.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):of():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class rb{constructor(e,t,n,s,r,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,s,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new rb(e,t,nb.emptySet(t),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class ob{constructor(){this.queries=ab(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=lf(e),s=n.queries;n.queries=ab(),s.forEach(((e,n)=>{for(const s of n.ta)s.onError(t)}))}(this,new uf(cf.ABORTED,"Firestore shutting down"))}}function ab(){return new Ny((e=>Ty(e)),by)}async function lb(e,t){const n=lf(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.na()&&t.ra()&&(s=2):(i=new ib,s=t.ra()?0:1);try{switch(s){case 0:i.ea=await n.onListen(r,!0);break;case 1:i.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const e=tb(o,`Initialization of query '${Ey(t.query)}' failed`);return void t.onError(e)}n.queries.set(r,i),i.ta.push(t),t.sa(n.onlineState),i.ea&&t.oa(i.ea)&&db(n)}async function cb(e,t){const n=lf(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const e=i.ta.indexOf(t);e>=0&&(i.ta.splice(e,1),0===i.ta.length?r=t.ra()?0:1:!i.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ub(e,t){const n=lf(e);let s=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(r)&&(s=!0);t.ea=r}}s&&db(n)}function hb(e,t,n){const s=lf(e),r=s.queries.get(t);if(r)for(const i of r.ta)i.onError(n);s.queries.delete(t)}function db(e){e.ia.forEach((e=>{e.next()}))}var pb,mb;(mb=pb||(pb={}))._a="default",mb.Cache="cache";class fb{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new rb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=rb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==pb.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class vb{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Vy(),this.mutatedKeys=Vy(),this.ya=_y(e),this.wa=new nb(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new sb,s=t?t.wa:this.wa;let r=t?t.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((e,t)=>{const c=s.get(e),u=Sy(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.va(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.ya(u,a)>0||l&&this.ya(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(i=i.add(u),r=d?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{wa:i,Da:n,ls:o,mutatedKeys:r}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const i=e.Da.X_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return of()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),s=null!=s&&s;const o=t&&!s?this.Fa():[],a=0===this.pa.size&&this.current&&!s?1:0,l=a!==this.ga;return this.ga=a,0!==i.length||l?{snapshot:new rb(this.query,e.wa,r,i,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Vy(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new yb(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new gb(n))})),t}Oa(e){this.fa=e.gs,this.pa=Vy();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return rb.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const wb="SyncEngine";class xb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bb{constructor(e){this.key=e,this.Ba=!1}}class Tb{constructor(e,t,n,s,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new Ny((e=>Ty(e)),by),this.qa=new Map,this.Qa=new Set,this.$a=new Qf(Rf.comparator),this.Ka=new Map,this.Ua=new Dw,this.Wa={},this.Ga=new Map,this.za=Tw.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Eb(e,t,n=!0){const s=zb(e);let r;const i=s.ka.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Na()):r=await _b(s,t,n,!0),r}async function Sb(e,t){const n=zb(e);await _b(n,t,!0,!1)}async function _b(e,t,n,s){const r=await function(e,t){const n=lf(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let s;return n.Hr.getTargetData(e,t).next((r=>r?(s=r,Uf.resolve(s)):n.Hr.allocateTargetId(e).next((r=>(s=new mw(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,s).next((()=>s)))))))})).then((e=>{const s=n.Ts.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}(e.localStore,vy(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await async function(e,t,n,s,r){e.Ha=(t,n,s)=>async function(e,t,n,s){let r=t.view.ba(n);r.ls&&(r=await ex(e.localStore,t.query,!1).then((({documents:e})=>t.view.ba(e,r))));const i=s&&s.targetChanges.get(t.targetId),o=s&&null!=s.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,i,o);return Vb(e,t.targetId,a.Ma),a.snapshot}(e,t,n,s);const i=await ex(e.localStore,t,!0),o=new vb(t,i.gs),a=o.ba(i.documents),l=Av.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);Vb(e,n,c.Ma);const u=new xb(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}(e,t,i,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Ix(e.remoteStore,r),a}async function Cb(e,t,n){const s=lf(e),r=s.ka.get(t),i=s.qa.get(r.targetId);if(i.length>1)return s.qa.set(r.targetId,i.filter((e=>!by(e,t)))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Zw(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&kx(s.remoteStore,r.targetId),Ob(s,r.targetId)})).catch(Vf)):(Ob(s,r.targetId),await Zw(s.localStore,r.targetId,!0))}async function Nb(e,t){const n=lf(e),s=n.ka.get(t),r=n.qa.get(s.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),kx(n.remoteStore,s.targetId))}async function Ib(e,t,n){const s=function(e){const t=lf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rb.bind(null,t),t}(e);try{const e=await function(e,t){const n=lf(e),s=Cf.now(),r=t.reduce(((e,t)=>e.add(t.key)),Vy());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ky(),l=Vy();return n.ds.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{i=r;const o=[];for(const e of t){const t=lv(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new hv(e.key,t,Ug(t.value.mapValue),nv.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,o,t)})).next((t=>{o=t;const s=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)}))})).then((()=>({batchId:o.batchId,changes:Py(i)})))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Wa[e.currentUser.toKey()];s||(s=new Qf(Tf)),s=s.insert(t,n),e.Wa[e.currentUser.toKey()]=s}(s,e.batchId,n),await Bb(s,e.changes),await $x(s.remoteStore)}catch(r){const e=tb(r,"Failed to persist write");n.reject(e)}}async function kb(e,t){const n=lf(e);try{const e=await Xw(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const s=n.Ka.get(t);s&&(af(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?s.Ba=!0:e.modifiedDocuments.size>0?af(s.Ba):e.removedDocuments.size>0&&(af(s.Ba),s.Ba=!1))})),await Bb(n,e,t)}catch(s){await Vf(s)}}function Ab(e,t,n){const s=lf(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.ka.forEach(((n,s)=>{const r=s.view.sa(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=lf(e);n.onlineState=t;let s=!1;n.queries.forEach(((e,n)=>{for(const r of n.ta)r.sa(t)&&(s=!0)})),s&&db(n)}(s.eventManager,t),e.length&&s.La.p_(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function jb(e,t,n){const s=lf(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Ka.get(t),i=r&&r.key;if(i){let e=new Qf(Rf.comparator);e=e.insert(i,Fg.newNoDocument(i,Nf.min()));const n=Vy().add(i),r=new kv(Nf.min(),new Map,new Qf(Tf),e,n);await kb(s,r),s.$a=s.$a.remove(i),s.Ka.delete(t),Fb(s)}else await Zw(s.localStore,t,!1).then((()=>Ob(s,t,n))).catch(Vf)}async function Pb(e,t){const n=lf(e),s=t.batch.batchId;try{const e=await function(e,t){const n=lf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const s=t.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const r=n.batch,i=r.keys();let o=Uf.resolve();return i.forEach((e=>{o=o.next((()=>s.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);af(null!==i),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Vy();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(n.localStore,t);Lb(n,s,null),Db(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Bb(n,e)}catch(r){await Vf(r)}}async function Rb(e,t,n){const s=lf(e);try{const e=await function(e,t){const n=lf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(af(null!==t),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(s.localStore,t);Lb(s,t,n),Db(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Bb(s,e)}catch(r){await Vf(r)}}function Db(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function Lb(e,t,n){const s=lf(e);let r=s.Wa[s.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function Ob(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.qa.get(t))e.ka.delete(s),n&&e.La.Ja(s,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach((t=>{e.Ua.containsKey(t)||Mb(e,t)}))}function Mb(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(kx(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),Fb(e))}function Vb(e,t,n){for(const s of n)s instanceof gb?(e.Ua.addReference(s.key,t),Ub(e,s)):s instanceof yb?(tf(wb,"Document no longer in limbo: "+s.key),e.Ua.removeReference(s.key,t),e.Ua.containsKey(s.key)||Mb(e,s.key)):of()}function Ub(e,t){const n=t.key,s=n.path.canonicalString();e.$a.get(n)||e.Qa.has(s)||(tf(wb,"New document in limbo: "+n),e.Qa.add(s),Fb(e))}function Fb(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Rf(Af.fromString(t)),s=e.za.next();e.Ka.set(s,new bb(n)),e.$a=e.$a.insert(n,s),Ix(e.remoteStore,new mw(vy(my(n.path)),s,"TargetPurposeLimboResolution",Bf.ae))}}async function Bb(e,t,n){const s=lf(e),r=[],i=[],o=[];s.ka.isEmpty()||(s.ka.forEach(((e,a)=>{o.push(s.Ha(a,t,n).then((e=>{var t;if((e||n)&&s.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;s.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=zw.Yi(a.targetId,e);i.push(t)}})))})),await Promise.all(o),s.La.p_(r),await async function(e,t){const n=lf(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Uf.forEach(t,(t=>Uf.forEach(t.Hi,(s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s))).next((()=>Uf.forEach(t.Ji,(s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))))))}catch(s){if(!Ff(s))throw s;tf(Kw,"Failed to update sequence numbers: "+s)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ts=n.Ts.insert(e,r)}}}(s.localStore,i))}async function $b(e,t){const n=lf(e);if(!n.currentUser.isEqual(t)){tf(wb,"User change. New user:",t.toKey());const e=await Qw(n.localStore,t);n.currentUser=t,r="'waitForPendingWrites' promise is rejected due to a user change.",(s=n).Ga.forEach((e=>{e.forEach((e=>{e.reject(new uf(cf.CANCELLED,r))}))})),s.Ga.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Bb(n,e.Rs)}var s,r}function qb(e,t){const n=lf(e),s=n.Ka.get(t);if(s&&s.Ba)return Vy().add(s.key);{let e=Vy();const s=n.qa.get(t);if(!s)return e;for(const t of s){const s=n.ka.get(t);e=e.unionWith(s.view.Sa)}return e}}function zb(e){const t=lf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jb.bind(null,t),t.La.p_=ub.bind(null,t.eventManager),t.La.Ja=hb.bind(null,t.eventManager),t}class Hb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fx(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return function(e,t,n,s){return new Gw(e,t,n,s)}(this.persistence,new Ww,e.initialUser,this.serializer)}Xa(e){return new Fw($w.ri,this.serializer)}Za(e){return new nx}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hb.provider={build:()=>new Hb};class Wb extends Hb{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){af(this.persistence.referenceDelegate instanceof qw);const n=this.persistence.referenceDelegate.garbageCollector;return new Cw(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?bw.withCacheSize(this.cacheSizeBytes):bw.DEFAULT;return new Fw((e=>qw.ri(e,t)),this.serializer)}}class Kb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ab(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=$b.bind(null,this.syncEngine),await async function(e,t){const n=lf(e);t?(n.W_.delete(2),await Cx(n)):t||(n.W_.add(2),await Nx(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ob}createDatastore(e){const t=fx(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new px(s));var s;return function(e,t,n,s){return new Tx(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,r=e=>Ab(this.syncEngine,e,0),i=ix.D()?new ix:new sx,new _x(t,n,s,r,i);var t,n,s,r,i}createSyncEngine(e,t){return function(e,t,n,s,r,i,o){const a=new Tb(e,t,n,s,r,i);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=lf(e);tf(Sx,"RemoteStore shutting down."),t.W_.add(5),await Nx(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Kb.provider={build:()=>new Kb};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):nf("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="FirestoreClient";class Yb{constructor(e,t,n,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Xm.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async e=>{tf(Qb,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(tf(Qb,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=tb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xb(e,t){e.asyncQueue.verifyOperationInProgress(),tf(Qb,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async e=>{s.isEqual(e)||(await Qw(t.localStore,e),s=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tf(Qb,"Using user provided OfflineComponentProvider");try{await Xb(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!("FirebaseError"===(n=r).name?n.code===cf.FAILED_PRECONDITION||n.code===cf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;sf("Error using user provided cache. Falling back to memory cache: "+r),await Xb(e,new Hb)}}else tf(Qb,"Using default OfflineComponentProvider"),await Xb(e,new Wb(void 0));var n;return e._offlineComponents}(e);tf(Qb,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Xx(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Xx(t.remoteStore,n))),e._onlineComponents=t}async function Zb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tf(Qb,"Using user provided OnlineComponentProvider"),await Jb(e,e._uninitializedComponentsProvider._online)):(tf(Qb,"Using default OnlineComponentProvider"),await Jb(e,new Kb))),e._onlineComponents}async function eT(e){const t=await Zb(e),n=t.eventManager;return n.onListen=Eb.bind(null,t.syncEngine),n.onUnlisten=Cb.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Sb.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Nb.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tT(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const nT=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(e,t,n){if(!n)throw new uf(cf.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function rT(e){if(!Rf.isDocumentKey(e))throw new uf(cf.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iT(e){if(Rf.isDocumentKey(e))throw new uf(cf.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function oT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":of()}function aT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uf(cf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oT(e);throw new uf(cf.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firestore.googleapis.com",cT=!0;class uT{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new uf(cf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lT,this.ssl=cT}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:cT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=xw;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new uf(cf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,s){if(!0===t&&!0===s)throw new uf(cf.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tT(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new uf(cf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new uf(cf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new uf(cf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class hT{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new uf(cf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new uf(cf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pf;switch(e.type){case"firstParty":return new yf(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new uf(cf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nT.get(e);t&&(tf("ComponentProvider","Removing Datastore"),nT.delete(e),t.terminate())}(this),Promise.resolve()}}function dT(e,t,n,s={}){var r;const i=(e=aT(e,hT))._getSettings(),o=`${t}:${n}`;if(i.host!==lT&&i.host!==o&&sf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),s.mockUserToken){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=Xm.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Mc(JSON.stringify({alg:"none",type:"JWT"})),Mc(JSON.stringify(i)),""].join(".")}(s.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const i=s.mockUserToken.sub||s.mockUserToken.user_id;if(!i)throw new uf(cf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Xm(i)}e._authCredentials=new mf(new df(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pT(this.firestore,e,this._query)}}class mT{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fT(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mT(this.firestore,e,this._key)}}class fT extends pT{constructor(e,t,n){super(e,t,my(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mT(this.firestore,null,new Rf(e))}withConverter(e){return new fT(this.firestore,e,this._path)}}function gT(e,t,...n){if(e=su(e),sT("collection","path",t),e instanceof hT){const s=Af.fromString(t,...n);return iT(s),new fT(e,null,s)}{if(!(e instanceof mT||e instanceof fT))throw new uf(cf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Af.fromString(t,...n));return iT(s),new fT(e.firestore,null,s)}}function yT(e,t,...n){if(e=su(e),1===arguments.length&&(t=bf.newId()),sT("doc","path",t),e instanceof hT){const s=Af.fromString(t,...n);return rT(s),new mT(e,null,new Rf(s))}{if(!(e instanceof mT||e instanceof fT))throw new uf(cf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Af.fromString(t,...n));return rT(s),new mT(e.firestore,e instanceof fT?e.converter:null,new Rf(s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="AsyncQueue";class wT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gx(this,"async_queue_retry"),this.Su=()=>{const e=mx();e&&tf(vT,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=mx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=mx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new hf;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(BE){if(!Ff(BE))throw BE;tf(vT,"Operation failed with retryable error: "+BE)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;throw nf("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=eb.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(s),s}Du(){this.gu&&of()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function xT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const s of t)if(s in n&&"function"==typeof n[s])return!0;return!1}(e,["next","error","complete"])}class bT extends hT{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new wT,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wT(e),this._firestoreClient=void 0,await e}}}function TT(e){if(e._terminated)throw new uf(cf.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,s;const r=e._freezeSettings(),i=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=r,new mg(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tT(c.experimentalLongPollingOptions),c.useFetchStreams));var o,a,l,c;e._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(s=r.localCache)||void 0===s?void 0:s._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Yb(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class ET{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ET(ng.fromBase64String(e))}catch(t){throw new uf(cf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ET(ng.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new uf(cf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pf(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new uf(cf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new uf(cf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tf(this._lat,e._lat)||Tf(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=/^__.*__$/;class kT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new hv(e,this.data,this.fieldMask,t,this.fieldTransforms):new uv(e,this.data,t,this.fieldTransforms)}}class AT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw of()}}class PT{constructor(e,t,n,s,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new PT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Ku(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return zT(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(jT(this.Lu)&&IT.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class RT{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||fx(e)}ju(e,t,n,s=!1){return new PT({Lu:e,methodName:t,zu:n,path:Pf.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DT(e){const t=e._freezeSettings(),n=fx(e._databaseId);return new RT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function LT(e,t,n,s,r,i={}){const o=e.ju(i.merge||i.mergeFields?2:0,t,n,r);FT("Data must be an object, but it was:",o,s);const a=VT(s,o);let l,c;if(i.merge)l=new eg(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const s of i.mergeFields){const r=BT(t,s,n);if(!o.contains(r))throw new uf(cf.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);HT(e,r)||e.push(r)}l=new eg(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new kT(new Vg(a),l,c)}class OT extends _T{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof OT}}function MT(e,t){if(UT(e=su(e)))return FT("Unsupported field value:",t,e),VT(e,t);if(e instanceof _T)return function(e,t){if(!jT(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const r of e){let e=MT(r,t.Uu(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=su(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $y(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Cf.fromDate(e);return{timestampValue:qv(t.serializer,n)}}if(e instanceof Cf){const n=new Cf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qv(t.serializer,n)}}if(e instanceof CT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ET)return{bytesValue:zv(t.serializer,e._byteString)};if(e instanceof mT){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Kv(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof NT)return n=e,s=t,{mapValue:{fields:{[yg]:{stringValue:xg},[bg]:{arrayValue:{values:n.toArray().map((e=>{if("number"!=typeof e)throw s.Wu("VectorValues must only contain numeric values.");return Fy(s.serializer,e)}))}}}}};var n,s;throw t.Wu(`Unsupported field value: ${oT(e)}`)}(e,t)}function VT(e,t){const n={};return Gf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kf(e,((e,s)=>{const r=MT(s,t.qu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function UT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cf||e instanceof CT||e instanceof ET||e instanceof mT||e instanceof _T||e instanceof NT)}function FT(e,t,n){if(!UT(n)||("object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s))){const s=oT(n);throw"an object"===s?t.Wu(e+" a custom object"):t.Wu(e+" "+s)}var s}function BT(e,t,n){if((t=su(t))instanceof ST)return t._internalPath;if("string"==typeof t)return qT(e,t);throw zT("Field path arguments must be of type string or ",e,!1,void 0,n)}const $T=new RegExp("[~\\*/\\[\\]]");function qT(e,t,n){if(t.search($T)>=0)throw zT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ST(...t.split("."))._internalPath}catch(s){throw zT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zT(e,t,n,s,r){const i=s&&!s.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new uf(cf.INVALID_ARGUMENT,a+e+l)}function HT(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new mT(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KT extends WT{data(){return super.data()}}function GT(e,t){return"string"==typeof t?qT(e,t):t instanceof ST?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new uf(cf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YT{}class XT extends YT{}function JT(e,t,...n){let s=[];t instanceof YT&&s.push(t),s=s.concat(n),function(e){const t=e.filter((e=>e instanceof tE)).length,n=e.filter((e=>e instanceof ZT)).length;if(t>1||t>0&&n>0)throw new uf(cf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)e=r._apply(e);return e}class ZT extends XT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ZT(e,t,n)}_apply(e){const t=this._parse(e);return rE(e._query,t),new pT(e.firestore,e.converter,wy(e._query,t))}_parse(e){const t=DT(e.firestore),n=function(e,t,n,s,r,i,o){let a;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new uf(cf.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){sE(o,i);const t=[];for(const n of o)t.push(nE(s,e,n));a={arrayValue:{values:t}}}else a=nE(s,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||sE(o,i),a=function(e,t,n,s=!1){return MT(n,e.ju(s?4:3,t))}(n,t,o,"in"===i||"not-in"===i);return Kg.create(r,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function eE(e,t,n){const s=t,r=GT("where",e);return ZT._create(r,s,n)}class tE extends YT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Gg.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const s=t.getFlattenedFilters();for(const r of s)rE(n,r),n=wy(n,r)}(e._query,t),new pT(e.firestore,e.converter,wy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function nE(e,t,n){if("string"==typeof(n=su(n))){if(""===n)throw new uf(cf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gy(t)&&-1!==n.indexOf("/"))throw new uf(cf.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Af.fromString(n));if(!Rf.isDocumentKey(s))throw new uf(cf.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jg(e,new Rf(s))}if(n instanceof mT)return jg(e,n._key);throw new uf(cf.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oT(n)}.`)}function sE(e,t){if(!Array.isArray(e)||0===e.length)throw new uf(cf.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rE(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new uf(cf.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new uf(cf.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class iE{convertValue(e,t="none"){switch(Tg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ig(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(og(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw of()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Kf(e,((e,s)=>{n[e]=this.convertValue(s,t)})),n}convertVectorValue(e){var t,n,s;const r=null===(s=null===(n=null===(t=e.fields)||void 0===t?void 0:t[bg].arrayValue)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map((e=>ig(e.doubleValue)));return new NT(r)}convertGeoPoint(e){return new CT(ig(e.latitude),ig(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pg(e));default:return null}}convertTimestamp(e){const t=rg(e);return new Cf(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Af.fromString(e);af(pw(n));const s=new gg(n.get(1),n.get(3)),r=new Rf(n.popFirst(5));return s.isEqual(t)||nf(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aE extends WT{constructor(e,t,n,s,r,i){super(e,t,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(GT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class lE extends aE{data(e={}){return super.data(e)}}class cE{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new oE(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new lE(this._firestore,this._userDataWriter,n.key,n,new oE(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new uf(cf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const s=new lE(e._firestore,e._userDataWriter,n.doc.key,n.doc,new oE(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const s=new lE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:uE(t.type),doc:s,oldIndex:r,newIndex:i}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return of()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(e){e=aT(e,mT);const t=aT(e.firestore,bT);return function(e,t,n={}){const s=new hf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,r){const i=new Gb({next:a=>{i.su(),t.enqueueAndForget((()=>cb(e,o)));const l=a.docs.has(n);!l&&a.fromCache?r.reject(new uf(cf.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&s&&"server"===s.source?r.reject(new uf(cf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:e=>r.reject(e)}),o=new fb(my(n.path),i,{includeMetadataChanges:!0,Ta:!0});return lb(e,o)}(await eT(e),e.asyncQueue,t,n,s))),s.promise}(TT(t),e._key).then((n=>gE(t,e,n)))}class dE extends iE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ET(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mT(this.firestore,null,t)}}function pE(e){e=aT(e,pT);const t=aT(e.firestore,bT),n=TT(t),s=new dE(t);return QT(e._query),function(e,t,n={}){const s=new hf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,r){const i=new Gb({next:n=>{i.su(),t.enqueueAndForget((()=>cb(e,o))),n.fromCache&&"server"===s.source?r.reject(new uf(cf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new fb(n,i,{includeMetadataChanges:!0,Ta:!0});return lb(e,o)}(await eT(e),e.asyncQueue,t,n,s))),s.promise}(n,e._query).then((n=>new cE(t,s,e,n)))}function mE(e,t,n,...s){e=aT(e,mT);const r=aT(e.firestore,bT),i=DT(r);let o;return o="string"==typeof(t=su(t))||t instanceof ST?function(e,t,n,s,r,i){const o=e.ju(1,t,n),a=[BT(t,s,n)],l=[r];if(i.length%2!=0)throw new uf(cf.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(BT(t,i[d])),l.push(i[d+1]);const c=[],u=Vg.empty();for(let d=a.length-1;d>=0;--d)if(!HT(c,a[d])){const e=a[d];let t=l[d];t=su(t);const n=o.Ku(e);if(t instanceof OT)c.push(e);else{const s=MT(t,n);null!=s&&(c.push(e),u.set(e,s))}}const h=new eg(c);return new AT(u,h,o.fieldTransforms)}(i,"updateDoc",e._key,t,n,s):function(e,t,n,s){const r=e.ju(1,t,n);FT("Data must be an object, but it was:",r,s);const i=[],o=Vg.empty();Kf(s,((e,s)=>{const a=qT(t,e,n);s=su(s);const l=r.Ku(a);if(s instanceof OT)i.push(a);else{const e=MT(s,l);null!=e&&(i.push(a),o.set(a,e))}}));const a=new eg(i);return new AT(o,a,r.fieldTransforms)}(i,"updateDoc",e._key,t),fE(r,[o.toMutation(e._key,nv.exists(!0))])}function fE(e,t){return function(e,t){const n=new hf;return e.asyncQueue.enqueueAndForget((async()=>Ib(await function(e){return Zb(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(TT(e),t)}function gE(e,t,n){const s=n.docs.get(t._key),r=new dE(e);return new aE(e,r,t._key,s,new oE(n.hasPendingWrites,n.fromCache),t.converter)}!function(e,t=!0){Jm=vh,ph(new ru("firestore",((e,{instanceIdentifier:n,options:s})=>{const r=e.getProvider("app").getImmediate(),i=new bT(new ff(e.getProvider("auth-internal")),new wf(r,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uf(cf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gg(e.options.projectId,t)}(r,n),r);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),bh(Qm,Ym,e),bh(Qm,Ym,"esm2017")}();const yE=wh({apiKey:"AIzaSyBliLGjVo25gqbbHVpmr2oB5rxO7ThxdZg",authDomain:"my-work-dba7f.firebaseapp.com",projectId:"my-work-dba7f",storageBucket:"my-work-dba7f.firebasestorage.app",messagingSenderId:"653410341821",appId:"1:653410341821:web:16799aeccffda27dcd38d4"}),vE=function(e=xh()){const t=mh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=mh(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Yc(n.getOptions(),null!=t?t:{}))return e;Vh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Am,persistence:[Kp,Ap,Pp]}),s=qc("authTokenSyncURL");if(s&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Dm)return;const s=null==t?void 0:t.token;Lm!==s&&(Lm=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});!function(e,t,n){su(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,s){su(e).onIdTokenChanged(t,n,s)}(n,(e=>t(e)))}}var r;const i=Bc("auth");return i&&ep(n,`http://${i}`),n}(yE),wE=function(e){const t="object"==typeof e?e:xh(),n="string"==typeof e?e:fg,s=mh(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const e=(e=>{const t=Bc(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]})("firestore");e&&dT(s,...e)}return s}(yE);vE.onAuthStateChanged((e=>{}),(e=>{console.error("Auth state changed error:",e)}));const xE=()=>{var e,t,n,s,r,i,o,l,c,u,h;const{id:d}=Be(),p=Fe(),[m,y]=a.useState(null),[v,w]=a.useState(!0),[x,b]=a.useState(null),[T,E]=a.useState(0),[S,_]=a.useState({}),[C,N]=a.useState(!1),[I,A]=a.useState(null);a.useEffect((()=>{(async()=>{var e;if(!vE.currentUser)return b("Please log in to access this lesson"),void w(!1);try{const t=yT(wE,"lessons",d),n=await hE(t);if(!n.exists())return b("Lesson not found"),void w(!1);const s=n.data(),r=JT(gT(wE,"enrollments"),eE("userId","==",vE.currentUser.uid),eE("courseId","==",s.courseId),eE("enrolled","==",!0)),i=await pE(r);if(i.empty)return b("You do not have access to this lesson"),void w(!1);y({id:n.id,...s});const o=i.docs[0],a=o.data();(null==(e=a.completedLessons)?void 0:e.includes(d))||await mE(o.ref,{completedLessons:[...a.completedLessons||[],d],lastAccessed:new Date})}catch(t){console.error("Error fetching lesson:",t),b("Failed to load lesson content")}finally{w(!1)}})()}),[d]);const j=e=>{E((t=>{var n;const s="next"===e?t+1:t-1;return Math.max(0,Math.min(s,((null==(n=null==m?void 0:m.sections)?void 0:n.length)||1)-1))}))};return v?k.jsx("div",{className:"min-h-screen grid place-items-center bg-gradient-to-br from-purple-50 to-indigo-50",children:k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600"})}):x?k.jsx("div",{className:"min-h-screen grid place-items-center bg-gradient-to-br from-purple-50 to-indigo-50",children:k.jsxs("div",{className:"text-center space-y-4",children:[k.jsx("p",{className:"text-red-500 font-medium",children:x}),k.jsx("button",{onClick:()=>p(-1),className:"text-purple-600 hover:text-purple-800 transition-colors",children:"Return to Course"})]})}):k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-50",children:[k.jsx("header",{className:"sticky top-0 bg-white/80 backdrop-blur-md shadow-sm z-10",children:k.jsx("nav",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:k.jsxs("button",{onClick:()=>p(-1),className:"flex items-center gap-2 text-primary hover:text-secondary hover:underline transition-colors",children:[k.jsx(f,{className:"w-5 h-5"}),k.jsx("span",{className:"font-medium",children:"Back to Course"})]})})}),k.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:k.jsxs("article",{className:"space-y-8",children:[k.jsxs("header",{className:"text-center space-y-4",children:[k.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-primary",children:null==m?void 0:m.title}),k.jsxs("p",{className:"text-lg text-gray-600",children:["Section ",T+1," of ",null==(e=null==m?void 0:m.sections)?void 0:e.length]})]}),k.jsx("div",{className:"relative bg-white rounded-2xl shadow-xl overflow-hidden h-[600px] w-full max-w-4xl mx-auto",children:k.jsxs("div",{className:"h-full overflow-y-auto",children:[k.jsx(Qt,{mode:"wait",children:k.jsxs(Pc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},className:"p-6 sm:p-8 lg:p-10",children:["video"===(null==(n=null==(t=null==m?void 0:m.sections)?void 0:t[T])?void 0:n.type)&&k.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-lg mb-6",children:k.jsx("iframe",{src:m.sections[T].videoUrl,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}),"image"===(null==(r=null==(s=null==m?void 0:m.sections)?void 0:s[T])?void 0:r.type)&&k.jsx("div",{className:"my-6",children:k.jsx("img",{src:m.sections[T].imageUrl,alt:m.sections[T].alt||"Marketing concept illustration",className:"rounded-lg shadow-lg max-w-full h-auto mx-auto"})}),"quiz"===(null==(o=null==(i=null==m?void 0:m.sections)?void 0:i[T])?void 0:o.type)&&k.jsxs("div",{className:"bg-white rounded-lg p-6 my-6",children:[k.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:m.sections[T].title}),C?C&&I?k.jsxs("div",{className:"mt-8 space-y-6",children:[k.jsxs("div",{className:"p-4 rounded-lg "+(100===I.score?"bg-green-50 text-green-800":I.score>=70?"bg-yellow-50 text-yellow-800":"bg-red-50 text-red-800"),children:[k.jsx("h4",{className:"font-bold mb-2",children:"Quiz Results"}),k.jsxs("p",{children:["Score: ",I.score,"%"]}),k.jsx("p",{className:"mt-2",children:I.feedback})]}),k.jsx("div",{className:"space-y-4",children:I.results.map(((e,t)=>k.jsxs("div",{className:"p-4 rounded-lg "+(e.correct?"bg-green-50":"bg-red-50"),children:[k.jsx("p",{className:"font-medium",children:e.question}),k.jsxs("p",{className:"mt-2",children:["Your answer: ",e.userAnswer]}),!e.correct&&k.jsxs("p",{className:"mt-1 text-red-600",children:["Correct answer: ",e.correctAnswer]}),k.jsx("p",{className:"mt-2 text-sm text-gray-600",children:e.explanation})]},t)))})]}):null:k.jsxs("div",{className:"space-y-8",children:[m.sections[T].questions.map(((e,t)=>k.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[k.jsxs("p",{className:"text-lg font-medium text-gray-800 mb-4",children:[t+1,". ",e.question]}),k.jsx("div",{className:"space-y-3",children:e.options.map(((t,n)=>k.jsxs("label",{className:"flex items-start space-x-3 p-4 rounded-lg border-2 transition-all cursor-pointer\n                                    "+(S[e.id]===n?"border-purple-500 bg-purple-50":"border-transparent hover:bg-gray-100"),children:[k.jsx("input",{type:"radio",name:`question-${e.id}`,value:n,checked:S[e.id]===n,onChange:()=>{return t=e.id,s=n,void _((e=>({...e,[t]:s})));var t,s},className:"mt-1"}),k.jsx("span",{className:"text-gray-700",children:t})]},n)))})]},e.id))),k.jsx("div",{className:"sticky bottom-0 bg-white py-4",children:k.jsx("button",{onClick:async()=>{const e=m.sections[T],t=e.questions;if(Object.keys(S).length!==t.length)return void alert("Please answer all questions before submitting.");let n=0;t.forEach((e=>{S[e.id]===e.correctAnswer&&n++}));const s=n/t.length*100;let r;r=100===s?e.feedback.perfect:s>=70?e.feedback.good:e.feedback.poor,A({score:s,feedback:r,results:t.map((e=>({question:e.question,correct:S[e.id]===e.correctAnswer,explanation:e.explanation,userAnswer:e.options[S[e.id]],correctAnswer:e.options[e.correctAnswer]})))}),N(!0);try{const t=JT(gT(wE,"enrollments"),eE("userId","==",vE.currentUser.uid),eE("courseId","==",m.courseId)),n=await pE(t);if(!n.empty){const t=n.docs[0],r=t.data().completedQuizzes||[];r.includes(e.id)||await mE(t.ref,{completedQuizzes:[...r,e.id],quizScores:{...t.data().quizScores,[e.id]:s}})}}catch(i){console.error("Error updating quiz progress:",i)}},className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg \n                              hover:bg-purple-700 transition-colors disabled:opacity-50\n                              "+(Object.keys(S).length!==m.sections[T].questions.length?"opacity-50 cursor-not-allowed":""),disabled:Object.keys(S).length!==m.sections[T].questions.length,children:"Submit Answers"})})]})]}),"text"===(null==(c=null==(l=null==m?void 0:m.sections)?void 0:l[T])?void 0:c.type)&&k.jsx("div",{className:"prose prose-lg max-w-none\r\n                        prose-headings:text-purple-900 \r\n                        prose-p:text-gray-700 \r\n                        prose-a:text-purple-600 hover:prose-a:text-purple-800\r\n                        prose-img:rounded-lg prose-img:shadow-lg\r\n                        prose-strong:text-purple-900",dangerouslySetInnerHTML:{__html:m.sections[T].content}})]},T)}),k.jsxs("div",{className:"flex justify-between items-center p-6 sm:p-8 lg:p-10 bg-gradient-to-b from-transparent to-gray-50",children:[k.jsxs("button",{onClick:()=>j("prev"),disabled:0===T,className:"flex items-center gap-2 px-4 py-2 text-purple-600 \r\n                    bg-white rounded-lg shadow-md hover:shadow-lg transition-all \r\n                    disabled:opacity-50 disabled:cursor-not-allowed",children:[k.jsx(f,{className:"w-5 h-5"}),"Previous"]}),k.jsxs("span",{className:"text-sm text-gray-500",children:[T+1," / ",null==(u=null==m?void 0:m.sections)?void 0:u.length]}),k.jsxs("button",{onClick:()=>j("next"),disabled:T===((null==(h=null==m?void 0:m.sections)?void 0:h.length)||1)-1,className:"flex items-center gap-2 px-4 py-2 text-white \r\n                    bg-purple-600 rounded-lg shadow-md hover:shadow-lg \r\n                    hover:bg-purple-700 transition-all\r\n                    disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",k.jsx(g,{className:"w-5 h-5"})]})]})]})})]})})]})},bE=()=>{const e=Fe(),[t,n]=a.useState(!1),[s,r]=a.useState(""),[i,o]=a.useState(""),[l,c]=a.useState(!1),[u,h]=a.useState({fullName:"",email:"",password:"",confirmPassword:""}),[d,p]=a.useState({}),m=e=>{const{name:t,value:n}=e.target;h((e=>({...e,[t]:n}))),d[t]&&p((e=>({...e,[t]:""})))};return k.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8",children:k.jsx("div",{className:"max-w-md mx-auto",children:k.jsxs("section",{className:"bg-primary p-8 rounded-xl shadow-lg",children:[k.jsxs("header",{className:"text-center mb-8",children:[k.jsx("h1",{className:"text-3xl font-bold text-tertiary",children:"Create Account"}),k.jsx("p",{className:"text-quinary mt-2",children:"Join our community of digital marketers"})]}),s&&k.jsx("div",{role:"alert",className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6",children:s}),i&&k.jsx("div",{role:"alert",className:"bg-green-50 text-green-700 p-4 rounded-lg mb-6",children:i}),k.jsxs("form",{onSubmit:async t=>{t.preventDefault();const n=(()=>{const e={};if(u.fullName.trim()?u.fullName.length<2&&(e.fullName="Name must be at least 2 characters"):e.fullName="Full name is required",u.email?/\S+@\S+\.\S+/.test(u.email)||(e.email="Invalid email address"):e.email="Email is required",u.password){const t=[];u.password.length<8&&t.push("at least 8 characters"),/[A-Z]/.test(u.password)||t.push("one uppercase letter"),/[a-z]/.test(u.password)||t.push("one lowercase letter"),/[0-9]/.test(u.password)||t.push("one number"),/[!@#$%^&*]/.test(u.password)||t.push("one special character (!@#$%^&*)"),t.length>0&&(e.password="Password must contain: "+t.join(", "))}else e.password="Password is required";return u.confirmPassword?u.password!==u.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",e})();if(Object.keys(n).length>0)p(n);else{c(!0),r("");try{const t=await async function(e,t,n){if(fh(e.app))return Promise.reject(Bh(e));const s=zd(e),r=Zd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yp),i=await r.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ep(e),t})),o=await vp._fromIdTokenResponse(s,"signIn",i);return await s._updateCurrentUser(o.user),o}(vE,u.email,u.password);await _p(t.user,{displayName:u.fullName}),h({fullName:"",email:"",password:"",confirmPassword:""}),p({}),o("Account created successfully! Redirecting to login..."),setTimeout((()=>{e("/signUp&signIn/login")}),2e3)}catch(s){switch(s.code){case"auth/email-already-in-use":r("An account with this email already exists");break;case"auth/invalid-email":r("Invalid email address");break;case"auth/operation-not-allowed":r("Email/password accounts are not enabled. Please contact support.");break;case"auth/weak-password":r("Password is too weak");break;default:r("Failed to create account. Please try again."),console.error("Firebase error:",s)}}finally{c(!1)}}},className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-quaternary",children:"Full Name"}),k.jsx("input",{id:"fullName",name:"fullName",type:"text",value:u.fullName,onChange:m,className:`mt-1 block w-full rounded-lg border ${d.fullName?"border-red-300":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),d.fullName&&k.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.fullName})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-quaternary",children:"Email address"}),k.jsx("input",{id:"email",name:"email",type:"email",value:u.email,onChange:m,className:`mt-1 block w-full rounded-lg border ${d.email?"border-red-300":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),d.email&&k.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-quaternary",children:"Password"}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{id:"password",name:"password",type:t?"text":"password",value:u.password,onChange:m,className:`mt-1 block w-full rounded-lg border ${d.password?"border-red-300":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`,"aria-describedby":"password-requirements"}),k.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":t?"Hide password":"Show password",children:t?k.jsx(y,{className:"h-5 w-5 text-primary","aria-hidden":"true"}):k.jsx(v,{className:"h-5 w-5 text-primary","aria-hidden":"true"})})]}),d.password?k.jsx("p",{className:"mt-1 text-sm text-red-600",id:"password-requirements",children:d.password}):k.jsx("p",{className:"mt-1 text-sm text-quaternary",id:"password-requirements",children:"Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-quaternary",children:"Confirm Password"}),k.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:u.confirmPassword,onChange:m,className:`mt-1 block w-full rounded-lg border ${d.confirmPassword?"border-red-300":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),d.confirmPassword&&k.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.confirmPassword})]}),k.jsx("button",{type:"submit",disabled:l,className:"w-full text-xl rounded-lg px-4 py-2 text-white font-bold "+(l?"bg-primary cursor-not-allowed":"bg-secondary  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:l?"Creating account...":"Sign up"})]}),k.jsxs("p",{className:"mt-6 text-center text-sm text-tertiary",children:["Already have an account?"," ",k.jsx(St,{to:"/signUp&signIn/login",className:"font-semibold text-xl text-quinary hover:text-quaternary hover:underline",children:"Sign in"})]})]})})})},TE=()=>{const e=Fe(),[t,n]=a.useState(!1),[s,r]=a.useState(!1),[i,o]=a.useState(""),[l,c]=a.useState({email:"",password:""}),u=36e5,h="userSession";a.useEffect((()=>{(()=>{const t=sessionStorage.getItem(h);if(t){const{timestamp:n}=JSON.parse(t);(new Date).getTime()-n<=u?vE.onAuthStateChanged((t=>{t&&e("/dashboard")})):p()}})()}),[e]);const d=e=>{const{name:t,value:n}=e.target;c((e=>({...e,[t]:n}))),o("")},p=async()=>{try{await(e=vE,su(e).signOut()),sessionStorage.removeItem(h),localStorage.removeItem("isAuthenticated"),window.location.href="/signUp&signIn/login"}catch(t){console.error("Logout error:",t)}var e};return k.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:k.jsx("div",{className:"max-w-md w-full",children:k.jsxs("section",{className:"bg-secondary p-8 rounded-xl shadow-lg",children:[k.jsxs("header",{className:"text-center mb-8",children:[k.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Welcome Back"}),k.jsx("p",{className:"text-quinary mt-2",children:"Sign in to continue learning"})]}),i&&k.jsx("div",{role:"alert",className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6",children:i}),k.jsxs("form",{onSubmit:async t=>{t.preventDefault(),r(!0),o("");try{const t=await Sp(vE,l.email,l.password);if(t.user){const n={uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,timestamp:(new Date).getTime(),expiresAt:(new Date).getTime()+u};sessionStorage.setItem(h,JSON.stringify(n)),localStorage.setItem("isAuthenticated","true"),e("/dashboard")}}catch(n){switch(n.code){case"auth/user-not-found":o("No account found with this email");break;case"auth/wrong-password":o("Invalid password");break;case"auth/invalid-email":o("Invalid email address");break;case"auth/too-many-requests":o("Too many failed attempts. Please try again later");break;default:o("Failed to sign in. Please try again")}}finally{r(!1)}},className:"space-y-6",noValidate:!0,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-lg font-medium text-primary ",children:"Email address"}),k.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:d,className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-lg font-medium text-primary ",children:"Password"}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:l.password,onChange:d,className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":t?"Hide password":"Show password",children:t?k.jsx(y,{className:"h-5 w-5 ","aria-hidden":"true"}):k.jsx(v,{className:"h-5 w-5 ","aria-hidden":"true"})})]})]}),k.jsx("div",{className:"flex items-center justify-end",children:k.jsx(St,{to:"/forgot-password",className:"text-sm font-medium text-primary hover:text-quaternary",children:"Forgot password?"})}),k.jsxs("button",{type:"submit",disabled:s,className:"relative w-full rounded-lg px-4 py-2 text-white font-medium overflow-hidden transition-all duration-300 "+(s?"bg-tertiary cursor-not-allowed":"bg-primary hover:bg-primary/90"),children:[k.jsx("span",{className:""+(s?"invisible":"visible"),children:"Sign in"}),s&&k.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:k.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})]}),k.jsxs("p",{className:"mt-6 text-center text-lg text-primary",children:["Don't have an account?"," ",k.jsx(St,{to:"/signUp&signIn",className:"font-medium text-xl text-quaternary hover:text-tertiary hover:underline",children:"Sign up"})]})]})})})};var EE,SE,_E,CE,NE,IE={exports:{}};function kE(){if(SE)return EE;SE=1;return EE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function AE(){if(CE)return _E;CE=1;var e=kE();function t(){}function n(){}return n.resetWarningCache=t,_E=function(){function s(t,n,s,r,i,o){if(o!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return s}s.isRequired=s;var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}function jE(){return NE||(NE=1,IE.exports=AE()()),IE.exports}const PE=n(jE()),RE=({course:e,onClose:t,onSubmit:n,isProcessing:s})=>{const[r,i]=a.useState("");return k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:k.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative",children:[k.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",disabled:s,children:k.jsx(p,{className:"w-6 h-6"})}),k.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payment Details"}),k.jsxs("div",{className:"mb-6",children:[k.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Course: ",e.title]}),k.jsxs("p",{className:"text-xl font-bold text-primary mb-4",children:["Amount: KSH ",e.price]}),k.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[k.jsx("p",{className:"font-medium mb-2",children:"Payment Instructions:"}),k.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[k.jsxs("li",{children:["Send KSH ",k.jsx("span",{className:"font-bold",children:e.price}),"to M-PESA number: ",k.jsx("span",{className:"font-bold",children:"+254796591251"})]}),k.jsxs("li",{children:["Confirm Payment to ",k.jsx("span",{className:"font-bold",children:"PETER KINYANJUI."})]}),k.jsx("li",{children:"Enter the M-PESA reference code below"}),k.jsx("li",{children:"Wait for approval after submission"})]})]})]}),k.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(r)},children:[k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{htmlFor:"refCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"M-PESA Reference Code"}),k.jsx("input",{type:"text",id:"refCode",value:r,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary",placeholder:"Enter Mpesa refCode eg.TBN6V9M6Y",required:!0,disabled:s})]}),k.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded-lg hover:bg-primary/90 transition-colors disabled:bg-gray-400",disabled:s,children:s?k.jsxs("div",{className:"flex items-center justify-center",children:[k.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):"Submit Payment"})]})]})})};RE.propTypes={course:PE.shape({id:PE.string.isRequired,title:PE.string.isRequired,price:PE.string.isRequired,description:PE.string}).isRequired,onClose:PE.func.isRequired,onSubmit:PE.func.isRequired,isProcessing:PE.bool.isRequired},RE.defaultProps={isProcessing:!1};const DE=()=>{const e=Fe(),[t,n]=a.useState(null),[s,r]=a.useState(!0),[i,o]=a.useState([]),[l,c]=a.useState([]),[u,h]=a.useState(null),[d,p]=a.useState(null),[m,f]=a.useState(!1),[g,y]=a.useState(null),[v,b]=a.useState(!1),T=async e=>{if(e)try{const t=JT(gT(wE,"enrollments"),eE("userId","==",e.uid)),n=(await pE(t)).docs.map((async e=>{const t=yT(wE,"courses",e.data().courseId),n=await hE(t);return n.exists()?{id:n.id,...n.data(),enrolled:e.data().enrolled,progress:e.data().progress||0,enrollmentId:e.id}:(console.error(`Course ${e.data().courseId} not found`),null)})),s=(await Promise.all(n)).filter((e=>null!==e));o(s);const r=gT(wE,"courses"),i=(await pE(r)).docs.map((e=>({id:e.id,...e.data()}))),a=s.map((e=>e.id)),l=i.filter((e=>!a.includes(e.id)));c(l)}catch(t){console.error("Error fetching data:",t),h("Failed to load courses. Please try again later.")}};a.useEffect((()=>{r(!0);const e=Cp(vE,(async t=>{if(n(t),t)try{await T(t);const n=gT(wE,"enrollments"),s=function(e,...t){var n,s,r;e=su(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||xT(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(xT(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),t[o+2]=null===(r=e.complete)||void 0===r?void 0:r.bind(e)}let l,c,u;if(e instanceof mT)c=aT(e.firestore,bT),u=my(e._key.path),l={next:n=>{t[o]&&t[o](gE(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=aT(e,pT);c=aT(n.firestore,bT),u=n._query;const s=new dE(c);l={next:e=>{t[o]&&t[o](new cE(c,s,n,e))},error:t[o+1],complete:t[o+2]},QT(e._query)}return function(e,t,n,s){const r=new Gb(s),i=new fb(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>lb(await eT(e),i))),()=>{r.su(),e.asyncQueue.enqueueAndForget((async()=>cb(await eT(e),i)))}}(TT(c),u,a,l)}(JT(n,eE("userId","==",t.uid)),(async e=>{e.empty||(await T(t),e.docChanges().forEach((e=>{"modified"===e.type&&!0===e.doc.data().enrolled&&(h("Your enrollment has been approved! You can now start your learning journey."),setTimeout((()=>h(null)),5e3))}))),r(!1)}),(e=>{console.error("Enrollment listener error:",e),h("Failed to  for enrollment updates"),r(!1)}));return()=>{s(),e()}}catch(s){console.error("Error in auth state change:",s),h("Hang on tightly as we approve your enrollment"),r(!1)}else r(!1)}));return()=>e()}),[]);const E=e=>k.jsx("button",{className:`w-full ${d===e.id?"bg-gray-400":"bg-secondary hover:bg-secondary/90"} text-white py-2 rounded-lg transition-colors`,onClick:()=>(async e=>{t?(console.log(e),y(e),f(!0)):h("Please login to enroll in courses")})(e),disabled:d===e.id,children:d===e.id?k.jsxs("div",{className:"flex items-center justify-center",children:[k.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Enrolling..."]}):"Enroll Now"});return s?k.jsx("div",{className:"min-h-screen flex items-center justify-center",children:k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):k.jsxs("main",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"max-w-7xl mx-auto",children:[u&&k.jsx("div",{className:"mb-8 p-4 rounded-lg "+(u.includes("approved")||u.includes("submitted")?"bg-green-50 border-l-4 border-green-400 text-green-700":"bg-red-50 border-l-4 border-red-400 text-red-700"),children:k.jsxs("p",{className:"flex items-center",children:[u.includes("approved")||u.includes("submitted")?k.jsx(w,{className:"w-5 h-5 mr-2"}):k.jsx(x,{className:"w-5 h-5 mr-2"}),u]})}),k.jsx("header",{className:"mb-8",children:k.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",null==t?void 0:t.displayName,"!"]})}),k.jsxs("section",{className:"mb-12",children:[k.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Your Enrolled Courses"}),0===i.length?k.jsx("p",{className:"text-gray-600",children:"You haven't enrolled in any courses yet."}):k.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map((t=>k.jsxs("article",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow "+(t.enrolled?"border-2 border-green-500":"border border-yellow-500"),children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:t.title}),t.enrolled?k.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Approved"}):k.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:"Pending Approval"})]}),k.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),t.enrolled&&k.jsxs("div",{className:"mb-4",children:[k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:k.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${t.progress}%`}})}),k.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[t.progress,"% Complete"]})]}),k.jsx("button",{className:`w-full ${t.enrolled?"bg-primary hover:bg-primary/90":"bg-gray-300 cursor-not-allowed"} text-white py-2 rounded-lg transition-colors`,onClick:()=>t.enrolled&&e(`/dashboard/course/${t.id}`),disabled:!t.enrolled,children:t.enrolled?t.progress>0?"Continue Learning":"Start Course":"Awaiting Approval"})]},t.id)))})]}),k.jsxs("section",{children:[k.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Available Courses"}),k.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map((e=>k.jsxs("article",{className:"bg-quinary rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[k.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:e.title}),k.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),k.jsx("div",{className:"flex justify-between items-center mb-4",children:k.jsxs("span",{className:"text-xl font-semibold text-primary",children:["KSH ",e.price]})}),E(e)]},e.id)))})]})]}),m&&g&&k.jsx(RE,{course:g,onClose:()=>{f(!1),y(null)},onSubmit:async e=>{if(g&&t){b(!0),h(null);try{const n=gT(wE,"enrollments"),s=JT(n,eE("userId","==",t.uid),eE("courseId","==",g.id));if(!(await pE(s)).empty)return void h("You are already enrolled in this course");const r={userId:t.uid,courseId:g.id,enrolled:!1,userName:t.displayName||"Anonymous User",userEmail:t.email,enrolledAt:new Date,progress:0,completedLessons:[],lastAccessed:new Date,paymentRefCode:e},i=await function(e,t){const n=aT(e.firestore,bT),s=yT(e),r=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return fE(n,[LT(DT(e.firestore),"addDoc",s._key,r,null!==e.converter,{}).toMutation(s._key,nv.exists(!1))]).then((()=>s))}(n,r);await(async e=>{try{const t={to_name:"Admin",from_name:e.userName,user_email:e.userEmail,course_title:e.courseTitle,course_price:e.coursePrice,payment_ref:e.paymentRefCode,enrollment_id:e.enrollmentId,enrollment_date:e.enrollmentDate};if(200===(await W("service_9jyrl8u","template_way5p1i",t,"x3y7k1yvWMwdEQrHv")).status)return!0}catch(u){throw console.error("Email sending failed:",u),new Error("Failed to send notification email")}})({userEmail:t.email,userName:t.displayName||"Anonymous User",courseTitle:g.title,coursePrice:g.price,enrollmentId:i.id,paymentRefCode:e,enrollmentDate:(new Date).toLocaleString()}),h("Enrollment request submitted. Waiting for approval."),f(!1),await T(t)}catch(n){console.error("Error enrolling in course:",n),h("Failed to enroll in course. Please try again.")}finally{p(null)}}},isProcessing:v})]})},LE=a.createContext(),OE=({children:e})=>{const[t,n]=a.useState(null),[s,r]=a.useState(!0);return a.useEffect((()=>Cp(vE,(e=>{const t=sessionStorage.getItem("userSession");if(t){const{timestamp:s}=JSON.parse(t);(new Date).getTime()-s>144e5?(sessionStorage.removeItem("userSession"),localStorage.removeItem("isAuthenticated"),n(null)):n(e)}else n(e);r(!1)}))),[]),k.jsx(LE.Provider,{value:{user:t,loading:s},children:!s&&e})},ME=({children:e})=>{const{user:t}=a.useContext(LE),n="true"===localStorage.getItem("isAuthenticated");return t||n?e:k.jsx(Je,{to:"/signUp&signIn/login",replace:!0})};ME.propTypes={children:PE.node.isRequired};const VE=()=>{const{id:e}=Be(),t=Fe(),[n,s]=a.useState(null),[r,i]=a.useState(null),[o,l]=a.useState(!0),[c,u]=a.useState(null),[h,d]=a.useState(null);return a.useEffect((()=>{(async()=>{if(l(!0),u(null),!e||!vE.currentUser)return u("Please log in to access this course"),void l(!1);try{const t=JT(gT(wE,"enrollments"),eE("userId","==",vE.currentUser.uid),eE("courseId","==",e)),n=await pE(t);if(n.empty)return u("You are not enrolled in this course"),void l(!1);const r=n.docs[0].data();if(!r.enrolled)return u("Your enrollment is pending approval"),void l(!1);i(r);const o=yT(wE,"courses",e),a=await hE(o);if(!a.exists())return u("Course not found"),void l(!1);s({id:a.id,...a.data()})}catch(t){console.error("Error:",t),u(t.message||"An error occurred while loading the course")}finally{l(!1)}})()}),[e]),o?k.jsx("div",{className:"min-h-screen grid place-items-center",children:k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-900"})}):c?k.jsx("div",{className:"min-h-screen grid place-items-center bg-gray-50",children:k.jsx("div",{className:"max-w-md w-full mx-auto p-8 bg-white rounded-lg shadow-md",children:k.jsxs("div",{className:"text-center space-y-4",children:[k.jsx("p",{className:"text-red-500 font-medium",children:c}),c.includes("pending")?k.jsx("p",{className:"text-gray-600 text-sm",children:"Please wait for an administrator to approve your enrollment."}):k.jsx("p",{className:"text-gray-600 text-sm",children:c.includes("enrolled")?"Return to dashboard to enroll in this course.":"Please try again or contact support if the problem persists."}),k.jsxs("button",{onClick:()=>t("/dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 text-purple-600 hover:text-purple-800 transition-colors",children:[k.jsx(b,{size:16}),k.jsx("span",{children:"Return to Dashboard"})]})]})})}):k.jsxs("div",{className:"min-h-screen bg-gray-50",children:[k.jsx("header",{className:"bg-white shadow-sm",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[k.jsx("div",{className:"flex items-center gap-4 mb-4",children:k.jsxs("button",{onClick:()=>t("/dashboard"),className:"text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[k.jsx(b,{size:20}),"Back to Dashboard"]})}),k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:null==n?void 0:n.title}),k.jsx("p",{className:"mt-2 text-gray-600",children:null==n?void 0:n.description})]})}),k.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[k.jsx("div",{className:"lg:col-span-1",children:k.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Course Content"}),k.jsx("div",{className:"space-y-4",children:null==n?void 0:n.modules.map(((n,s)=>k.jsxs("div",{className:"border rounded-lg",children:[k.jsxs("button",{onClick:()=>{d(h===s?null:s)},className:"w-full flex justify-between items-center p-4 text-left hover:bg-gray-50",children:[k.jsx("span",{className:"font-medium",children:n.title}),h===s?k.jsx(T,{}):k.jsx(E,{})]}),h===s&&k.jsx("ul",{className:"p-4 space-y-2 border-t",children:n.lessons.map(((s,i)=>{var o;return k.jsx("li",{children:k.jsxs("button",{onClick:()=>{(null==r?void 0:r.enrolled)?t(`/dashboard/course/${e}/lesson/${s}`):u("Your enrollment needs to be approved to access lessons")},className:"w-full flex items-center gap-3 p-2 rounded \n                  "+((null==r?void 0:r.enrolled)?"hover:bg-gray-50 cursor-pointer":"cursor-not-allowed opacity-60"),disabled:!(null==r?void 0:r.enrolled),children:[(null==(o=null==r?void 0:r.completedLessons)?void 0:o.includes(s))?k.jsx(w,{className:"text-green-500 w-5 h-5"}):k.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"}),k.jsx("span",{className:""+((null==r?void 0:r.enrolled)?"":"text-gray-400"),children:n.lessonTitles[i]})]})},s)}))})]},s)))})]})}),k.jsx("div",{className:"lg:col-span-2",children:k.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Your Progress"}),k.jsx("div",{className:"space-y-6",children:null==n?void 0:n.modules.map(((e,t)=>{const n=e.lessons.filter((e=>{var t;return null==(t=null==r?void 0:r.completedLessons)?void 0:t.includes(e)})).length,s=n/e.lessons.length*100;return k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx("h3",{className:"font-medium",children:e.title}),k.jsxs("span",{className:"text-sm text-gray-600",children:[n," / ",e.lessons.length," lessons"]})]}),k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:k.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]},t)}))}),k.jsxs("div",{className:"mt-8 pt-6 border-t",children:[k.jsxs("div",{className:"flex justify-between items-center mb-2",children:[k.jsx("h3",{className:"font-semibold",children:"Overall Progress"}),k.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round((null==r?void 0:r.progress)||0),"% Complete"]})]}),k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:k.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:`${(null==r?void 0:r.progress)||0}%`}})})]})]})})]})})]})};function UE(){const{pathname:e}=Me();return a.useEffect((()=>{window.scrollTo(0,0)}),[e]),null}function FE(){return a.useEffect((()=>{H("x3y7k1yvWMwdEQrHv")}),[]),k.jsx(OE,{children:k.jsxs(Tt,{children:[k.jsx(UE,{}),k.jsx(Rt,{}),k.jsxs(tt,{children:[k.jsx(Ze,{path:"/",element:k.jsx(Pt,{})}),k.jsx(Ze,{path:"/online-services",element:k.jsx(jt,{})}),k.jsx(Ze,{path:"/testimonials",element:k.jsx(At,{})}),k.jsx(Ze,{path:"/demo-sites",element:k.jsx(G,{})}),k.jsx(Ze,{path:"/website-pricing",element:k.jsx(Lt,{})}),k.jsx(Ze,{path:"/about",element:k.jsx(R,{})}),k.jsx(Ze,{path:"/contact-us",element:k.jsx(K,{})}),k.jsx(Ze,{path:"/signUp&signIn",element:k.jsx(bE,{})}),k.jsx(Ze,{path:"/signUp&signIn/login",element:k.jsx(TE,{})}),k.jsx(Ze,{path:"/dashboard/course/:id/lesson/:id",element:k.jsx(ME,{children:k.jsx(xE,{})})}),k.jsx(Ze,{path:"/dashboard/course/:id",element:k.jsx(ME,{children:k.jsx(VE,{})})}),k.jsx(Ze,{path:"/dashboard",element:k.jsx(ME,{children:k.jsx(DE,{})})})]}),k.jsx(kt,{})]})})}j.createRoot(document.getElementById("root")).render(k.jsx(a.StrictMode,{children:k.jsx(FE,{})}));
